<div class="top">
  <app-search-form placeholder="请输入用户名" (onSearch)="search($event)"></app-search-form>
</div>

<ng-template #totalTemplate let-total>总共 {{ total }} 条</ng-template>
<nz-table class="table" #basicTable [nzData]="datum" [nzLoading]="loading" nzShowPagination
          [nzFrontPagination]="false" nzShowSizeChanger [nzTotal]="total" [nzShowTotal]="totalTemplate"
          (nzPageSizeChange)="pageSizeChange($event)" (nzPageIndexChange)="pageIndexChange($event)"
          [nzPageSize]="pageSize"
          [nzPageIndex]="pageIndex" (nzQueryParams)="onQuery($event)">
  <thead>
  <tr>
    <th nzColumnKey="id" [nzSortFn]="true">ID</th>
    <th nzColumnKey="name">名称</th>
    <th nzColumnKey="cellphone">手机</th>
    <th nzColumnKey="email">邮箱</th>
    <th nzColumnKey="disabled">状态</th>
    <th nzColumnKey="created" [nzSortFn]="true">日期</th>
    <th>操作</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let data of basicTable.data; let i = index">
    <td>{{ data.id }}</td>
    <td>{{ data.name }}</td>
    <td>{{ data.cellphone }}</td>
    <td>{{ data.email }}</td>
    <td>
      <nz-tag nzColor="error" *ngIf="data.disabled"> 禁用</nz-tag>
      <nz-tag nzColor="success" *ngIf="!data.disabled"> 启用</nz-tag>
    </td>
    <td>{{ data.created | date }}</td>
    <td>
      <ng-container *ngIf="!show; else elseTemplate">
        <a (click)="handleEdit(data.id)">
          <i nz-icon nzType="edit"></i>
        </a>
        <nz-divider nzType="vertical"></nz-divider>
        <a nz-popconfirm nzPopconfirmTitle="确定删除?" (nzOnConfirm)="delete(data.id)" (nzOnCancel)="cancel()"
           nzPopconfirmPlacement="topLeft">
          <i nz-icon nzType="delete"></i>
        </a>
      </ng-container>
      <ng-template #elseTemplate>

        <a nz-popconfirm nzPopconfirmTitle="确定绑定?" (nzOnConfirm)="submit(data.id)" (nzOnCancel)="cancel()"
           nzPopconfirmPlacement="topLeft">
          绑定
        </a>
      </ng-template>


    </td>
  </tr>
  </tbody>
</nz-table>
