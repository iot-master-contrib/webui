import{$ as Rn,A as He,B as mt,C as vn,D as Sn,E as _n,F as Ue,G as We,H as Cn,I as yn,J as bn,K as xn,L as En,M as Nn,N as st,O as wn,P as Fn,Q as Dn,R as lt,S as In,T as pt,U as Tn,V as kn,W as Mn,X as Pn,Y as ct,Z as An,_ as Vn,a as nn,aa as Xn,b as ce,c as re,d as qe,e as on,f as Y,g as U,h as rn,i as an,j as mn,k as sn,l as ln,m as pn,n as cn,o as un,p as dn,q as fn,r as zn,s as $e,t as hn,u as gn,v as W,w as ae,x as Z,y as Q,z as xe}from"./chunk-RA6KZQJN.js";import{Aa as f,Ab as Xt,Ad as Lt,Ba as Nt,Bc as Gt,Ca as wt,Cb as ot,Cd as jt,Da as M,Dd as Ot,De as je,E as te,Ea as p,Ee as Oe,Fa as de,Fb as x,Fd as Ge,Ga as pe,Gb as Ie,Gd as qt,Ha as Ft,Hb as E,He as en,I as vt,Ia as _,Ib as R,J as ze,Ja as ve,Jb as Ce,Je as tn,Kb as X,L as Fe,Lb as ye,Ma as Dt,Mb as B,N as g,Na as It,O as he,Oa as Tt,P as St,Pb as G,Q as _t,Qb as L,R as v,Ra as tt,Rb as N,S,Sa as nt,Sb as j,Ua as it,Ud as O,V as Pe,Va as V,Vd as q,Wd as $,Xd as H,Y as ue,Ya as kt,Yd as Le,Zb as rt,_ as Je,a as ee,aa as s,b as gt,ba as u,ca as et,cb as Se,cc as Bt,da as ge,db as K,ea as Ct,eb as Mt,ed as Xe,ee as w,f as Ee,fb as Pt,fd as Te,gb as At,ge as $t,ha as yt,hd as oe,he as Ht,ia as m,id as Be,ie as be,ja as Ae,ka as De,kb as Vt,l as Ne,lb as _e,le as Ut,me as Wt,na as bt,oa as h,oe as A,pa as o,pe as Zt,q as we,qa as r,qe as F,ra as c,sa as ne,se as D,t as Ye,ta as ie,tc as Re,te as Qt,uc as at,va as y,vb as Rt,vc as I,ve as Kt,w as Me,wc as T,xa as xt,xb as Ve,ya as z,ye as Yt,za as Et,zb as P,ze as Jt}from"./chunk-UDQOBUKV.js";var Bn=(()=>{let i=class i{constructor(e){this.rs=e,this.model="device",this.title="\u8BBE\u5907\u603B\u6570",this.project="",this.count=0}ngOnInit(){let e={};this.project&&(e.filter={project_id:this.project}),this.rs.post(this.model+"/count",e).subscribe(n=>{this.count=n.data})}};i.\u0275fac=function(n){return new(n||i)(u(D))},i.\u0275cmp=g({type:i,selectors:[["app-count"]],inputs:{model:"model",title:"title",project:"project"},standalone:!0,features:[_],decls:1,vars:2,consts:[[3,"nzTitle","nzValue"]],template:function(n,a){n&1&&c(0,"nz-statistic",0),n&2&&m("nzTitle",a.title)("nzValue",a.count)},dependencies:[zn]});let t=i;return t})();var pi=()=>[16,16],Gn=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=g({type:i,selectors:[["app-dash"]],standalone:!0,features:[_],decls:19,vars:2,consts:[[3,"nzGutter"],["nzSpan","8"],["model","device","title","\u8BBE\u5907\u603B\u6570"],["model","space","title","\u7A7A\u95F4\u603B\u6570"],["model","project","title","\u9879\u76EE\u603B\u6570"],["model","product","title","\u4EA7\u54C1\u603B\u6570"],["model","gateway","title","\u7F51\u5173\u603B\u6570"],["model","user","title","\u7528\u6237\u603B\u6570"]],template:function(n,a){n&1&&(o(0,"nz-row",0)(1,"nz-col",1)(2,"nz-card"),c(3,"app-count",2),r()(),o(4,"nz-col",1)(5,"nz-card"),c(6,"app-count",3),r()(),o(7,"nz-col",1)(8,"nz-card"),c(9,"app-count",4),r()(),o(10,"nz-col",1)(11,"nz-card"),c(12,"app-count",5),r()(),o(13,"nz-col",1)(14,"nz-card"),c(15,"app-count",6),r()(),o(16,"nz-col",1)(17,"nz-card"),c(18,"app-count",7),r()()()),n&2&&m("nzGutter",ve(1,pi))},dependencies:[Bn,I,T,$e]});let t=i;return t})();function ui(t,i){if(t&1&&c(0,"img",13),t&2){let l=f().$implicit;m("src",l.icon,ue)}}function di(t,i){t&1&&c(0,"i",14)}function fi(t,i){if(t&1&&c(0,"i",15),t&2){let l=f().$implicit;m("routerLink",l.id+"/edit")}}function zi(t,i){if(t&1){let l=y();c(0,"span",16),o(1,"nz-dropdown-menu",null,17)(3,"ul",18)(4,"li",19),z("nzOnConfirm",function(){v(l);let n=f().$implicit,a=f();return S(a.delete(n.id))}),c(5,"span",20),p(6," \u5220\u9664 "),r()()()}if(t&2){let l=M(2);m("nzDropdownMenu",l)}}var hi=(t,i,l)=>[t,i,l];function gi(t,i){if(t&1&&(o(0,"nz-col",6)(1,"nz-card",7),c(2,"nz-card-meta",8),r(),h(3,ui,1,1,"ng-template",null,9,V)(5,di,1,0,"ng-template",null,10,V)(7,fi,1,1,"ng-template",null,11,V)(9,zi,7,1,"ng-template",null,12,V),r()),t&2){let l=i.$implicit,e=M(4),n=M(6),a=M(8),d=M(10);m("nzXs",12)("nzSm",8)("nzMd",6)("nzLg",4)("nzXl",3)("nzXXl",2),s(1),m("nzCover",e)("nzActions",Dt(10,hi,n,a,d)),s(1),m("nzTitle",l.name)("nzDescription",l.description)}}var vi=()=>[4,4],Ln=(()=>{let i=class i{constructor(e,n,a,d){this.ms=e,this.router=n,this.rs=a,this.msg=d,this.total=0,this.pageIndex=1,this.pageSize=10,this.query={limit:20,skip:0},this.value="",this.plugins=[{id:"modbus",name:"Modbus",description:"Modbus\u534F\u8BAE\u63D2\u4EF6",icon:"/assets/app.png"},{id:"influxdb",name:"Influxdb",description:"Influxdb\u65F6\u5E8F\u6570\u636E\u5E93",icon:"/assets/app.png"},{id:"scada",name:"Scada",description:"Web\u7EC4\u6001",icon:"/assets/app.png"},{id:"sms",name:"SMS",description:"\u77ED\u4FE1\u63A8\u9001",icon:"/assets/app.png"},{id:"call",name:"Call",description:"\u7535\u8BDD\u62A5\u8B66",icon:"/assets/app.png"},{id:"web-studio",name:"Web Studio",description:"\u4F4E\u4EE3\u7801\u5F00\u53D1\u5E73\u53F0",icon:"/assets/app.png"},{id:"goview",name:"GoView",description:"\u5927\u6570\u636E\u5C4F\u53EF\u89C6\u5316",icon:"/assets/app.png"}]}ngOnInit(){this.load()}load(){this.rs.post("plugin/search",this.query).subscribe(e=>{e.data.filter((n,a)=>{e.data[a]=gt(ee({},n),{icon:"/assets/app.png"})}),this.plugins=e.data,this.total=e.total},e=>{console.log("err:",e)})}delete(e){this.rs.get(`plugin/${e}/delete`,{}).subscribe(n=>{this.msg.success("\u5220\u9664\u6210\u529F"),this.load()},n=>{console.log("err:",n)}),this.load()}refresh(){this.pageIndex=1,this.load()}search(e){console.log(e),this.query.keyword={name:e},this.query.skip=0,this.load()}handleEdit(){this.router.navigateByUrl("admin/plugin/create")}};i.\u0275fac=function(n){return new(n||i)(u(je),u(P),u(D),u(F))},i.\u0275cmp=g({type:i,selectors:[["app-plugin"]],standalone:!0,features:[_],decls:6,vars:6,consts:[[1,"top"],["placeholder","\u8BF7\u8F93\u5165\u540D\u79F0",3,"onSearch"],[3,"showExportBtn","showImportBtn","showDelBtn","add"],[1,"content"],[3,"nzGutter"],[3,"nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl",4,"ngFor","ngForOf"],[3,"nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"],["nzHoverable","",3,"nzCover","nzActions"],[3,"nzTitle","nzDescription"],["coverTemplate",""],["actionSetting",""],["actionEdit",""],["actionEllipsis",""],["alt","icon",3,"src"],["nz-icon","","nzType","setting"],["nz-icon","","nzType","edit",3,"routerLink"],["nz-icon","","nzType","ellipsis","nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","nz-popconfirm","","nzPopconfirmTrigger","click","nzPopconfirmTitle","\u786E\u8BA4\u5220\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete"]],template:function(n,a){n&1&&(o(0,"div",0)(1,"app-search-form",1),z("onSearch",function(C){return a.search(C)}),r(),o(2,"app-batch-btn",2),z("add",function(){return a.handleEdit()}),r()(),o(3,"div",3)(4,"nz-row",4),h(5,gi,11,14,"nz-col",5),r()()),n&2&&(s(2),m("showExportBtn",!1)("showImportBtn",!1)("showDelBtn",!1),s(2),m("nzGutter",ve(5,vi)),s(1),m("ngForOf",a.plugins))},dependencies:[kn,Tn,Se,$e,hn,T,Yt,Jt,oe,Kt,Qt,qe,I,Xt],styles:[".top[_ngcontent-%COMP%]{margin:10px 0 20px;display:flex;align-items:center}"]});let t=i;return t})();function Ci(t,i){if(t&1){let l=y();o(0,"button",18),z("click",function(){v(l);let n=f();return S(n.onSubmit())}),p(1,"\u4FDD\u5B58"),r()}}var yi=()=>[",","\uFF0C"],ut=(()=>{let i=class i{constructor(e,n,a,d,C){this.fb=e,this.router=n,this.msg=a,this.rs=d,this.route=C,this.buildFromGroup()}buildFromGroup(e){e=e||{},this.formGroup=this.fb.group({id:[this.id,[]],name:[e.name||"",[]],description:[e.description||"",[]],icon:[e.icon||"",[]],version:[e.version||"",[]],url:[e.url||"",[]],keywords:[e.keywords||[],[]]}),console.log(this.formGroup.value)}ngOnInit(){if(this.route.snapshot.paramMap.has("id")){this.id=this.route.snapshot.paramMap.get("id"),this.load();return}this.buildFromGroup()}load(){this.rs.get(`plugin/${this.id}`,{}).subscribe(e=>{this.buildFromGroup(e.data)},e=>{console.log("err:",e)})}onSubmit(){if(this.formGroup.valid){let e=this.id?`plugin/${this.id}`:"plugin/create";this.rs.post(e,this.formGroup.value).subscribe(n=>{this.router.navigateByUrl("admin/plugin"),this.msg.success("\u4FDD\u5B58\u6210\u529F")});return}else Object.values(this.formGroup.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))})}onIconChange(e){}};i.\u0275fac=function(n){return new(n||i)(u(L),u(P),u(F),u(D),u(Ve))},i.\u0275cmp=g({type:i,selectors:[["app-plugin-edit"]],standalone:!0,features:[_],decls:46,vars:33,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup"],["nzRequired","","nzFor","id",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["nz-input","","formControlName","id"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","formControlName","name"],["nzMode","tags","nzPlaceHolder","\u5173\u952E\u5B57\uFF0C\u9017\u53F7\u5206\u9694","formControlName","keywords",3,"nzTokenSeparators"],["nzFor","version",3,"nzSm","nzXs"],["nz-input","","formControlName","version"],["nzFor","description",3,"nzSm","nzXs"],[3,"nzMaxCharacterCount"],["rows","4","nz-input","","formControlName","description"],[3,"nzSm","nzXs"],["nzAction","/",3,"nzChange"],["nz-button",""],["nz-icon","","nzType","upload"],["nz-input","","formControlName","url"],["nz-button","","nzType","primary",3,"click"]],template:function(n,a){n&1&&(o(0,"nz-page-header")(1,"nz-page-header-title"),p(2),r(),o(3,"nz-page-header-extra")(4,"nz-space"),h(5,Ci,2,0,"button",0),r()()(),o(6,"form",1)(7,"nz-form-item")(8,"nz-form-label",2),p(9,"Id"),r(),o(10,"nz-form-control",3),c(11,"input",4),r()(),o(12,"nz-form-item")(13,"nz-form-label",5),p(14,"\u540D\u79F0"),r(),o(15,"nz-form-control",3),c(16,"input",6),r()(),o(17,"nz-form-item")(18,"nz-form-label",5),p(19,"\u5173\u952E\u5B57"),r(),o(20,"nz-form-control",3),c(21,"nz-select",7),r()(),o(22,"nz-form-item")(23,"nz-form-label",8),p(24,"\u7248\u672C"),r(),o(25,"nz-form-control",3),c(26,"input",9),r()(),o(27,"nz-form-item")(28,"nz-form-label",10),p(29,"\u8BF4\u660E"),r(),o(30,"nz-form-control",3)(31,"nz-textarea-count",11),c(32,"textarea",12),r()()(),o(33,"nz-form-item")(34,"nz-form-label",13),p(35,"\u5C01\u9762 "),r(),o(36,"nz-form-control",13)(37,"nz-upload",14),z("nzChange",function(C){return a.onIconChange(C)}),o(38,"button",15),c(39,"span",16),p(40," \u70B9\u51FB\u4E0A\u4F20 "),r()()()(),o(41,"nz-form-item")(42,"nz-form-label",8),p(43,"URL"),r(),o(44,"nz-form-control",3),c(45,"input",17),r()()()),n&2&&(s(2),pe("\u63D2\u4EF6",a.id?"\u7F16\u8F91":"\u521B\u5EFA",""),s(4),m("formGroup",a.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(1),m("nzTokenSeparators",ve(32,yi)),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(1),m("nzMaxCharacterCount",200),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(6),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))},dependencies:[A,Q,Z,W,U,Y,N,X,x,E,R,j,B,G,Le,T,I,q,O,H,$,w,Ht,xe,oe,re]});let t=i;return t})();var jn=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=g({type:i,selectors:[["app-plugin-detail"]],standalone:!0,features:[_],decls:2,vars:0,template:function(n,a){n&1&&(o(0,"p"),p(1,"plugin-detail works!"),r())}});let t=i;return t})();var dt=(()=>{let i=class i{constructor(e,n,a,d,C){this.fb=e,this.router=n,this.msg=a,this.rs=d,this.route=C,this.data={name:"\u65B0\u7528\u6237"},this.id=""}buildFromGroup(e){e=e||{},this.formGroup=this.fb.group({id:[this.id||"",[]],name:[e.name||"",[]],email:[e.email||"",[]],disabled:[e.disabled||!1,[]],admin:[e.admin||!1,[]],cellphone:[e.cellphone||"",[]]}),console.log(this.formGroup.value)}ngOnInit(){this.route.snapshot.paramMap.has("id")?(this.id=this.route.snapshot.paramMap.get("id"),this.buildFromGroup(),this.load()):this.buildFromGroup()}load(){this.rs.get(`user/${this.id}`).subscribe(e=>{this.buildFromGroup(e.data)},e=>{console.log("err:",e)})}onSubmit(){if(this.formGroup.valid){let e=this.id?`user/${this.id}`:"user/create";this.rs.post(e,this.formGroup.value).subscribe(n=>{this.router.navigateByUrl("/admin/user/"+n.data.id),this.msg.success("\u4FDD\u5B58\u6210\u529F")});return}else Object.values(this.formGroup.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))})}};i.\u0275fac=function(n){return new(n||i)(u(L),u(P),u(F),u(D),u(Ve))},i.\u0275cmp=g({type:i,selectors:[["app-user-edit"]],standalone:!0,features:[_],decls:37,vars:26,consts:[["nz-button","","nzType","primary",3,"click"],["nz-form","",3,"formGroup"],["nzFor","id",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["nz-input","","formControlName","id","placeholder","\u9009\u586B"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","formControlName","name"],["nzFor","cellphone",3,"nzSm","nzXs"],["nz-input","","placeholder","\u7535\u8BDD","formControlName","cellphone"],["nzFor","email",3,"nzSm","nzXs"],["nz-input","","placeholder","\u90AE\u7BB1","formControlName","email"],["nzFor","disabled",3,"nzSm","nzXs"],["formControlName","disabled"],["nzFor","admin",3,"nzSm","nzXs"],["formControlName","admin"]],template:function(n,a){n&1&&(o(0,"nz-page-header")(1,"nz-page-header-title"),p(2),r(),o(3,"nz-page-header-extra")(4,"button",0),z("click",function(){return a.onSubmit()}),p(5,"\u4FDD\u5B58"),r()()(),o(6,"form",1)(7,"nz-form-item")(8,"nz-form-label",2),p(9,"ID(\u7528\u6237\u540D)"),r(),o(10,"nz-form-control",3),c(11,"input",4),r()(),o(12,"nz-form-item")(13,"nz-form-label",5),p(14,"\u59D3\u540D"),r(),o(15,"nz-form-control",3),c(16,"input",6),r()(),o(17,"nz-form-item")(18,"nz-form-label",7),p(19,"\u7535\u8BDD"),r(),o(20,"nz-form-control",3),c(21,"input",8),r()(),o(22,"nz-form-item")(23,"nz-form-label",9),p(24,"\u90AE\u7BB1"),r(),o(25,"nz-form-control",3),c(26,"input",10),r()(),o(27,"nz-form-item")(28,"nz-form-label",11),p(29,"\u7981\u7528"),r(),o(30,"nz-form-control",3),c(31,"nz-switch",12),r()(),o(32,"nz-form-item")(33,"nz-form-label",13),p(34,"\u5E73\u53F0\u7BA1\u7406\u5458"),r(),o(35,"nz-form-control",3),c(36,"nz-switch",14),r()()()),n&2&&(s(2),pe("\u7528\u6237",a.id?"\u7F16\u8F91":"\u521B\u5EFA",""),s(4),m("formGroup",a.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))},dependencies:[We,Ue,_e,A,Q,Z,W,N,X,x,E,R,j,B,G,Le,T,I,q,O,H,$,w]});let t=i;return t})();var On=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=g({type:i,selectors:[["app-user-detail"]],standalone:!0,features:[_],decls:2,vars:0,template:function(n,a){n&1&&(o(0,"p"),p(1,"user-detail works!"),r())}});let t=i;return t})();function bi(t,i){if(t&1){let l=y();o(0,"button",11),z("click",function(){v(l);let n=f();return S(n.onSubmit())}),p(1,"\u4FDD\u5B58"),r()}}function xi(t,i){if(t&1){let l=y();o(0,"nz-form-item")(1,"nz-form-label",12),p(2,"\u8BC1\u4E66cert"),r(),o(3,"nz-form-control",3),c(4,"input",13),o(5,"nz-upload",14),z("nzChange",function(n){v(l);let a=f();return S(a.onCertChange(n))}),o(6,"button",15),c(7,"span",16),p(8," \u4E0A\u4F20 "),r()()()()}t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Ei(t,i){if(t&1){let l=y();o(0,"nz-form-item")(1,"nz-form-label",17),p(2,"\u8BC1\u4E66key"),r(),o(3,"nz-form-control",3),c(4,"input",18),o(5,"nz-upload",14),z("nzChange",function(n){v(l);let a=f();return S(a.onKeyChange(n))}),o(6,"button",15),c(7,"span",16),p(8," \u4E0A\u4F20 "),r()()()()}t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Ni(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",19),p(2,"Email"),r(),o(3,"nz-form-control",3),c(4,"input",20),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}var qn=(()=>{let i=class i{constructor(e,n,a,d){this.fb=e,this.route=n,this.rs=a,this.msg=d,this.data={},this.buildFromGroup()}ngOnInit(){this.rs.get("setting/web",{}).subscribe(e=>{},e=>{console.log("err:",e)})}buildFromGroup(){this.formGroup=this.fb.group({port:[this.data.port||8080,[]],https:[this.data.https||"",[]],cert:[this.data.cert||"",[]],key:[this.data.key||"",[]],email:[this.data.email||"",[]]})}onSubmit(){this.rs.post("setting/web",this.formGroup.value).subscribe(e=>{},e=>{console.log("err:",e)})}onCertChange(e){}onKeyChange(e){}};i.\u0275fac=function(n){return new(n||i)(u(L),u(P),u(D),u(F))},i.\u0275cmp=g({type:i,selectors:[["app-setting-web"]],standalone:!0,features:[_],decls:25,vars:12,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup"],["nzRequired","","nzFor","port",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["nz-input","","type","number","formControlName","port"],["nzFor","https",3,"nzSm","nzXs"],["nzPlaceHolder","\u65B9\u5F0F","formControlName","https"],["nzLabel","\u7981\u7528","nzValue",""],["nzLabel","TLS","nzValue","TLS"],["nzLabel","LetsEncrypt","nzValue","LetsEncrypt"],[4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nzFor","cert",3,"nzSm","nzXs"],["type","hidden","formControlName","cert"],["nzAction","https://www.mocky.io/v2/5cc8019d300000980a055e76",3,"nzChange"],["nz-button",""],["nz-icon","","nzType","upload"],["nzFor","key",3,"nzSm","nzXs"],["type","hidden","formControlName","key"],["nzFor","port",3,"nzSm","nzXs"],["nz-input","","type","email","formControlName","email"]],template:function(n,a){n&1&&(o(0,"nz-page-header")(1,"nz-page-header-title"),p(2,"\u8BBE\u7F6E"),r(),o(3,"nz-page-header-subtitle"),p(4,"Web\u670D\u52A1"),r(),o(5,"nz-page-header-extra")(6,"nz-space"),h(7,bi,2,0,"button",0),r()()(),o(8,"form",1)(9,"nz-form-item")(10,"nz-form-label",2),p(11,"HTTP\u7AEF\u53E3\u53F7"),r(),o(12,"nz-form-control",3),c(13,"input",4),r()(),o(14,"nz-form-item")(15,"nz-form-label",5),p(16,"HTTPS"),r(),o(17,"nz-form-control",3)(18,"nz-select",6),c(19,"nz-option",7)(20,"nz-option",8)(21,"nz-option",9),r()()(),h(22,xi,9,4,"nz-form-item",10)(23,Ei,9,4,"nz-form-item",10)(24,Ni,5,4,"nz-form-item",10),r()),n&2&&(s(8),m("formGroup",a.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(5),m("ngIf",a.formGroup.controls.https.value==="TLS"),s(1),m("ngIf",a.formGroup.controls.https.value==="TLS"),s(1),m("ngIf",a.formGroup.controls.https.value==="LetsEncrypt"))},dependencies:[N,X,x,ye,E,R,A,T,$,q,O,H,w,Q,Z,ae,W,I,re,U,j,B,G,Y,ce,xe,oe,K]});let t=i;return t})();function wi(t,i){if(t&1){let l=y();o(0,"button",13),z("click",function(){v(l);let n=f();return S(n.onSubmit())}),p(1,"\u4FDD\u5B58"),r()}}var $n=(()=>{let i=class i{constructor(e,n,a,d){this.fb=e,this.route=n,this.rs=a,this.msg=d,this.data={},this.urls={sqlite:"master.db",mysql:"root:123456@tcp(127.0.0.1)/master?charset=utf8",postgres:"postgres://root:123456@127.0.0.1/master?sslmode=verify-full",sqlserver:"sqlserver://sa:123456@127.0.0.1?database=master&connection+timeout=30",godror:'user="root" password="123456" connectString="127.0.0.1:1521/master"'},this.buildFromGroup()}ngOnInit(){this.rs.get("setting/database",{}).subscribe(e=>{},e=>{console.log("err:",e)})}buildFromGroup(){this.formGroup=this.fb.group({type:[this.data.type||"sqlite",[]],url:[this.data.url||"master.db",[]],debug:[this.data.debug||!1,[]]})}onSubmit(){this.rs.post("setting/database",this.formGroup.value).subscribe(e=>{},e=>{console.log("err:",e)})}writeExample(){this.formGroup.patchValue({url:this.urls[this.formGroup.controls.type.value]})}};i.\u0275fac=function(n){return new(n||i)(u(L),u(P),u(D),u(F))},i.\u0275cmp=g({type:i,selectors:[["app-setting-database"]],standalone:!0,features:[_],decls:27,vars:10,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup"],["nzFor","type",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["formControlName","type"],["nzLabel","SQLite\uFF08\u5185\u7F6E\uFF09","nzValue","sqlite"],["nzLabel","MySQL","nzValue","mysql"],["nzLabel","Postgres","nzValue","postgres"],["nzLabel","Microsoft SQL Server","nzValue","sqlserver"],["nzLabel","Oracle","nzValue","godror"],["nzRequired","","nzFor","url",3,"nzSm","nzXs"],["nz-input","","formControlName","url"],[3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(n,a){n&1&&(o(0,"nz-page-header")(1,"nz-page-header-title"),p(2,"\u8BBE\u7F6E"),r(),o(3,"nz-page-header-subtitle"),p(4,"\u6570\u636E\u5E93"),r(),o(5,"nz-page-header-extra")(6,"nz-space"),h(7,wi,2,0,"button",0),r()()(),o(8,"form",1)(9,"nz-form-item")(10,"nz-form-label",2),p(11,"\u6570\u636E\u5E93\u7C7B\u578B"),r(),o(12,"nz-form-control",3)(13,"nz-select",4),c(14,"nz-option",5)(15,"nz-option",6)(16,"nz-option",7)(17,"nz-option",8)(18,"nz-option",9),r()()(),o(19,"nz-form-item")(20,"nz-form-label",10),p(21,"\u8FDE\u63A5\u5B57\u7B26\u4E32"),r(),o(22,"nz-form-control",3),c(23,"input",11),p(24),o(25,"a",12),z("click",function(){return a.writeExample()}),p(26,"\u5199\u5165"),r()()()()),n&2&&(s(8),m("formGroup",a.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(8),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(2),pe(" \u793A\u4F8B\uFF1A",a.urls[a.formGroup.controls.type.value]," "))},dependencies:[N,X,x,E,R,A,T,$,q,O,H,w,ce,Q,Z,ae,W,I,re,U,j,B,G,Y]});let t=i;return t})();function Fi(t,i){if(t&1){let l=y();o(0,"button",8),z("click",function(){v(l);let n=f();return S(n.onSubmit())}),p(1,"\u4FDD\u5B58"),r()}}function Di(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",9),p(2,"\u5730\u5740"),r(),o(3,"nz-form-control",3),c(4,"input",10),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Ii(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",11),p(2,"\u7AEF\u53E3"),r(),o(3,"nz-form-control",3),c(4,"input",12),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Ti(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",13),p(2,"\u7528\u6237\u540D"),r(),o(3,"nz-form-control",3),c(4,"input",14),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function ki(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",15),p(2,"\u5BC6\u7801"),r(),o(3,"nz-form-control",3),c(4,"input",16),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Mi(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",17),p(2,"\u5BA2\u6237\u7AEFID"),r(),o(3,"nz-form-control",3),c(4,"input",18),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}var Hn=(()=>{let i=class i{constructor(e,n,a,d){this.fb=e,this.route=n,this.rs=a,this.msg=d,this.data={},this.buildFromGroup()}ngOnInit(){this.rs.get("setting/broker",{}).subscribe(e=>{},e=>{console.log("err:",e)})}buildFromGroup(){this.formGroup=this.fb.group({type:[this.data.type||"internal",[]],address:[this.data.address||"localhost",[]],port:[this.data.port||1883,[]],username:[this.data.username||"",[]],password:[this.data.password||"",[]],client_id:[this.data.client_id||"master",[]]})}onSubmit(){this.rs.post("setting/broker",this.formGroup.value).subscribe(e=>{},e=>{console.log("err:",e)})}};i.\u0275fac=function(n){return new(n||i)(u(L),u(P),u(D),u(F))},i.\u0275cmp=g({type:i,selectors:[["app-setting-broker"]],standalone:!0,features:[_],decls:21,vars:10,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup"],["nzFor","type",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["formControlName","type"],["nzLabel","\u5185\u7F6E","nzValue","internal"],["nzLabel","\u5916\u7F6E","nzValue","external"],[4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nzRequired","","nzFor","address",3,"nzSm","nzXs"],["nz-input","","formControlName","address"],["nzRequired","","nzFor","port",3,"nzSm","nzXs"],["nz-input","","type","number","formControlName","port"],["nzFor","username",3,"nzSm","nzXs"],["nz-input","","formControlName","username"],["nzFor","password",3,"nzSm","nzXs"],["nz-input","","formControlName","password"],["nzFor","client_id",3,"nzSm","nzXs"],["nz-input","","formControlName","client_id"]],template:function(n,a){n&1&&(o(0,"nz-page-header")(1,"nz-page-header-title"),p(2,"\u8BBE\u7F6E"),r(),o(3,"nz-page-header-subtitle"),p(4,"MQTT\u603B\u7EBF"),r(),o(5,"nz-page-header-extra")(6,"nz-space"),h(7,Fi,2,0,"button",0),r()()(),o(8,"form",1)(9,"nz-form-item")(10,"nz-form-label",2),p(11,"\u7C7B\u578B"),r(),o(12,"nz-form-control",3)(13,"nz-select",4),c(14,"nz-option",5)(15,"nz-option",6),r()()(),h(16,Di,5,4,"nz-form-item",7)(17,Ii,5,4,"nz-form-item",7)(18,Ti,5,4,"nz-form-item",7)(19,ki,5,4,"nz-form-item",7)(20,Mi,5,4,"nz-form-item",7),r()),n&2&&(s(8),m("formGroup",a.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(4),m("ngIf",a.formGroup.controls.type.value==="external"),s(1),m("ngIf",a.formGroup.controls.type.value==="external"),s(1),m("ngIf",a.formGroup.controls.type.value==="external"),s(1),m("ngIf",a.formGroup.controls.type.value==="external"),s(1),m("ngIf",a.formGroup.controls.type.value==="external"))},dependencies:[N,X,x,ye,E,R,A,T,$,q,O,H,w,ce,Q,Z,ae,W,I,re,U,j,B,G,Y,K]});let t=i;return t})();function Pi(t,i){if(t&1){let l=y();o(0,"button",15),z("click",function(){v(l);let n=f();return S(n.submit())}),p(1,"\u4FDD\u5B58"),r()}}function Ai(t,i){t&1&&(ne(0),p(1,"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"),ie())}function Vi(t,i){if(t&1&&h(0,Ai,2,0,"ng-container",16),t&2){let l=i.$implicit;m("ngIf",l.hasError("required"))}}function Ri(t,i){t&1&&(ne(0),p(1,"\u8BF7\u8F93\u5165\u5BC6\u7801!"),ie())}function Xi(t,i){if(t&1&&h(0,Ri,2,0,"ng-container",16),t&2){let l=i.$implicit;m("ngIf",l.hasError("required"))}}function Bi(t,i){t&1&&(ne(0),p(1,"\u8BF7\u8F93\u5165\u5730\u5740!"),ie())}function Gi(t,i){if(t&1&&h(0,Bi,2,0,"ng-container",16),t&2){let l=i.$implicit;m("ngIf",l.hasError("required"))}}function Li(t,i){t&1&&(ne(0),p(1,"\u8BF7\u8F93\u5165Id!"),ie())}function ji(t,i){if(t&1&&h(0,Li,2,0,"ng-container",16),t&2){let l=i.$implicit;m("ngIf",l.hasError("required"))}}var Un=(()=>{let i=class i{constructor(e,n,a,d){this.fb=e,this.route=n,this.rs=a,this.msg=d,this.data={},this.buildFromGroup()}buildFromGroup(){this.formGroup=this.fb.group({ClientId:["",[Ie.required]],Username:["",[Ie.required]],Url:["",[Ie.required]],Password:["",[Ie.required]]})}ngOnInit(){this.rs.get("setting/mqtt",{}).subscribe(e=>{},e=>{console.log("err:",e)})}submit(){if(this.formGroup.valid){this.rs.post("setting/mqtt",this.formGroup.value).subscribe(e=>{},e=>{console.log("err:",e)});return}else Object.values(this.formGroup.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))})}};i.\u0275fac=function(n){return new(n||i)(u(L),u(P),u(D),u(F))},i.\u0275cmp=g({type:i,selectors:[["app-setting-mqtt"]],standalone:!0,features:[_],decls:37,vars:21,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","Username",3,"nzSm","nzXs"],["nzHasFeedback","",3,"nzSm","nzXs","nzErrorTip"],["nz-input","","name","Username","formControlName","Username"],["nameErrorTpl",""],["nzFor","Password",3,"nzSm","nzXs"],["nz-input","","name","Password","formControlName","Password"],["PasswordErrorTpl",""],["nzRequired","","nzFor","Url",3,"nzSm","nzXs"],["nz-input","","name","Url","formControlName","Url"],["UrlErrorTpl",""],["nzRequired","","nzFor","ClientId",3,"nzSm","nzXs"],["nz-input","","name","ClientId","formControlName","ClientId"],["ClientIdErrorTpl",""],["nz-button","","nzType","primary",3,"click"],[4,"ngIf"]],template:function(n,a){if(n&1&&(o(0,"nz-page-header")(1,"nz-page-header-title"),p(2,"\u8BBE\u7F6E"),r(),o(3,"nz-page-header-subtitle"),p(4,"MQTT\u8FDE\u63A5"),r(),o(5,"nz-page-header-extra")(6,"nz-space"),h(7,Pi,2,0,"button",0),r()()(),o(8,"form",1),z("ngSubmit",function(){return a.submit()}),o(9,"nz-form-item")(10,"nz-form-label",2),p(11,"\u7528\u6237\u540D"),r(),o(12,"nz-form-control",3),c(13,"input",4),h(14,Vi,1,1,"ng-template",null,5,V),r()(),o(16,"nz-form-item")(17,"nz-form-label",6),p(18,"\u5BC6\u7801"),r(),o(19,"nz-form-control",3),c(20,"input",7),h(21,Xi,1,1,"ng-template",null,8,V),r()(),o(23,"nz-form-item")(24,"nz-form-label",9),p(25,"\u5730\u5740"),r(),o(26,"nz-form-control",3),c(27,"input",10),h(28,Gi,1,1,"ng-template",null,11,V),r()(),o(30,"nz-form-item")(31,"nz-form-label",12),p(32,"Id"),r(),o(33,"nz-form-control",3),c(34,"input",13),h(35,ji,1,1,"ng-template",null,14,V),r()()()),n&2){let d=M(15),C=M(22),b=M(29),J=M(36);s(8),m("formGroup",a.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24)("nzErrorTip",d),s(5),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24)("nzErrorTip",C),s(5),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24)("nzErrorTip",b),s(5),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24)("nzErrorTip",J)}},dependencies:[N,X,x,E,R,A,T,$,q,O,H,w,Q,Z,ae,W,I,U,j,B,G,Y,K]});let t=i;return t})();function Oi(t,i){if(t&1){let l=y();o(0,"button",20),z("click",function(){v(l);let n=f();return S(n.onSubmit())}),p(1,"\u4FDD\u5B58"),r()}}function qi(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",21),p(2,"\u65E5\u5FD7\u6587\u4EF6"),r(),o(3,"nz-form-control",3),c(4,"input",22),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function $i(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",23),p(2,"\u6700\u5927\u5C3A\u5BF8 MB"),r(),o(3,"nz-form-control",3),c(4,"input",24),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Hi(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",25),p(2,"\u6700\u5927\u4FDD\u7559\u5929\u6570"),r(),o(3,"nz-form-control",3),c(4,"input",26),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Ui(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",27),p(2,"\u4FDD\u7559\u6570\u91CF\uFF08\u6EDA\u52A8\u5220\u9664\uFF09"),r(),o(3,"nz-form-control",3),c(4,"input",28),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}function Wi(t,i){t&1&&(o(0,"nz-form-item")(1,"nz-form-label",29),p(2,"\u6587\u4EF6\u538B\u7F29"),r(),o(3,"nz-form-control",3),c(4,"nz-switch",30),r()()),t&2&&(s(1),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24))}var Wn=(()=>{let i=class i{constructor(e,n,a,d){this.fb=e,this.route=n,this.rs=a,this.msg=d,this.data={},this.buildFromGroup()}ngOnInit(){this.rs.get("setting/log",{}).subscribe(e=>{},e=>{console.log("err:",e)})}buildFromGroup(){this.formGroup=this.fb.group({level:[this.data.level||"info",[]],caller:[this.data.caller||!0,[]],text:[this.data.text||!0,[]],output:[this.data.output||"stdout",[]],filename:[this.data.filename||"log.txt",[]],max_size:[this.data.max_size||10,[]],max_backups:[this.data.max_backups||3,[]],max_age:[this.data.max_age||30,[]],compress:[this.data.compress||!0,[]]})}onSubmit(){this.rs.post("setting/log",this.formGroup.value).subscribe(e=>{},e=>{console.log("err:",e)})}};i.\u0275fac=function(n){return new(n||i)(u(L),u(P),u(D),u(F))},i.\u0275cmp=g({type:i,selectors:[["app-setting-log"]],standalone:!0,features:[_],decls:43,vars:22,consts:[["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-form","",3,"formGroup"],["nzFor","type",3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],["formControlName","level"],["nzLabel","\u8DDF\u8E2A trace","nzValue","trace"],["nzLabel","\u8C03\u8BD5 debug","nzValue","debug"],["nzLabel","\u4FE1\u606F info","nzValue","info"],["nzLabel","\u8B66\u544A warn","nzValue","warn"],["nzLabel","\u9519\u8BEF error","nzValue","error"],["nzLabel","\u4E25\u91CD fatal","nzValue","fatal"],["nzFor","caller",3,"nzSm","nzXs"],["formControlName","caller"],["nzFor","text",3,"nzSm","nzXs"],["formControlName","text"],["formControlName","output"],["nzLabel","\u6587\u4EF6","nzValue","file"],["nzLabel","\u6807\u51C6\u8F93\u51FA","nzValue","stdout"],["nzLabel","\u6EDA\u52A8\u6587\u4EF6","nzValue","fileRotate"],[4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nzRequired","","nzFor","filename",3,"nzSm","nzXs"],["nz-input","","formControlName","filename"],["nzRequired","","nzFor","max_size",3,"nzSm","nzXs"],["nz-input","","type","number","formControlName","max_size"],["nzRequired","","nzFor","max_backups",3,"nzSm","nzXs"],["nz-input","","type","number","formControlName","max_backups"],["nzRequired","","nzFor","max_age",3,"nzSm","nzXs"],["nz-input","","type","number","formControlName","max_age"],["nzRequired","","nzFor","compress",3,"nzSm","nzXs"],["formControlName","compress"]],template:function(n,a){n&1&&(o(0,"nz-page-header")(1,"nz-page-header-title"),p(2,"\u8BBE\u7F6E"),r(),o(3,"nz-page-header-subtitle"),p(4,"\u7CFB\u7EDF\u65E5\u5FD7"),r(),o(5,"nz-page-header-extra")(6,"nz-space"),h(7,Oi,2,0,"button",0),r()()(),o(8,"form",1)(9,"nz-form-item")(10,"nz-form-label",2),p(11,"\u7B49\u7EA7"),r(),o(12,"nz-form-control",3)(13,"nz-select",4),c(14,"nz-option",5)(15,"nz-option",6)(16,"nz-option",7)(17,"nz-option",8)(18,"nz-option",9)(19,"nz-option",10),r()()(),o(20,"nz-form-item")(21,"nz-form-label",11),p(22,"\u663E\u793A\u51FD\u6570\u8C03\u7528"),r(),o(23,"nz-form-control",3),c(24,"nz-switch",12),r()(),o(25,"nz-form-item")(26,"nz-form-label",13),p(27,"\u4F7F\u7528\u6587\u672C\u683C\u5F0F"),r(),o(28,"nz-form-control",3),c(29,"nz-switch",14),r()(),o(30,"nz-form-item")(31,"nz-form-label",2),p(32,"\u8F93\u51FA\u65B9\u5F0F"),r(),o(33,"nz-form-control",3)(34,"nz-select",15),c(35,"nz-option",16)(36,"nz-option",17)(37,"nz-option",18),r()()(),h(38,qi,5,4,"nz-form-item",19)(39,$i,5,4,"nz-form-item",19)(40,Hi,5,4,"nz-form-item",19)(41,Ui,5,4,"nz-form-item",19)(42,Wi,5,4,"nz-form-item",19),r()),n&2&&(s(8),m("formGroup",a.formGroup),s(2),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(9),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(3),m("nzSm",6)("nzXs",24),s(2),m("nzSm",14)("nzXs",24),s(5),m("ngIf",a.formGroup.controls.output.value!=="stdout"),s(1),m("ngIf",a.formGroup.controls.output.value==="fileRotate"),s(1),m("ngIf",a.formGroup.controls.output.value==="fileRotate"),s(1),m("ngIf",a.formGroup.controls.output.value==="fileRotate"),s(1),m("ngIf",a.formGroup.controls.output.value==="fileRotate"))},dependencies:[N,X,x,ye,E,R,K,A,T,$,q,O,H,w,ce,Q,Z,ae,W,I,re,U,j,B,G,Ue]});let t=i;return t})();var Zn=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=g({type:i,selectors:[["app-setting-backup"]],standalone:!0,features:[_],decls:0,vars:0,template:function(n,a){}});let t=i;return t})();var Kn=(()=>{let i=class i{constructor(){this.currentName="",this.name=""}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=g({type:i,selectors:[["app-rename"]],inputs:{currentName:"currentName"},standalone:!0,features:[_],decls:11,vars:2,consts:[["type","text","nz-input","",3,"ngModel","ngModelChange"]],template:function(n,a){n&1&&(o(0,"table")(1,"tr")(2,"td"),p(3,"\u5F53\u524D\u540D\u79F0\uFF1A"),r(),o(4,"td"),p(5),r()(),o(6,"tr")(7,"td"),p(8,"\u91CD\u547D\u540D\uFF1A"),r(),o(9,"td")(10,"input",0),z("ngModelChange",function(C){return a.name=C}),r()()()()),n&2&&(s(5),de(a.currentName),s(5),m("ngModel",a.name))},dependencies:[be,w,N,x,E,Ce]});let t=i;return t})();var Yn=(()=>{let i=class i{set inputValue(e){this.name=e||""}constructor(e){this.msg=e,this.isSuccess=!1,this.load=new ge,this.isSuccess=!1}handleUpload(e){if(e.type==="error"){this.msg.error("\u4E0A\u4F20\u5931\u8D25");return}if(e.file&&e.file.response){let n=e.file.response;n.error?this.msg.error(`${n.error}`):this.msg.success("\u4E0A\u4F20\u6210\u529F!")}}};i.\u0275fac=function(n){return new(n||i)(u(F))},i.\u0275cmp=g({type:i,selectors:[["app-upload"]],inputs:{inputValue:"inputValue"},outputs:{load:"load"},standalone:!0,features:[_],decls:14,vars:2,consts:[["type","text","nz-input","",3,"ngModel","ngModelChange"],["nzAction","api/attach/upload/",3,"nzShowUploadList","nzChange"],["nz-button",""],["nz-icon","","nzType","upload"]],template:function(n,a){n&1&&(o(0,"table")(1,"tr")(2,"td"),p(3,"\u4E0A\u4F20\u8DEF\u5F84\uFF1A"),r(),o(4,"td")(5,"input",0),z("ngModelChange",function(C){return a.name=C}),r()()(),o(6,"tr")(7,"td"),p(8,"\u4E0A\u4F20\u6587\u4EF6\uFF1A"),r(),o(9,"td")(10,"nz-upload",1),z("nzChange",function(C){return a.handleUpload(C)}),o(11,"button",2),c(12,"i",3),p(13," \u4E0A\u4F20 "),r()()()()()),n&2&&(s(5),m("ngModel",a.name),s(5),m("nzShowUploadList",!1))},dependencies:[N,x,E,Ce,He,xe,be,w],styles:["table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0}"]});let t=i;return t})();var Qi=["imgRef"],Ki=["imagePreviewWrapper"];function Yi(t,i){if(t&1){let l=y();o(0,"li",10),z("click",function(){let a=v(l).$implicit;return S(a.onClick())}),c(1,"span",11),r()}if(t&2){let l=i.$implicit,e=f();De("ant-image-preview-operations-operation-disabled",e.zoomOutDisabled&&l.type==="zoomOut"),s(1),m("nzType",l.icon)}}function Ji(t,i){if(t&1&&c(0,"img",13,14),t&2){let l=f().$implicit,e=f();Ae("width",l.width)("height",l.height)("transform",e.previewImageTransform),yt("src",e.sanitizerResourceUrl(l.src),ue)("srcset",l.srcset)("alt",l.alt)}}function eo(t,i){if(t&1&&(ne(0),h(1,Ji,2,9,"img",12),ie()),t&2){let l=i.index,e=f();s(1),m("ngIf",e.index===l)}}function to(t,i){if(t&1){let l=y();ne(0),o(1,"div",15),z("click",function(n){v(l);let a=f();return S(a.onSwitchLeft(n))}),c(2,"span",16),r(),o(3,"div",17),z("click",function(n){v(l);let a=f();return S(a.onSwitchRight(n))}),c(4,"span",18),r(),ie()}if(t&2){let l=f();s(1),De("ant-image-preview-switch-left-disabled",l.index<=0),s(2),De("ant-image-preview-switch-right-disabled",l.index>=l.images.length-1)}}var no=["*"],Ze={enter:"ant-fade-enter",enterActive:"ant-fade-enter-active",leave:"ant-fade-leave",leaveActive:"ant-fade-leave-active"},io="ant-image-preview-mask",ii="image";function oo(t){let i={};return t.width<=t.clientWidth&&t.height<=t.clientHeight&&(i={x:0,y:0}),(t.width>t.clientWidth||t.height>t.clientHeight)&&(i={x:ni(t.left,t.width,t.clientWidth),y:ni(t.top,t.height,t.clientHeight)}),i}function ro(t){let i=t.getBoundingClientRect(),l=document.documentElement;return{left:i.left+(window.pageXOffset||l.scrollLeft)-(l.clientLeft||document.body.clientLeft||0),top:i.top+(window.pageYOffset||l.scrollTop)-(l.clientTop||document.body.clientTop||0)}}function ao(){let t=document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;return{width:t,height:i}}function ni(t,i,l){let e=t+i,n=(i-l)/2,a=null;return i>l?(t>0&&(a=n),t<0&&e<l&&(a=-n)):(t<0||e>l)&&(a=t<0?n:-n),a}var ke=class{constructor(){this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzMaskClosable=!0,this.nzCloseOnNavigation=!0}},Qe={x:0,y:0},ft=.5,mo=1,so=0,oi=(()=>{let i=class i{get animationDisabled(){return this.config.nzNoAnimation??!1}get maskClosable(){let e=this.nzConfigService.getConfigForComponent(ii)||{};return this.config.nzMaskClosable??e.nzMaskClosable??!0}constructor(e,n,a,d,C,b,J,ht){this.ngZone=e,this.host=n,this.cdr=a,this.nzConfigService=d,this.config=C,this.overlayRef=b,this.destroy$=J,this.sanitizer=ht,this._defaultNzZoom=mo,this._defaultNzScaleStep=ft,this._defaultNzRotate=so,this.images=[],this.index=0,this.isDragging=!1,this.visible=!0,this.animationState="enter",this.animationStateChanged=new ge,this.scaleStepMap=new Map,this.previewImageTransform="",this.previewImageWrapperTransform="",this.operations=[{icon:"close",onClick:()=>{this.onClose()},type:"close"},{icon:"zoom-in",onClick:()=>{this.onZoomIn()},type:"zoomIn"},{icon:"zoom-out",onClick:()=>{this.onZoomOut()},type:"zoomOut"},{icon:"rotate-right",onClick:()=>{this.onRotateRight()},type:"rotateRight"},{icon:"rotate-left",onClick:()=>{this.onRotateLeft()},type:"rotateLeft"}],this.zoomOutDisabled=!1,this.position=ee({},Qe),this.containerClick=new ge,this.closeClick=new ge,this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.updateZoomOutDisabled(),this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{we(this.host.nativeElement,"click").pipe(te(this.destroy$)).subscribe(e=>{e.target===e.currentTarget&&this.maskClosable&&this.containerClick.observers.length&&this.ngZone.run(()=>this.containerClick.emit())}),we(this.imagePreviewWrapper.nativeElement,"mousedown").pipe(te(this.destroy$)).subscribe(()=>{this.isDragging=!0})})}setImages(e,n){n&&(this.scaleStepMap=n),this.images=e,this.cdr.markForCheck()}switchTo(e){this.index=e,this.cdr.markForCheck()}next(){this.index<this.images.length-1&&(this.reset(),this.index++,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}prev(){this.index>0&&(this.reset(),this.index--,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}markForCheck(){this.cdr.markForCheck()}onClose(){this.closeClick.emit()}onZoomIn(){let e=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom+=e,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position=ee({},Qe)}onZoomOut(){if(this.zoom>1){let e=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom-=e,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position=ee({},Qe)}}onRotateRight(){this.rotate+=90,this.updatePreviewImageTransform()}onRotateLeft(){this.rotate-=90,this.updatePreviewImageTransform()}onSwitchLeft(e){e.preventDefault(),e.stopPropagation(),this.prev()}onSwitchRight(e){e.preventDefault(),e.stopPropagation(),this.next()}onAnimationStart(e){e.toState==="enter"?this.setEnterAnimationClass():e.toState==="leave"&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(e)}onAnimationDone(e){e.toState==="enter"?this.setEnterAnimationClass():e.toState==="leave"&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(e)}startLeaveAnimation(){this.animationState="leave",this.cdr.markForCheck()}onDragReleased(){this.isDragging=!1;let e=this.imageRef.nativeElement.offsetWidth*this.zoom,n=this.imageRef.nativeElement.offsetHeight*this.zoom,{left:a,top:d}=ro(this.imageRef.nativeElement),{width:C,height:b}=ao(),J=this.rotate%180!==0,Ke=oo({width:J?n:e,height:J?e:n,left:a,top:d,clientWidth:C,clientHeight:b});(rt(Ke.x)||rt(Ke.y))&&(this.position=ee(ee({},this.position),Ke))}sanitizerResourceUrl(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}updatePreviewImageTransform(){this.previewImageTransform=`scale3d(${this.zoom}, ${this.zoom}, 1) rotate(${this.rotate}deg)`}updatePreviewImageWrapperTransform(){this.previewImageWrapperTransform=`translate3d(${this.position.x}px, ${this.position.y}px, 0)`}updateZoomOutDisabled(){this.zoomOutDisabled=this.zoom<=1}setEnterAnimationClass(){if(this.animationDisabled)return;let e=this.overlayRef.backdropElement;e&&(e.classList.add(Ze.enter),e.classList.add(Ze.enterActive))}setLeaveAnimationClass(){if(this.animationDisabled)return;let e=this.overlayRef.backdropElement;e&&(e.classList.add(Ze.leave),e.classList.add(Ze.leaveActive))}reset(){this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.position=ee({},Qe)}};i.\u0275fac=function(n){return new(n||i)(u(Ct),u(Je),u(et),u(Xe),u(ke),u(Ge),u(Re),u(Rt))},i.\u0275cmp=g({type:i,selectors:[["nz-image-preview"]],viewQuery:function(n,a){if(n&1&&(nt(Qi,5),nt(Ki,7)),n&2){let d;tt(d=it())&&(a.imageRef=d.first),tt(d=it())&&(a.imagePreviewWrapper=d.first)}},hostAttrs:["tabindex","-1","role","document",1,"ant-image-preview-wrap"],hostVars:6,hostBindings:function(n,a){n&1&&Et("@fadeMotion.start",function(C){return a.onAnimationStart(C)})("@fadeMotion.done",function(C){return a.onAnimationDone(C)}),n&2&&(xt("@.disabled",a.config.nzNoAnimation)("@fadeMotion",a.animationState),Ae("z-index",a.config.nzZIndex),De("ant-image-preview-moving",a.isDragging))},exportAs:["nzImagePreview"],standalone:!0,features:[Ft([Re]),_],decls:11,vars:6,consts:[[1,"ant-image-preview"],["tabindex","0","aria-hidden","true",2,"width","0","height","0","overflow","hidden","outline","none"],[1,"ant-image-preview-content"],[1,"ant-image-preview-body"],[1,"ant-image-preview-operations"],["class","ant-image-preview-operations-operation",3,"ant-image-preview-operations-operation-disabled","click",4,"ngFor","ngForOf"],["cdkDrag","",1,"ant-image-preview-img-wrapper",3,"cdkDragFreeDragPosition","cdkDragReleased"],["imagePreviewWrapper",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ant-image-preview-operations-operation",3,"click"],["nz-icon","","nzTheme","outline",1,"ant-image-preview-operations-icon",3,"nzType"],["cdkDragHandle","","class","ant-image-preview-img",3,"width","height","transform",4,"ngIf"],["cdkDragHandle","",1,"ant-image-preview-img"],["imgRef",""],[1,"ant-image-preview-switch-left",3,"click"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"ant-image-preview-switch-right",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"]],template:function(n,a){n&1&&(o(0,"div",0),c(1,"div",1),o(2,"div",2)(3,"div",3)(4,"ul",4),h(5,Yi,2,3,"li",5),r(),o(6,"div",6,7),z("cdkDragReleased",function(){return a.onDragReleased()}),h(8,eo,2,1,"ng-container",8),r(),h(9,to,5,4,"ng-container",9),r()(),c(10,"div",1),r()),n&2&&(s(5),m("ngForOf",a.operations),s(1),Ae("transform",a.previewImageWrapperTransform),m("cdkDragFreeDragPosition",a.position),s(2),m("ngForOf",a.images),s(1),m("ngIf",a.images.length>1))},dependencies:[Se,Be,oe,Sn,_n,K],encapsulation:2,data:{animation:[Gt]},changeDetection:0});let t=i;return t})(),zt=class{constructor(i,l,e){this.previewInstance=i,this.config=l,this.overlayRef=e,this.destroy$=new Ee,e.keydownEvents().pipe(Ye(n=>this.config.nzKeyboard&&(n.keyCode===27||n.keyCode===37||n.keyCode===39)&&!jt(n))).subscribe(n=>{n.preventDefault(),n.keyCode===27&&this.close(),n.keyCode===37&&this.prev(),n.keyCode===39&&this.next()}),e.detachments().subscribe(()=>{this.overlayRef.dispose()}),i.containerClick.pipe(Me(1),te(this.destroy$)).subscribe(()=>{this.close()}),i.closeClick.pipe(Me(1),te(this.destroy$)).subscribe(()=>{this.close()}),i.animationStateChanged.pipe(Ye(n=>n.phaseName==="done"&&n.toState==="leave"),Me(1)).subscribe(()=>{this.dispose()})}switchTo(i){this.previewInstance.switchTo(i)}next(){this.previewInstance.next()}prev(){this.previewInstance.prev()}close(){this.previewInstance.startLeaveAnimation()}dispose(){this.destroy$.next(),this.overlayRef.dispose()}},ri=(()=>{let i=class i{constructor(e,n,a,d){this.overlay=e,this.injector=n,this.nzConfigService=a,this.directionality=d}preview(e,n,a){return this.display(e,n,a)}display(e,n,a){let d=ee(ee({},new ke),n??{}),C=this.createOverlay(d),b=this.attachPreviewComponent(C,d);b.setImages(e,a);let J=new zt(b,d,C);return b.previewRef=J,J}attachPreviewComponent(e,n){let a=Pe.create({parent:this.injector,providers:[{provide:Ge,useValue:e},{provide:ke,useValue:n}]}),d=new Lt(oi,null,a);return e.attach(d).instance}createOverlay(e){let n=this.nzConfigService.getConfigForComponent(ii)||{},a=new Ot({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:e.nzCloseOnNavigation??n.nzCloseOnNavigation??!0,backdropClass:io,direction:e.nzDirection||n.nzDirection||this.directionality.value});return this.overlay.create(a)}};i.\u0275fac=function(n){return new(n||i)(Fe(qt),Fe(Pe),Fe(Xe),Fe(at,8))},i.\u0275prov=vt({token:i,factory:i.\u0275fac});let t=i;return t})(),lo=(()=>{let i=class i{constructor(){this.nzScaleStep=null,this.images=[]}addImage(e){this.images.push(e)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=g({type:i,selectors:[["nz-image-group"]],inputs:{nzScaleStep:"nzScaleStep"},exportAs:["nzImageGroup"],standalone:!0,features:[_],ngContentSelectors:no,decls:1,vars:0,template:function(n,a){n&1&&(Nt(),wt(0))},encapsulation:2,changeDetection:0});let t=i;return t})(),po="image",ai=(()=>{let i=class i{get previewable(){return!this.nzDisablePreview&&this.status!=="error"}constructor(e,n,a,d,C,b,J){this.document=e,this.nzConfigService=n,this.elementRef=a,this.nzImageService=d,this.cdr=C,this.parentGroup=b,this.directionality=J,this._nzModuleName=po,this.nzSrc="",this.nzSrcset="",this.nzDisablePreview=!1,this.nzFallback=null,this.nzPlaceholder=null,this.nzScaleStep=null,this.status="normal",this.backLoadDestroy$=new Ee,this.destroy$=new Ee}ngOnInit(){this.backLoad(),this.parentGroup&&this.parentGroup.addImage(this),this.directionality&&(this.directionality.change?.pipe(te(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreview(){if(this.previewable)if(this.parentGroup){let e=this.parentGroup.images.filter(b=>b.previewable),n=e.map(b=>({src:b.nzSrc,srcset:b.nzSrcset})),a=e.findIndex(b=>this===b),d=new Map;e.forEach(b=>{d.set(b.nzSrc??b.nzSrcset,b.nzScaleStep??this.parentGroup.nzScaleStep??this.nzScaleStep??ft)}),this.nzImageService.preview(n,{nzDirection:this.dir},d).switchTo(a)}else{let e=[{src:this.nzSrc,srcset:this.nzSrcset}];this.nzImageService.preview(e,{nzDirection:this.dir,nzScaleStep:this.nzScaleStep??ft})}}getElement(){return this.elementRef}ngOnChanges(e){let{nzSrc:n}=e;n&&(this.getElement().nativeElement.src=n.currentValue,this.backLoad())}backLoad(){this.backLoadImage=this.document.createElement("img"),this.backLoadImage.src=this.nzSrc,this.backLoadImage.srcset=this.nzSrcset,this.status="loading",this.backLoadDestroy$.next(),this.backLoadDestroy$.complete(),this.backLoadDestroy$=new Ee,this.backLoadImage.complete?(this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset):(this.nzPlaceholder?(this.getElement().nativeElement.src=this.nzPlaceholder,this.getElement().nativeElement.srcset=""):(this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset),we(this.backLoadImage,"load").pipe(te(this.backLoadDestroy$),te(this.destroy$)).subscribe(()=>{this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset}),we(this.backLoadImage,"error").pipe(te(this.backLoadDestroy$),te(this.destroy$)).subscribe(()=>{this.status="error",this.nzFallback&&(this.getElement().nativeElement.src=this.nzFallback,this.getElement().nativeElement.srcset="")}))}};i.\u0275fac=function(n){return new(n||i)(u(kt),u(Xe),u(Je),u(ri),u(et),u(lo,8),u(at,8))},i.\u0275dir=St({type:i,selectors:[["img","nz-image",""]],hostBindings:function(n,a){n&1&&z("click",function(){return a.onPreview()})},inputs:{nzSrc:"nzSrc",nzSrcset:"nzSrcset",nzDisablePreview:"nzDisablePreview",nzFallback:"nzFallback",nzPlaceholder:"nzPlaceholder",nzScaleStep:"nzScaleStep"},exportAs:["nzImage"],standalone:!0,features:[_t]});let t=i;return Ne([Bt(),Te()],t.prototype,"nzDisablePreview",void 0),Ne([Te()],t.prototype,"nzFallback",void 0),Ne([Te()],t.prototype,"nzPlaceholder",void 0),Ne([Te()],t.prototype,"nzScaleStep",void 0),t})(),mi=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=he({type:i}),i.\u0275inj=ze({providers:[ri],imports:[oi]});let t=i;return t})();function uo(t,i){if(t&1){let l=y();o(0,"nz-input-group",12)(1,"input",13),z("ngModelChange",function(n){v(l);let a=f();return S(a.queryName=n)}),r()()}if(t&2){let l=f(),e=M(3);m("nzAddOnAfter",e),s(1),m("ngModel",l.queryName)}}function fo(t,i){if(t&1){let l=y();o(0,"button",14),z("click",function(){v(l);let n=f();return S(n.search())}),p(1,"\u8DF3\u8F6C"),r()}}function zo(t,i){if(t&1){let l=y();o(0,"button",15),z("click",function(){v(l);let n=f();return S(n.handleUpload())}),c(1,"i",16),p(2,"\u4E0A\u4F20 "),r()}}function ho(t,i){if(t&1){let l=y();o(0,"button",15),z("click",function(){v(l);let n=f();return S(n.load())}),c(1,"i",17),p(2," \u5237\u65B0 "),r()}if(t&2){let l=f();s(1),m("nzSpin",l.loading)}}function go(t,i){if(t&1){let l=y();o(0,"button",19),z("click",function(){v(l);let n=f(2);return S(n.handlePre())}),c(1,"span",20),p(2," \u8FD4\u56DE\u4E0A\u4E00\u7EA7\u76EE\u5F55 "),r()}}function vo(t,i){t&1&&(ne(0),h(1,go,3,0,"button",18),ie())}function So(t,i){if(t&1&&p(0),t&2){let l=i.$implicit;pe("\u603B\u5171 ",l," \u6761")}}function _o(t,i){t&1&&c(0,"img",29)}function Co(t,i){if(t&1&&c(0,"img",34),t&2){let l=f(2).$implicit,e=f();m("nzSrc",e.handleSrc(l.name))}}function yo(t,i){if(t&1){let l=y();o(0,"video",35),z("click",function(){v(l);let n=f(2).$implicit,a=f();return S(a.handleOpenLink(n.name))}),r()}if(t&2){let l=f(2).$implicit,e=f();m("src",e.handleSrc(l.name),ue)}}function bo(t,i){if(t&1){let l=y();o(0,"img",35),z("click",function(){v(l);let n=f(2).$implicit,a=f();return S(a.handleOpenLink(n.name))}),r()}if(t&2){let l=f(2).$implicit,e=f();m("src","/assets/attach_icon/"+e.getMatched(l.mime)+".svg",ue)}}function xo(t,i){if(t&1&&(o(0,"div",30),h(1,Co,1,1,"img",31)(2,yo,1,1,"video",32)(3,bo,1,1,"img",33),r()),t&2){let l=f().$implicit,e=f();m("ngSwitch",e.getMatched(l.mime)),s(1),m("ngSwitchCase","image"),s(1),m("ngSwitchCase","video")}}function Eo(t,i){if(t&1){let l=y();o(0,"span")(1,"a",36),z("click",function(){v(l);let n=f().$implicit,a=f();return S(a.handleRedictTo(n.name))}),p(2),r()()}if(t&2){let l=f().$implicit;s(2),de(l.name)}}function No(t,i){if(t&1&&p(0),t&2){let l=f().$implicit;de(l.name)}}function wo(t,i){if(t&1){let l=y();c(0,"nz-divider",26),o(1,"a",27),z("click",function(){v(l);let n=f().$implicit,a=f();return S(a.handleCopy(n.name))}),p(2," \u590D\u5236\u94FE\u63A5 "),r(),c(3,"nz-divider",26),o(4,"a",27),z("click",function(){v(l);let n=f().$implicit,a=f();return S(a.handleDownLoad(n.name))}),p(5," \u4E0B\u8F7D "),r()}}function Fo(t,i){if(t&1){let l=y();c(0,"nz-divider",26),o(1,"a",27),z("click",function(){v(l);let n=f().$implicit,a=f();return S(a.handleSelect(n.name))}),p(2," \u9009\u62E9"),r()}}function Do(t,i){if(t&1){let l=y();o(0,"tr")(1,"td"),h(2,_o,1,0,"img",21)(3,xo,4,3,"ng-template",null,22,V),r(),o(5,"td"),h(6,Eo,3,1,"span",23)(7,No,1,1,"ng-template",null,24,V),r(),o(9,"td"),p(10),r(),o(11,"td"),p(12),It(13,"date"),r(),o(14,"td")(15,"a",25),z("nzOnConfirm",function(){let a=v(l).$implicit,d=f();return S(d.delete(a.name))})("nzOnCancel",function(){v(l);let n=f();return S(n.cancel())}),p(16," \u5220\u9664 "),r(),c(17,"nz-divider",26),o(18,"a",27),z("click",function(){let a=v(l).$implicit,d=f();return S(d.handleRename(a.name))}),p(19," \u91CD\u547D\u540D "),r(),h(20,wo,6,0,"ng-template",28)(21,Fo,3,0,"ng-template",28),r()()}if(t&2){let l=i.$implicit,e=M(4),n=M(8),a=f();s(2),m("ngIf",l.folder)("ngIfElse",e),s(4),m("ngIf",l.folder)("ngIfElse",n),s(4),de(l.mime||"\u6587\u4EF6\u5939"),s(2),de(Tt(13,8,l.time)),s(8),m("ngIf",!l.folder),s(1),m("ngIf",!l.folder&&a.fromIframe)}}var si=(()=>{let i=class i{constructor(e,n,a,d){this.rs=e,this.modal=n,this.msg=a,this.viewContainerRef=d,this.loading=!1,this.inputValue="",this.queryName="",this.datum=[],this.total=1,this.pageSize=20,this.pageIndex=1,this.query={},this.fromIframe=!0,this.load()}load(){this.loading=!0,this.rs.get("attach/list",{}).subscribe(e=>{let{data:n,total:a}=e;this.datum=n||[],this.total=a||0}).add(()=>{this.loading=!1})}delete(e,n){this.rs.get(`attach/remove/${this.queryName}/${e}`).subscribe(a=>{this.msg.success("\u5220\u9664\u6210\u529F"),this.load()})}cancel(){}search(){this.query.keyword={},this.query.skip=0,this.datum=[],this.inputValue=this.queryName,this.load()}handleRedictTo(e){this.queryName=this.queryName?`${this.queryName}/${e}`:e,this.search()}handleUpload(){this.modal.create({nzTitle:"\u4E0A\u4F20\u6587\u4EF6",nzContent:Yn,nzViewContainerRef:this.viewContainerRef,nzData:{inputValue:this.queryName},nzFooter:null,nzOnCancel:({isSuccess:e})=>{e&&this.load()}})}handleRename(e){let n=this.modal.create({nzTitle:"\u91CD\u547D\u540D",nzContent:Kn,nzData:{currentName:e},nzViewContainerRef:this.viewContainerRef,nzFooter:[{label:"\u53D6\u6D88",onClick:()=>n.destroy()},{label:"\u4FDD\u5B58",type:"primary",onClick:()=>{let a=n.getContentComponent();this.rs.post(`attach/rename/${this.queryName?this.queryName+"/":""}${e}`,{name:a.name}).subscribe(d=>{this.msg.success("\u4FDD\u5B58\u6210\u529F"),n.destroy(),this.load()})}}]})}handleSrc(e){return`/attach/${this.inputValue?`${this.inputValue}/`:""}${e}`}handleOpenLink(e){window.open(this.handleSrc(e))}getMatched(e){let n=e.match(/image|video|word|powerpoint|excel|text|zip|pdf|html|flash|exe|xml|psd/g);return n?n[0]:"unknown"}handleCopy(e){let n=this.handleSrc(e);this.msg.success("\u590D\u5236\u6210\u529F");let a=document.createElement("input");a.value=n,a.setAttribute("readonly",""),document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}handlePre(){let e=this.queryName.split("/");e.pop(),this.queryName=e.join("/"),this.search()}handleDownLoad(e){let n=document.createElement("a"),a=new MouseEvent("click");n.download=e,n.href=this.handleSrc(e),n.dispatchEvent(a)}handleSelect(e){let n=this.handleSrc(e);console.log("\u{1F680} ~ file: attachment.component.ts:145 ~ AttachmentComponent ~ handleSelect ~ url:",n),window.top?.postMessage(n)}};i.\u0275fac=function(n){return new(n||i)(u(D),u(je),u(F),u(bt))},i.\u0275cmp=g({type:i,selectors:[["app-setting-attach"]],standalone:!0,features:[_],decls:25,vars:9,consts:[["nzSearch","",3,"nzAddOnAfter",4,"nzSpaceItem"],["suffixButton",""],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],[4,"ngIf"],["totalTemplate",""],["nzShowPagination","","nzShowSizeChanger","",3,"nzData","nzLoading","nzTotal","nzShowTotal","nzPageSize","nzPageIndex"],["basicTable",""],["nzColumnKey","pre"],["nzColumnKey","name"],["nzColumnKey","mime"],["nzColumnKey","time",3,"nzSortFn"],[4,"ngFor","ngForOf"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","","placeholder","\u5F53\u524D\u6240\u5904\u6587\u4EF6\u5939",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],["nz-icon","","nzType","reload",3,"nzSpin"],["nz-button","",3,"click",4,"nzSpaceItem"],["nz-button","",3,"click"],["nz-icon","","nzType","rollback","nzTheme","outline"],["width","40px","src","/assets/fold.svg","alt","logo",4,"ngIf","ngIfElse"],["tpw",""],[4,"ngIf","ngIfElse"],["tpl",""],["nz-popconfirm","","nzPopconfirmTitle","\u786E\u5B9A\u5220\u9664?","nzPopconfirmPlacement","topLeft",3,"nzOnConfirm","nzOnCancel"],["nzType","vertical"],[3,"click"],[3,"ngIf"],["width","40px","src","/assets/fold.svg","alt","logo"],[3,"ngSwitch"],["nz-image","","width","50px",3,"nzSrc",4,"ngSwitchCase"],["width","50px",3,"src","click",4,"ngSwitchCase"],["width","50px",3,"src","click",4,"ngSwitchDefault"],["nz-image","","width","50px",3,"nzSrc"],["width","50px",3,"src","click"],["href","javascript:;",3,"click"]],template:function(n,a){if(n&1&&(o(0,"nz-space"),h(1,uo,2,2,"nz-input-group",0)(2,fo,2,0,"ng-template",null,1,V)(4,zo,3,0,"button",2)(5,ho,3,1,"button",2)(6,vo,2,0,"ng-container",3),r(),h(7,So,1,1,"ng-template",null,4,V),o(9,"nz-table",5,6)(11,"thead")(12,"tr")(13,"th",7),p(14,"\u9884\u89C8"),r(),o(15,"th",8),p(16,"\u540D\u79F0"),r(),o(17,"th",9),p(18,"\u7C7B\u578B"),r(),o(19,"th",10),p(20,"\u65E5\u671F"),r(),o(21,"th"),p(22,"\u64CD\u4F5C"),r()()(),o(23,"tbody"),h(24,Do,22,10,"tr",11),r()()),n&2){let d=M(8),C=M(10);s(6),m("ngIf",a.inputValue),s(3),m("nzData",a.datum)("nzLoading",a.loading)("nzTotal",a.total)("nzShowTotal",d)("nzPageSize",a.pageSize)("nzPageIndex",a.pageIndex),s(10),m("nzSortFn",!0),s(5),m("ngForOf",C.data)}},dependencies:[mi,ai,on,qe,Oe,Zt,A,Ut,Wt,_e,Se,K,Mt,Pt,At,Vt,Be,oe,tn,dn,ln,mn,an,sn,un,pn,cn,He,Fn,wn,N,x,E,Ce,We,be,w,$t,rn,U,Y]});let t=i;return t})();var Io=[{path:"",pathMatch:"full",redirectTo:"dash"},{path:"dash",component:Gn},{path:"product",component:gn},{path:"product/create",component:mt},{path:"product/:id",component:vn},{path:"product/:id/edit",component:mt},{path:"product/:id/edit/property",component:Cn},{path:"product/:id/edit/event",component:yn},{path:"product/:id/edit/action",component:bn},{path:"device",component:xn},{path:"device/create",component:st},{path:"device/:id",component:Dn},{path:"device/:id/edit",component:st},{path:"gateway",component:En},{path:"gateway/create",component:lt},{path:"gateway/:id",component:In},{path:"gateway/:id/edit",component:lt},{path:"project",component:Nn},{path:"project/create",component:pt},{path:"project/:id",component:Mn},{path:"project/:id/edit",component:pt},{path:"project/:id/user",component:Rn},{path:"space",component:Pn},{path:"space/create",component:ct},{path:"space/:id",component:An},{path:"space/:id/edit",component:ct},{path:"space/:id/device",component:Xn},{path:"plugin",component:Ln},{path:"plugin/create",component:ut},{path:"plugin/:id",component:jn},{path:"plugin/:id/edit",component:ut},{path:"user",component:Vn},{path:"user/create",component:dt},{path:"user/:id",component:On},{path:"user/:id/edit",component:dt},{path:"setting/web",component:qn},{path:"setting/database",component:$n},{path:"setting/broker",component:Hn},{path:"setting/mqtt",component:Un},{path:"setting/log",component:Wn},{path:"setting/backup",component:Zn},{path:"setting/attach",component:si},{path:"web",component:nn},{path:"alarm",component:fn},{path:"**",component:en}],li=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=he({type:i}),i.\u0275inj=ze({imports:[ot.forChild(Io),ot]});let t=i;return t})();var xs=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=he({type:i}),i.\u0275inj=ze({imports:[_e,li,Oe]});let t=i;return t})();export{xs as AdminModule};
