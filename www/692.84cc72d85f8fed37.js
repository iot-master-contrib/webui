(self.webpackChunkwebui=self.webpackChunkwebui||[]).push([[692],{3597:(H,L,n)=>{"use strict";n.d(L,{d:()=>m});var t=n(4438),O=n(4341),d=n(1011),S=n(513),r=n(9635),_=n(3053),M=n(5222);let m=(()=>{class h{constructor(s,T){this.ms=s,this.rs=T,this.id="",this.project={},this.placeholder="",this.disabled=!1}ngOnInit(){}registerOnChange(s){this.onChange=s}registerOnTouched(s){}writeValue(s){this.id!==s&&(this.id=s,this.id&&this.load())}setDisabledState(s){this.disabled=s}load(){console.log("load project",this.id),this.rs.get("project/"+this.id).subscribe(s=>{s.data&&(this.project=s.data)})}select(){this.ms.create({nzTitle:"\u9009\u62e9",nzContent:r.E}).afterClose.subscribe(s=>{console.log(s),s&&(this.project=s,this.id=s.id,this.onChange(this.id))})}change(s){console.log("on change",s),this.id=s,this.onChange(s),this.load()}static#t=this.\u0275fac=function(T){return new(T||h)(t.rXU(_.N_),t.rXU(M.By))};static#e=this.\u0275cmp=t.VBU({type:h,selectors:[["app-input-project"]],inputs:{placeholder:"placeholder"},standalone:!0,features:[t.Jv_([{provide:O.kq,useExisting:(0,t.Rfq)(()=>h),multi:!0}]),t.aNF],decls:5,vars:5,consts:[["box",""],["nz-input","",3,"change","placeholder","value","disabled"],["type","button","nz-button","",3,"click","disabled"]],template:function(T,l){if(1&T){const P=t.RV6();t.j41(0,"input",1,0),t.bIt("change",function(){t.eBV(P);const F=t.sdS(1);return t.Njj(l.change(F.value))}),t.k0s(),t.j41(2,"button",2),t.bIt("click",function(){return t.eBV(P),t.Njj(l.select())}),t.EFF(3,"\u9009\u62e9"),t.k0s(),t.EFF(4)}2&T&&(t.Y8G("placeholder",l.placeholder)("value",l.id)("disabled",l.disabled),t.R7$(2),t.Y8G("disabled",l.disabled),t.R7$(2),t.SpI("\n",l.project.name,"\n"))},dependencies:[d.Sy,S.aO]})}return h})()},3075:(H,L,n)=>{"use strict";n.d(L,{L:()=>P});var t=n(9635),O=n(8238),d=n(4658),S=n(9233),r=n(2582),_=n(4116),M=n(6629),m=n(5090),h=n(4438),u=n(345),s=n(6530),T=n(3053);const l=["iframe"];let P=(()=>{class E{set url(j){this.src=this.ds.bypassSecurityTrustResourceUrl(j),console.log("iframe url",j)}onMessage(j){let U;const i=JSON.parse(j);switch(i.type){case"select_product":U=this.ms.create({nzTitle:"\u9009\u62e9\u4ea7\u54c1",nzContent:S.q,nzData:i.data});break;case"select_gateway":U=this.ms.create({nzTitle:"\u9009\u62e9\u7f51\u5173",nzContent:O.V,nzData:i.data});break;case"select_device":U=this.ms.create({nzTitle:"\u9009\u62e9\u8bbe\u5907",nzContent:d.D,nzData:i.data});break;case"select_project":U=this.ms.create({nzTitle:"\u9009\u62e9\u9879\u76ee",nzContent:t.E,nzData:i.data});break;case"select_project_user":U=this.ms.create({nzTitle:"\u9009\u62e9\u9879\u76ee\u7528\u6237",nzContent:M.m,nzData:i.data});break;case"select_space":U=this.ms.create({nzTitle:"\u9009\u62e9\u7a7a\u95f4",nzContent:r.V,nzData:i.data});break;case"select_space_device":U=this.ms.create({nzTitle:"\u9009\u62e9\u7a7a\u95f4\u8bbe\u5907",nzContent:m.q,nzData:i.data});break;case"select_user":U=this.ms.create({nzTitle:"\u9009\u62e9\u7528\u6237",nzContent:_.C,nzData:i.data});break;default:return}U.afterClose.subscribe(X=>{if(X){let x=JSON.stringify({type:i.type,data:X});this.iframe.nativeElement.postMessage(x)}})}constructor(j,U,i){this.ds=j,this.route=U,this.ms=i}ngOnInit(){this.route.queryParams.subscribe(j=>{j.hasOwnProperty("url")&&(this.url=j.url)})}ngOnDestroy(){}onLoad(){try{const j=this.iframe.nativeElement;j.height=`${(j.contentDocument||j.contentWindow.document).body.scrollHeight}px`,console.log("iframe onload",j.height)}catch(j){console.log("iframe onload",j)}}static#t=this.\u0275fac=function(U){return new(U||E)(h.rXU(u.up),h.rXU(s.nX),h.rXU(T.N_))};static#e=this.\u0275cmp=h.VBU({type:E,selectors:[["app-web-view"]],viewQuery:function(U,i){if(1&U&&h.GBs(l,5),2&U){let X;h.mGM(X=h.lsd())&&(i.iframe=X.first)}},hostBindings:function(U,i){1&U&&h.bIt("message",function(x){return i.onMessage(x)},!1,h.tSv)},inputs:{url:"url"},standalone:!0,features:[h.aNF],decls:2,vars:1,consts:[["iframe",""],[3,"load","src"]],template:function(U,i){if(1&U){const X=h.RV6();h.j41(0,"iframe",1,0),h.bIt("load",function(){return h.eBV(X),h.Njj(i.onLoad())}),h.k0s()}2&U&&h.Y8G("src",i.src,h.f$h)},styles:["[_nghost-%COMP%]{width:100%;height:100%}iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}"]})}return E})()},7203:(H,L,n)=>{"use strict";n.d(L,{l:()=>_});var t=n(5222),O=n(5506),d=n(4438),S=n(6530);const r=()=>[];let _=(()=>{class M{constructor(h,u){this.route=h,this.rs=u,this.base="/admin",this.total=0,this.datum=[],this.loading=!1,this.columns=[{key:"project",sortable:!0,label:"\u9879\u76ee",keyword:!0,link:s=>`${this.base}/project/${s.project_id}`},{key:"device",sortable:!0,label:"\u9879\u76ee",keyword:!0,link:s=>`${this.base}/device/${s.device_id}`},{key:"level",sortable:!0,label:"\u7b49\u7ea7",keyword:!0},{key:"title",sortable:!0,label:"\u6807\u9898",keyword:!0},{key:"message",sortable:!0,label:"\u5185\u5bb9",keyword:!0},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.operators=[{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:s=>{this.rs.get(`alarm/${s.id}/delete`).subscribe(T=>this.refresh())}}]}ngOnInit(){this.base=(0,O.X1)(this.route),this.project_id||=(0,O.pS)(this.route,"project")}refresh(){this.search(this.query)}search(h){this.project_id&&(h.filter.project_id=this.project_id),this.device_id&&(h.filter.tunnel_id=this.device_id),this.loading=!0,this.rs.post("alarm/search",h).subscribe(u=>{this.datum=u.data,this.total=u.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(u){return new(u||M)(d.rXU(S.nX),d.rXU(t.By))};static#e=this.\u0275cmp=d.VBU({type:M,selectors:[["app-alarm"]],inputs:{project_id:"project_id",device_id:"device_id"},standalone:!0,features:[d.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(u,s){1&u&&(d.j41(0,"im-smart-table",0),d.bIt("query",function(l){return s.search(l)}),d.k0s()),2&u&&d.Y8G("buttons",d.lJ4(6,r))("columns",s.columns)("operators",s.operators)("datum",s.datum)("total",s.total)("loading",s.loading)},dependencies:[t.B2],styles:[".toolbar[_ngcontent-%COMP%]{padding:10px 0;display:flex}.toolbar[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{flex:1}.pages[_ngcontent-%COMP%]{padding:10px 0;display:flex;justify-content:center}"]})}return M})()},5123:(H,L,n)=>{"use strict";n.d(L,{y:()=>r});var t=n(5222),O=n(4438),d=n(3053);const S=()=>[];let r=(()=>{class _{constructor(m,h){this.rs=m,this.ref=h,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/client/create"}],this.columns=[{key:"id",label:"ID",sortable:!0,keyword:!0,link:u=>`/admin/client/${u.id}`},{key:"name",label:"\u540d\u79f0",sortable:!0,keyword:!0},{key:"net",label:"\u7f51\u7edc",sortable:!0,keyword:!0},{key:"addr",label:"\u5730\u5740",sortable:!0,keyword:!0},{key:"port",label:"\u7aef\u53e3",sortable:!0,keyword:!0},{key:"status",label:"\u72b6\u6001"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",sortable:!0,date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0},{key:"net",label:"\u7f51\u7edc",keyword:!0},{key:"addr",label:"\u5730\u5740",keyword:!0},{key:"port",label:"\u7aef\u53e3",keyword:!0},{key:"status",label:"\u72b6\u6001"}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:u=>`/admin/client/${u.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:u=>{this.rs.get(`client/${u.id}/delete`).subscribe(s=>this.refresh())}},{icon:"play-circle",title:"\u542f\u52a8",action:u=>{this.rs.get(`client/${u.id}/open`).subscribe(s=>this.refresh())}},{icon:"close-circle",title:"\u505c\u6b62",action:u=>{this.rs.get(`client/${u.id}/close`).subscribe(s=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:u=>this.ref.close(u)}]}refresh(){this.search(this.query)}search(m){this.query=m,this.loading=!0,this.rs.post("client/search",m).subscribe(h=>{this.datum=h.data,this.total=h.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(h){return new(h||_)(O.rXU(t.By),O.rXU(d.J9,8))};static#e=this.\u0275cmp=O.VBU({type:_,selectors:[["app-clients"]],standalone:!0,features:[O.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(h,u){1&h&&(O.j41(0,"im-smart-table",0),O.bIt("query",function(T){return u.search(T)}),O.k0s()),2&h&&O.Y8G("buttons",u.ref?O.lJ4(6,S):u.buttons)("columns",u.ref?u.columnsSelect:u.columns)("operators",u.ref?u.operatorsSelect:u.operators)("datum",u.datum)("total",u.total)("loading",u.loading)},dependencies:[t.B2]})}return _})()},5578:(H,L,n)=>{"use strict";n.d(L,{l:()=>V});var t=n(7685),O=n(513),d=n(177),S=n(6530),r=n(2874),_=n(5222),M=n(5703),m=n(9541),h=n(5197),u=n(2820),s=n(4341),T=n(7374),l=n.n(T),P=n(8927),E=n(1997),F=n(2047),j=n(8960),U=n(7481),i=n(4438),X=n(7094),x=n(7529);const K=()=>[10,10],C=p=>({active:p});function R(p,k){if(1&p){const b=i.RV6();i.j41(0,"nz-switch",18),i.bIt("ngModelChange",function(W){i.eBV(b);const G=i.XpG().$implicit,q=i.XpG();return i.Njj(q.valueSwitch(G.name,W))}),i.k0s()}if(2&p){const b=i.XpG().$implicit,I=i.XpG();i.Y8G("ngModel",I.values[b.name])}}function A(p,k){if(1&p){const b=i.RV6();i.j41(0,"nz-col",14)(1,"div",15)(2,"nz-statistic",16),i.bIt("click",function(){const W=i.eBV(b).$implicit,G=i.XpG();return G.actives[W.name]=!G.actives[W.name],i.Njj(G.search())}),i.k0s(),i.DNE(3,R,1,1,"nz-switch",17),i.k0s()()}if(2&p){const b=k.$implicit,I=i.XpG();i.Y8G("nzXs",12)("nzSm",8)("nzMd",6)("nzLg",4)("nzXl",3)("nzXXl",2),i.R7$(),i.Y8G("ngClass",i.eq3(11,C,I.actives[b.name])),i.R7$(),i.Y8G("nzTitle",b.label)("nzValue",I.values[b.name]||"-")("nzSuffix",b.unit),i.R7$(),i.Y8G("ngIf","bool"==b.type&&"rw"==b.mode)}}function Y(p,k){if(1&p){const b=i.RV6();i.j41(0,"nz-select",19),i.bIt("nzOpenChange",function(){i.eBV(b);const W=i.XpG();return i.Njj(W.search())})("change",function(){i.eBV(b);const W=i.XpG();return i.Njj(W.search())}),i.nrm(1,"nz-option",20)(2,"nz-option",21)(3,"nz-option",22),i.k0s()}}let z=(()=>{class p{constructor(b,I,W,G,q){this.router=b,this.msg=I,this.fb=W,this.rs=G,this.route=q,this.base="/admin",this.data={},this.properties=[],this.values={},this.actives={},this.names={},this.loading=!1,this.query={},this.option={tooltip:{trigger:"axis",position:function(et){return[et[0],"10%"]}},title:{left:"center",text:"\u5386\u53f2\u66f2\u7ebf"},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"time",boundaryGap:!1},yAxis:{type:"value"},dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}],series:[]}}chartInit(b){this.chart=b}ngOnInit(){this.load(),this.loadValues(),this.group=this.fb.group({strEnd:[[l()().add(-7,"days").toDate(),l()().toDate()]],window:[1],winTp:["h"],fn:["last"]})}load(){this.rs.get(`device/${this.id}`,{}).subscribe(b=>{this.data=b.data,this.loadProperties()})}loadValues(){this.rs.get("device/"+this.id+"/values").subscribe(b=>{this.values=b.data||{}})}loadProperties(){this.rs.get(`product/${this.data.product_id}/config/property`).subscribe(b=>{this.properties=b.data,this.properties.forEach(I=>{this.names[I.name]=I.label||I.name})})}loadHistory(b,I){this.rs.get(`device/${this.id}/history/${b}`,I).subscribe(W=>{console.log("history",W.data),this.option.series.push({name:this.names[b],type:"line",smooth:!0,symbol:"none",data:W.data?.map(G=>[G.time,G.value])}),this.chart.clear(),this.chart.setOption(this.option),console.log(this.option)})}search(){if(this.group.valid){let b=this.group.value,I={start:l()(b.strEnd[0]).toISOString(),end:l()(b.strEnd[1]).toISOString(),window:b.window?b.window+b.winTp:"1h",fn:"last"};console.log("actives",this.actives),this.option.series=[],Object.keys(this.actives).forEach(W=>{this.actives[W]&&this.loadHistory(W,I)})}else Object.values(this.group.controls).forEach(b=>{b.invalid&&(b.markAsDirty(),b.updateValueAndValidity({onlySelf:!0}))})}valueSwitch(b,I){this.rs.post("device/"+this.id+"/data",{[b]:I}).subscribe(W=>{this.msg.success("\u64cd\u4f5c\u6210\u529f")})}static#t=this.\u0275fac=function(I){return new(I||p)(i.rXU(S.Ix),i.rXU(X.xh),i.rXU(s.ok),i.rXU(_.By),i.rXU(S.nX))};static#e=this.\u0275cmp=i.VBU({type:p,selectors:[["app-device-property"]],inputs:{id:"id"},standalone:!0,features:[i.aNF],decls:21,vars:18,consts:[["addOnAfterTemplate",""],[1,"variables",3,"nzGutter"],[3,"nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl",4,"ngFor","ngForOf"],[1,"history"],["nz-form","",3,"formGroup"],["nz-row",""],["nz-col","",3,"nzSpan"],[3,"nzSm","nzXs"],["nzErrorTip","",3,"nzSm","nzXs"],[2,"width","100%",3,"nzAddOnAfter"],["formControlName","window",3,"change","nzStep"],["nzErrorTip","",2,"width","100%",3,"nzSm","nzXs"],["nzMode","date","formControlName","strEnd",3,"change","nzShowTime"],[1,"chart",3,"chartInit","options"],[3,"nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"],[1,"variable",3,"ngClass"],[3,"click","nzTitle","nzValue","nzSuffix"],["nzSize","small",3,"ngModel","ngModelChange",4,"ngIf"],["nzSize","small",3,"ngModelChange","ngModel"],["formControlName","winTp",2,"width","60px",3,"nzOpenChange","change"],["nzValue","s","nzLabel","\u79d2"],["nzValue","m","nzLabel","\u5206"],["nzValue","h","nzLabel","\u65f6"]],template:function(I,W){if(1&I){const G=i.RV6();i.j41(0,"nz-row",1),i.DNE(1,A,4,13,"nz-col",2),i.k0s(),i.j41(2,"div",3)(3,"form",4)(4,"div",5)(5,"div",6)(6,"nz-form-item")(7,"nz-form-label",7),i.EFF(8,"\u7a97\u53e3\u65f6\u95f4"),i.k0s(),i.j41(9,"nz-form-control",8),i.DNE(10,Y,4,0,"ng-template",null,0,i.C5r),i.j41(12,"nz-input-number-group",9)(13,"nz-input-number",10),i.bIt("change",function(){return i.eBV(G),i.Njj(W.search())}),i.k0s()()()()(),i.j41(14,"div",6)(15,"nz-form-item")(16,"nz-form-label",7),i.EFF(17,"\u8d77\u6b62\u65f6\u95f4"),i.k0s(),i.j41(18,"nz-form-control",11)(19,"nz-range-picker",12),i.bIt("change",function(){return i.eBV(G),i.Njj(W.search())}),i.k0s()()()()()(),i.j41(20,"echarts",13),i.bIt("chartInit",function(et){return i.eBV(G),i.Njj(W.chartInit(et))}),i.k0s()()}if(2&I){const G=i.sdS(11);i.Y8G("nzGutter",i.lJ4(17,K)),i.R7$(),i.Y8G("ngForOf",W.properties),i.R7$(2),i.Y8G("formGroup",W.group),i.R7$(2),i.Y8G("nzSpan",8),i.R7$(2),i.Y8G("nzSm",6)("nzXs",24),i.R7$(2),i.Y8G("nzSm",14)("nzXs",24),i.R7$(3),i.Y8G("nzAddOnAfter",G),i.R7$(),i.Y8G("nzStep",1),i.R7$(),i.Y8G("nzSpan",16),i.R7$(2),i.Y8G("nzSm",3)("nzXs",24),i.R7$(2),i.Y8G("nzSm",18)("nzXs",24),i.R7$(),i.Y8G("nzShowTime",!0),i.R7$(),i.Y8G("options",W.option)}},dependencies:[d.MD,d.YU,d.Sq,d.bT,s.X1,s.qT,s.BC,s.cb,s.j4,s.JD,P.PQ,x.Uq,x.e,P.CA,P.Ls,P.Mo,P.zS,h.IV,u.$P,E.WI,E.ld,F.g5,F.FG,j.LE,j.SN,j.vw,U.u,s.YN,s.vS],styles:["[_nghost-%COMP%]{width:100%}.variables[_ngcontent-%COMP%]{padding:10px}.variables[_ngcontent-%COMP%]   .variable[_ngcontent-%COMP%]{background-color:#fff;padding:10px;cursor:pointer;border:1px solid #cccccc;border-radius:10px;transition:box-swadow .3s,border-color .3s}.variables[_ngcontent-%COMP%]   .variable[_ngcontent-%COMP%]:hover, .variables[_ngcontent-%COMP%]   .variable.active[_ngcontent-%COMP%]{box-shadow:0 0 5px gray}.history[_ngcontent-%COMP%]{width:100%}.chart[_ngcontent-%COMP%]{height:300px;width:800px;min-width:400px}"]})}return p})();var v=n(5506);function f(p,k){if(1&p&&i.nrm(0,"app-device-property",6),2&p){const b=i.XpG();i.Y8G("id",b.id)}}function B(p,k){}function D(p,k){1&p&&(i.j41(0,"button",9),i.EFF(1,"\u7f16\u8f91"),i.k0s())}function N(p,k){if(1&p){const b=i.RV6();i.j41(0,"button",10),i.bIt("nzOnConfirm",function(){i.eBV(b);const W=i.XpG(2);return i.Njj(W.delete())}),i.EFF(1,"\u5220\u9664"),i.k0s()}}function y(p,k){1&p&&(i.j41(0,"nz-space"),i.DNE(1,D,2,0,"button",7)(2,N,2,0,"button",8),i.k0s())}let V=(()=>{class p{constructor(b,I,W,G){this.router=b,this.msg=I,this.rs=W,this.route=G,this.base="/admin",this.data={},this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"product",label:"\u4ea7\u54c1",type:"link",link:()=>`${this.base}/product/${this.data.product_id}`},{key:"project",label:"\u9879\u76ee",type:"link",link:()=>`${this.base}/project/${this.data.project_id}`},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"description",label:"\u8bf4\u660e",span:2}],this.loading=!1}ngOnInit(){this.base=(0,v.X1)(this.route),this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.loading=!0,this.rs.post("device/search",{filter:{id:this.id}}).subscribe(b=>{this.data=b.data[0]}).add(()=>this.loading=!1)}delete(){this.rs.get(`device/${this.id}/delete`,{}).subscribe(b=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl(`${this.base}/device`)})}static#t=this.\u0275fac=function(I){return new(I||p)(i.rXU(S.Ix),i.rXU(X.xh),i.rXU(_.By),i.rXU(S.nX))};static#e=this.\u0275cmp=i.VBU({type:p,selectors:[["app-device-detail"]],standalone:!0,features:[i.aNF],decls:9,vars:3,consts:[["extra",""],["nzTitle","\u8bbe\u5907\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u5b9e\u65f6\u72b6\u6001"],["nz-tab",""],["nzTitle","\u62a5\u8b66\u65e5\u5fd7"],[3,"id"],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(I,W){if(1&I&&(i.j41(0,"nz-card",1),i.nrm(1,"im-smart-info",2),i.j41(2,"nz-tabset")(3,"nz-tab",3),i.DNE(4,f,1,1,"ng-template",4),i.k0s(),i.j41(5,"nz-tab",5),i.DNE(6,B,0,0,"ng-template",4),i.k0s()()(),i.DNE(7,y,3,0,"ng-template",null,0,i.C5r)),2&I){const G=i.sdS(8);i.Y8G("nzExtra",G),i.R7$(),i.Y8G("fields",W.fields)("value",W.data)}},dependencies:[d.MD,_.Zm,M.cK,t.U5,t.Dq,O.aO,S.Wk,r.PV,m.hM,m.JZ,m.rE,m.Tl,z]})}return p})()},6180:(H,L,n)=>{"use strict";n.d(L,{o:()=>N});var t=n(513),O=n(5222),d=n(177),S=n(5703),r=n(4438),_=n(4341),M=n(1011),m=n(9233),h=n(3053);let u=(()=>{class y{constructor(p,k){this.ms=p,this.rs=k,this.id="",this.product={},this.placeholder=""}ngOnInit(){}registerOnChange(p){this.onChange=p}registerOnTouched(p){}writeValue(p){this.id!==p&&(this.id=p,this.id&&this.load())}load(){console.log("load product",this.id),this.rs.get("product/"+this.id).subscribe(p=>{p.data&&(this.product=p.data)})}select(){this.ms.create({nzTitle:"\u9009\u62e9",nzContent:m.q}).afterClose.subscribe(p=>{console.log(p),p&&(this.product=p,this.id=p.id,this.onChange(this.id))})}change(p){console.log("on change",p),this.id=p,this.onChange(p),this.load()}static#t=this.\u0275fac=function(k){return new(k||y)(r.rXU(h.N_),r.rXU(O.By))};static#e=this.\u0275cmp=r.VBU({type:y,selectors:[["app-input-product"]],inputs:{placeholder:"placeholder"},standalone:!0,features:[r.Jv_([{provide:_.kq,useExisting:(0,r.Rfq)(()=>y),multi:!0}]),r.aNF],decls:5,vars:3,consts:[["box",""],["nz-input","",3,"change","placeholder","value"],["type","button","nz-button","",3,"click"]],template:function(k,b){if(1&k){const I=r.RV6();r.j41(0,"input",1,0),r.bIt("change",function(){r.eBV(I);const G=r.sdS(1);return r.Njj(b.change(G.value))}),r.k0s(),r.j41(2,"button",2),r.bIt("click",function(){return r.eBV(I),r.Njj(b.select())}),r.EFF(3,"\u9009\u62e9"),r.k0s(),r.EFF(4)}2&k&&(r.Y8G("placeholder",b.placeholder)("value",b.id),r.R7$(4),r.SpI("\n",b.product.name,"\n"))},dependencies:[M.Sy,t.aO]})}return y})();var s=n(3597),T=n(9541),l=n(6068),P=n(5123),E=n(72);function F(y,V){1&y&&r.nrm(0,"app-links")}function j(y,V){1&y&&r.nrm(0,"app-clients")}function U(y,V){1&y&&r.nrm(0,"app-serials")}let i=(()=>{class y{static#t=this.\u0275fac=function(k){return new(k||y)};static#e=this.\u0275cmp=r.VBU({type:y,selectors:[["app-tunnels"]],standalone:!0,features:[r.aNF],decls:7,vars:0,consts:[["nzTitle","TCP\u8fde\u63a5"],["nz-tab",""],["nzTitle","TCP\u5ba2\u6237\u7aef"],["nzTitle","\u4e32\u53e3\u8fde\u63a5"]],template:function(k,b){1&k&&(r.j41(0,"nz-tabset")(1,"nz-tab",0),r.DNE(2,F,1,0,"ng-template",1),r.k0s(),r.j41(3,"nz-tab",2),r.DNE(4,j,1,0,"ng-template",1),r.k0s(),r.j41(5,"nz-tab",3),r.DNE(6,U,1,0,"ng-template",1),r.k0s()())},dependencies:[T.hM,T.JZ,T.rE,T.Tl,l.l,P.y,E.J]})}return y})(),X=(()=>{class y{constructor(p,k){this.ms=p,this.rs=k,this.id="",this.tunnel={},this.placeholder=""}ngOnInit(){}registerOnChange(p){this.onChange=p}registerOnTouched(p){}writeValue(p){this.id!==p&&(this.id=p)}select(){this.ms.create({nzTitle:"\u9009\u62e9",nzContent:i,nzData:this.data}).afterClose.subscribe(p=>{console.log(p),p&&(this.tunnel=p,this.id=p.id,this.onChange(this.id))})}change(p){this.id=p,this.onChange(p)}static#t=this.\u0275fac=function(k){return new(k||y)(r.rXU(h.N_),r.rXU(O.By))};static#e=this.\u0275cmp=r.VBU({type:y,selectors:[["app-input-tunnel"]],inputs:{data:"data",placeholder:"placeholder"},standalone:!0,features:[r.Jv_([{provide:_.kq,useExisting:(0,r.Rfq)(()=>y),multi:!0}]),r.aNF],decls:5,vars:3,consts:[["box",""],["nz-input","",3,"change","placeholder","value"],["type","button","nz-button","",3,"click"]],template:function(k,b){if(1&k){const I=r.RV6();r.j41(0,"input",1,0),r.bIt("change",function(){r.eBV(I);const G=r.sdS(1);return r.Njj(b.change(G.value))}),r.k0s(),r.j41(2,"button",2),r.bIt("click",function(){return r.eBV(I),r.Njj(b.select())}),r.EFF(3,"\u9009\u62e9"),r.k0s(),r.EFF(4)}2&k&&(r.Y8G("placeholder",b.placeholder)("value",b.id),r.R7$(4),r.SpI("\n",b.tunnel.name,"\n"))},dependencies:[t.aO,M.Sy]})}return y})();var x=n(5506),K=n(6530),C=n(7094);const R=["form"],A=["chooseProduct"],Y=["chooseProject"],z=["chooseTunnel"];function v(y,V){if(1&y){const p=r.RV6();r.j41(0,"button",7),r.bIt("click",function(){r.eBV(p);const b=r.XpG();return r.Njj(b.onSubmit())}),r.EFF(1,"\u4fdd\u5b58"),r.k0s()}}function f(y,V){1&y&&r.nrm(0,"app-input-product",8),2&y&&r.Y8G("formControl",V.control)}function B(y,V){1&y&&r.nrm(0,"app-input-project",8),2&y&&r.Y8G("formControl",V.control)}function D(y,V){1&y&&r.nrm(0,"app-input-tunnel",8),2&y&&r.Y8G("formControl",V.control)}let N=(()=>{class y{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u8bbe\u5907"},{key:"keywords",label:"\u5173\u952e\u5b57",type:"tags",default:[]},{key:"product_id",label:"\u4ea7\u54c1",type:"template",template:this.chooseProduct,change:()=>setTimeout(()=>this.loadProtocolStation())},{key:"project_id",label:"\u9879\u76ee",type:"template",template:this.chooseProject},{key:"tunnel_id",label:"\u901a\u9053",type:"template",template:this.chooseTunnel},{key:"station",label:"\u4ece\u7ad9",type:"object"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(p,k,b,I){this.router=p,this.msg=k,this.rs=b,this.route=I,this.base="/admin",this.project_id="",this.tunnel_id="",this.id="",this.data={},this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u8bbe\u5907"}]}ngOnInit(){this.base=(0,x.X1)(this.route),this.project_id||=(0,x.pS)(this.route,"project"),this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load()),this.route.snapshot.paramMap.has("tunnel_id")&&(this.tunnel_id=this.route.snapshot.paramMap.get("tunnel_id"))}ngAfterViewInit(){setTimeout(()=>{this.build(),this.project_id&&(this.data.project_id=this.project_id,this.form.patchValue({project_id:this.project_id}),this.form.group.get("project_id")?.disable()),this.tunnel_id&&(this.data.tunnel_id=this.tunnel_id,this.form.patchValue({tunnel_id:this.tunnel_id}),this.form.group.get("tunnel_id")?.disable())},100)}load(){this.rs.get(`device/${this.id}`).subscribe(p=>{this.data=p.data,setTimeout(()=>this.loadProtocolStation(),100)})}loadProtocolStation(){console.log("loadProtocolStation",this.form.value),this.data=this.form.value;let p=this.form.value.product_id;p&&this.rs.get(`product/${p}`).subscribe(k=>{this.rs.get(`protocol/${k.data.protocol}/station`).subscribe(I=>{I.data&&(this.fields[6].children=I.data,this.form.ngOnInit())})})}onSubmit(){this.form.valid?this.rs.post(`device/${this.id||"create"}`,this.form.value).subscribe(k=>{this.router.navigateByUrl(`${this.base}/device/`+k.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(k){return new(k||y)(r.rXU(K.Ix),r.rXU(C.xh),r.rXU(O.By),r.rXU(K.nX))};static#e=this.\u0275cmp=r.VBU({type:y,selectors:[["app-device-edit"]],viewQuery:function(k,b){if(1&k&&(r.GBs(R,5),r.GBs(A,5),r.GBs(Y,5),r.GBs(z,5)),2&k){let I;r.mGM(I=r.lsd())&&(b.form=I.first),r.mGM(I=r.lsd())&&(b.chooseProduct=I.first),r.mGM(I=r.lsd())&&(b.chooseProject=I.first),r.mGM(I=r.lsd())&&(b.chooseTunnel=I.first)}},standalone:!0,features:[r.aNF],decls:11,vars:4,consts:[["form",""],["extraTemplate",""],["chooseProduct",""],["chooseProject",""],["chooseTunnel",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(k,b){if(1&k&&(r.j41(0,"nz-card",5),r.nrm(1,"im-smart-editor",6,0),r.k0s(),r.DNE(3,v,2,0,"ng-template",null,1,r.C5r)(5,f,1,1,"ng-template",null,2,r.C5r)(7,B,1,1,"ng-template",null,3,r.C5r)(9,D,1,1,"ng-template",null,4,r.C5r)),2&k){const I=r.sdS(4);r.Y8G("nzTitle","\u8bbe\u5907"+(b.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",I),r.R7$(),r.Y8G("fields",b.fields)("values",b.data)}},dependencies:[d.MD,_.YN,_.BC,_.X1,_.l_,t.aO,S.cK,O.Ay,u,s.d,X]})}return y})()},4658:(H,L,n)=>{"use strict";n.d(L,{D:()=>m});var t=n(177),O=n(5222),d=n(3053),S=n(5506),r=n(4438),_=n(6530);const M=()=>[];let m=(()=>{class h{constructor(s,T,l,P){this.route=s,this.rs=T,this.ref=l,this.data=P,this.base="/admin",this.project_id="",this.product_id="",this.tunnel_id="",this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>`${this.base}/device/create`}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:E=>`${this.base}/device/${E.id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"product",sortable:!0,label:"\u4ea7\u54c1",keyword:!0,link:E=>`${this.base}/product/${E.product_id}`},{key:"project",sortable:!0,label:"\u9879\u76ee",keyword:!0,link:E=>`${this.base}/project/${E.project_id}`},{key:"online",sortable:!0,label:"\u4e0a\u7ebf\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:E=>`${this.base}/device/${E.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:E=>{this.rs.get(`device/${E.id}/delete`).subscribe(F=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:E=>this.ref.close(E)}],this.project_id=P?.project_id}ngOnInit(){this.base=(0,S.X1)(this.route),this.project_id||=(0,S.pS)(this.route,"project")}refresh(){this.search(this.query)}search(s){this.product_id&&(s.filter.product_id=this.product_id),this.project_id&&(s.filter.project_id=this.project_id),this.tunnel_id&&(s.filter.tunnel_id=this.tunnel_id),this.loading=!0,this.rs.post("device/search",s).subscribe(T=>{this.datum=T.data,this.total=T.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(T){return new(T||h)(r.rXU(_.nX),r.rXU(O.By),r.rXU(d.J9,8),r.rXU(d.or,8))};static#e=this.\u0275cmp=r.VBU({type:h,selectors:[["app-devices"]],inputs:{project_id:"project_id",product_id:"product_id",tunnel_id:"tunnel_id"},standalone:!0,features:[r.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(T,l){1&T&&(r.j41(0,"im-smart-table",0),r.bIt("query",function(E){return l.search(E)}),r.k0s()),2&T&&r.Y8G("buttons",l.ref?r.lJ4(6,M):l.buttons)("columns",l.ref?l.columnsSelect:l.columns)("operators",l.ref?l.operatorsSelect:l.operators)("datum",l.datum)("total",l.total)("loading",l.loading)},dependencies:[t.MD,O.B2]})}return h})()},8238:(H,L,n)=>{"use strict";n.d(L,{V:()=>M});var t=n(5222),O=n(177),d=n(4438),S=n(6530),r=n(3053);const _=()=>[];let M=(()=>{class m{constructor(u,s,T){this.route=u,this.rs=s,this.ref=T,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/gateway/create"}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:l=>`/admin/gateway/${l.id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"project",sortable:!0,label:"\u9879\u76ee",keyword:!0,link:l=>`/admin/project/${l.project_id}`},{key:"online",sortable:!0,label:"\u4e0a\u7ebf\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:l=>`/admin/gateway/${l.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:l=>{this.rs.get(`gateway/${l.id}/delete`).subscribe(P=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:l=>this.ref.close(l)}]}ngOnInit(){}refresh(){this.search(this.query)}search(u){this.query=u,this.loading=!0,this.rs.post("gateway/search",u).subscribe(s=>{this.datum=s.data,this.total=s.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(s){return new(s||m)(d.rXU(S.nX),d.rXU(t.By),d.rXU(r.J9,8))};static#e=this.\u0275cmp=d.VBU({type:m,selectors:[["app-gateways"]],standalone:!0,features:[d.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(s,T){1&s&&(d.j41(0,"im-smart-table",0),d.bIt("query",function(P){return T.search(P)}),d.k0s()),2&s&&d.Y8G("buttons",T.ref?d.lJ4(6,_):T.buttons)("columns",T.ref?T.columnsSelect:T.columns)("operators",T.ref?T.operatorsSelect:T.operators)("datum",T.datum)("total",T.total)("loading",T.loading)},dependencies:[O.MD,t.B2]})}return m})()},6068:(H,L,n)=>{"use strict";n.d(L,{l:()=>_});var t=n(5222),O=n(177),d=n(4438),S=n(3053);const r=()=>[];let _=(()=>{class M{constructor(h,u){this.rs=h,this.ref=u,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/link/create"}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:s=>`/admin/link/${s.id}`},{key:"server",sortable:!0,label:"\u670d\u52a1\u5668",keyword:!0,link:s=>`/admin/server/${s.server_id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"remote",sortable:!0,label:"\u8fdc\u7a0b\u5730\u5740",keyword:!0},{key:"status",label:"\u72b6\u6001"},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"server",label:"\u670d\u52a1\u5668",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0},{key:"remote",label:"\u8fdc\u7a0b\u5730\u5740",keyword:!0},{key:"status",label:"\u72b6\u6001"}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:s=>`/admin/link/${s.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:s=>{this.rs.get(`link/${s.id}/delete`).subscribe(T=>this.refresh())}},{icon:"close-circle",title:"\u505c\u6b62",action:s=>{this.rs.get(`link/${s.id}/close`).subscribe(T=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:s=>this.ref.close(s)}]}refresh(){this.search(this.query)}search(h){this.query=h,this.server_id&&(h.filter.server_id=this.server_id),this.loading=!0,this.rs.post("link/search",h).subscribe(u=>{this.datum=u.data,this.total=u.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(u){return new(u||M)(d.rXU(t.By),d.rXU(S.J9,8))};static#e=this.\u0275cmp=d.VBU({type:M,selectors:[["app-links"]],inputs:{server_id:"server_id"},standalone:!0,features:[d.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(u,s){1&u&&(d.j41(0,"im-smart-table",0),d.bIt("query",function(l){return s.search(l)}),d.k0s()),2&u&&d.Y8G("buttons",s.ref?d.lJ4(6,r):s.buttons)("columns",s.ref?s.columnsSelect:s.columns)("operators",s.ref?s.operatorsSelect:s.operators)("datum",s.datum)("total",s.total)("loading",s.loading)},dependencies:[O.MD,t.B2]})}return M})()},9233:(H,L,n)=>{"use strict";n.d(L,{q:()=>_});var t=n(5222),O=n(177),d=n(4438),S=n(3053);const r=()=>[];let _=(()=>{class M{constructor(h,u,s){this.rs=h,this.ms=u,this.ref=s,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/product/create"}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:T=>`/admin/product/${T.id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"version",sortable:!0,label:"\u7248\u672c",keyword:!0},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:T=>`/admin/product/${T.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:T=>{this.rs.get(`product/${T.id}/delete`).subscribe(l=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:T=>{this.ref.close(T)}}]}refresh(){this.search(this.query)}search(h){this.query=h,this.loading=!0,this.rs.post("product/search",h).subscribe(u=>{this.datum=u.data,this.total=u.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(u){return new(u||M)(d.rXU(t.By),d.rXU(S.N_),d.rXU(S.J9,8))};static#e=this.\u0275cmp=d.VBU({type:M,selectors:[["app-products"]],standalone:!0,features:[d.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(u,s){1&u&&(d.j41(0,"im-smart-table",0),d.bIt("query",function(l){return s.search(l)}),d.k0s()),2&u&&d.Y8G("buttons",s.ref?d.lJ4(6,r):s.buttons)("columns",s.ref?s.columnsSelect:s.columns)("operators",s.ref?s.operatorsSelect:s.operators)("datum",s.datum)("total",s.total)("loading",s.loading)},dependencies:[O.MD,t.B2],styles:[".toolbar[_ngcontent-%COMP%]{padding:10px 0}.pages[_ngcontent-%COMP%]{padding:10px 0;display:flex;justify-content:center}"]})}return M})()},1369:(H,L,n)=>{"use strict";n.d(L,{A:()=>Y});var t=n(7685),O=n(513),d=n(177),S=n(6530),r=n(2874),_=n(5222),M=n(5703),m=n(9541),h=n(2582),u=n(4658),s=n(6629),T=n(5506),l=n(4438),P=n(7094);function E(z,v){if(1&z&&l.nrm(0,"app-spaces",8),2&z){const f=l.XpG();l.Y8G("project_id",f.id)}}function F(z,v){if(1&z&&l.nrm(0,"app-devices",8),2&z){const f=l.XpG();l.Y8G("project_id",f.id)}}function j(z,v){if(1&z&&l.nrm(0,"app-project-user",8),2&z){const f=l.XpG();l.Y8G("project_id",f.id)}}function U(z,v){}function i(z,v){if(1&z&&(l.j41(0,"button",10),l.EFF(1,"\u7f16\u8f91"),l.k0s()),2&z){const f=l.XpG(3);l.Y8G("routerLink","/project/"+f.id+"/edit")}}function X(z,v){1&z&&(l.j41(0,"nz-space"),l.DNE(1,i,2,1,"button",9),l.k0s())}function x(z,v){if(1&z&&(l.j41(0,"a",14),l.EFF(1,"\u6253\u5f00"),l.k0s()),2&z){const f=l.XpG(3);l.Y8G("routerLink","/project/"+f.id)}}function K(z,v){1&z&&(l.j41(0,"button",15),l.EFF(1,"\u7f16\u8f91"),l.k0s())}function C(z,v){if(1&z){const f=l.RV6();l.j41(0,"button",16),l.bIt("nzOnConfirm",function(){l.eBV(f);const D=l.XpG(3);return l.Njj(D.delete())}),l.EFF(1,"\u5220\u9664 "),l.k0s()}}function R(z,v){1&z&&(l.j41(0,"nz-space"),l.DNE(1,x,2,1,"a",11)(2,K,2,0,"button",12)(3,C,2,0,"button",13),l.k0s())}function A(z,v){if(1&z&&l.DNE(0,X,2,0,"nz-space")(1,R,4,0),2&z){const f=l.XpG();l.vxM(0,f.project_id?0:1)}}let Y=(()=>{class z{constructor(f,B,D,N){this.router=f,this.msg=B,this.rs=D,this.route=N,this.base="/admin",this.value="",this.data={},this.fields=[{label:"ID",key:"id"},{label:"\u540d\u79f0",key:"name"},{label:"\u521b\u5efa\u65f6\u95f4",key:"created",type:"date"},{label:"\u8bf4\u660e",key:"description",span:2}]}ngOnInit(){this.base=(0,T.X1)(this.route),this.project_id||=(0,T.pS)(this.route,"project"),this.id=this.route.snapshot.paramMap.has("id")?this.route.snapshot.paramMap.get("id"):this.project_id,this.load()}load(){this.rs.get(`project/${this.id}`).subscribe(f=>{this.data=f.data})}delete(){this.rs.get(`project/${this.id}/delete`,{}).subscribe(f=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("/admin/project")})}static#t=this.\u0275fac=function(B){return new(B||z)(l.rXU(S.Ix),l.rXU(P.xh),l.rXU(_.By),l.rXU(S.nX))};static#e=this.\u0275cmp=l.VBU({type:z,selectors:[["app-project-detail"]],standalone:!0,features:[l.aNF],decls:13,vars:3,consts:[["extra",""],["nzTitle","\u9879\u76ee\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u9879\u76ee\u7a7a\u95f4"],["nz-tab",""],["nzTitle","\u9879\u76ee\u8bbe\u5907"],["nzTitle","\u9879\u76ee\u7528\u6237"],["nzTitle","\u62a5\u8b66\u65e5\u5fd7"],[3,"project_id"],["nz-button","",3,"routerLink",4,"nzSpaceItem"],["nz-button","",3,"routerLink"],["nz-button","","target","_blank",3,"routerLink",4,"nzSpaceItem"],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","target","_blank",3,"routerLink"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(B,D){if(1&B&&(l.j41(0,"nz-card",1),l.nrm(1,"im-smart-info",2),l.j41(2,"nz-tabset")(3,"nz-tab",3),l.DNE(4,E,1,1,"ng-template",4),l.k0s(),l.j41(5,"nz-tab",5),l.DNE(6,F,1,1,"ng-template",4),l.k0s(),l.j41(7,"nz-tab",6),l.DNE(8,j,1,1,"ng-template",4),l.k0s(),l.j41(9,"nz-tab",7),l.DNE(10,U,0,0,"ng-template",4),l.k0s()()(),l.DNE(11,A,2,1,"ng-template",null,0,l.C5r)),2&B){const N=l.sdS(12);l.Y8G("nzExtra",N),l.R7$(),l.Y8G("fields",D.fields)("value",D.data)}},dependencies:[d.MD,_.Zm,M.cK,t.U5,O.aO,t.Dq,S.Wk,r.PV,m.hM,m.JZ,m.rE,m.Tl,h.V,u.D,s.m]})}return z})()},4247:(H,L,n)=>{"use strict";n.d(L,{f:()=>s});var t=n(513),O=n(5222),d=n(177),S=n(5703),r=n(5506),_=n(4438),M=n(6530),m=n(7094);const h=["form"];function u(T,l){if(1&T){const P=_.RV6();_.j41(0,"button",4),_.bIt("click",function(){_.eBV(P);const F=_.XpG();return _.Njj(F.onSubmit())}),_.EFF(1,"\u4fdd\u5b58"),_.k0s()}}let s=(()=>{class T{constructor(P,E,F,j){this.router=P,this.msg=E,this.rs=F,this.route=j,this.base="/admin",this.id="",this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u9879\u76ee"},{key:"keywords",label:"\u5173\u952e\u5b57",type:"tags",default:[]},{key:"url",label:"\u94fe\u63a5",type:"text"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}],this.data={}}ngOnInit(){this.base=(0,r.X1)(this.route),this.project_id||=(0,r.pS)(this.route,"project"),this.id=this.route.snapshot.paramMap.has("id")?this.route.snapshot.paramMap.get("id"):this.project_id,this.load()}load(){this.rs.get("project/"+this.id).subscribe(P=>{this.data=P.data})}onSubmit(){this.form.valid?this.rs.post(`project/${this.id||"create"}`,this.form.value).subscribe(E=>{this.router.navigateByUrl(this.project_id?`${this.base}/detail`:`${this.base}/project/`+E.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(E){return new(E||T)(_.rXU(M.Ix),_.rXU(m.xh),_.rXU(O.By),_.rXU(M.nX))};static#e=this.\u0275cmp=_.VBU({type:T,selectors:[["app-project-edit"]],viewQuery:function(E,F){if(1&E&&_.GBs(h,5),2&E){let j;_.mGM(j=_.lsd())&&(F.form=j.first)}},standalone:!0,features:[_.aNF],decls:5,vars:4,consts:[["form",""],["extraTemplate",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"]],template:function(E,F){if(1&E&&(_.j41(0,"nz-card",2),_.nrm(1,"im-smart-editor",3,0),_.k0s(),_.DNE(3,u,2,0,"ng-template",null,1,_.C5r)),2&E){const j=_.sdS(4);_.Y8G("nzTitle","\u9879\u76ee"+(F.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",j),_.R7$(),_.Y8G("fields",F.fields)("values",F.data)}},dependencies:[d.MD,t.aO,S.cK,O.Ay]})}return T})()},6629:(H,L,n)=>{"use strict";n.d(L,{m:()=>u});var t=n(3053),O=n(177),d=n(5222),S=n(4116),r=n(5506),_=n(4438),M=n(6530),m=n(6504);const h=()=>[];let u=(()=>{class s{constructor(l,P,E,F,j,U){this.route=l,this.rs=P,this.msg=E,this.ms=F,this.ref=j,this.data=U,this.base="/admin",this.project_id="",this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"link",label:"\u7ed1\u5b9a\u7528\u6237",action:()=>this.bind()}],this.columns=[{key:"user_id",sortable:!0,label:"ID",keyword:!0},{key:"user",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"disabled",sortable:!0,label:"\u72b6\u6001"},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"user_id",sortable:!0,label:"ID",keyword:!0},{key:"user",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"disabled",sortable:!0,label:"\u72b6\u6001"}],this.operators=[{icon:"disconnect",label:"\u89e3\u7ed1",confirm:"\u786e\u8ba4\u89e3\u7ed1\uff1f",action:i=>this.unbind(i.user_id)}],this.operatorsSelect=[{label:"\u9009\u62e9",action:i=>this.ref.close(i)}],this.project_id=U?.project_id}ngOnInit(){this.base=(0,r.X1)(this.route),this.project_id||=(0,r.pS)(this.route,"project")}refresh(){this.search(this.query)}search(l){this.query=l,this.project_id&&(l.filter.project_id=this.project_id),this.loading=!0,this.rs.get(`project/${this.project_id}/user/list`).subscribe(P=>{this.datum=P.data}).add(()=>this.loading=!1)}bind(){this.ms.create({nzTitle:"\u7ed1\u5b9a\u7528\u6237",nzContent:S.C}).afterClose.subscribe(l=>{l&&this.rs.get(`project/${this.project_id}/user/${l.id}/bind`,{}).subscribe(P=>{this.msg.success("\u63d0\u793a","\u7ed1\u5b9a\u6210\u529f"),this.refresh()})})}unbind(l){this.rs.get(`project/${this.project_id}/user/${l}/unbind`,{}).subscribe(P=>{this.msg.success("\u63d0\u793a","\u89e3\u7ed1\u6210\u529f"),this.refresh()})}static#t=this.\u0275fac=function(P){return new(P||s)(_.rXU(M.nX),_.rXU(d.By),_.rXU(m.xY),_.rXU(t.N_),_.rXU(t.J9,8),_.rXU(t.or,8))};static#e=this.\u0275cmp=_.VBU({type:s,selectors:[["app-project-user"]],inputs:{project_id:"project_id"},standalone:!0,features:[_.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(P,E){1&P&&(_.j41(0,"im-smart-table",0),_.bIt("query",function(j){return E.search(j)}),_.k0s()),2&P&&_.Y8G("buttons",E.ref?_.lJ4(6,h):E.buttons)("columns",E.ref?E.columnsSelect:E.columns)("operators",E.ref?E.operatorsSelect:E.operators)("datum",E.datum)("total",E.total)("loading",E.loading)},dependencies:[O.MD,d.B2]})}return s})()},9635:(H,L,n)=>{"use strict";n.d(L,{E:()=>_});var t=n(5222),O=n(177),d=n(4438),S=n(3053);const r=()=>[];let _=(()=>{class M{constructor(h,u){this.rs=h,this.ref=u,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/project/create"}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:s=>`/admin/project/${s.id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0}],this.operators=[{icon:"export",title:"\u6253\u5f00",link:s=>`/project/${s.id}`,external:!0},{icon:"edit",title:"\u7f16\u8f91",link:s=>`/admin/project/${s.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:s=>{this.rs.get(`project/${s.id}/delete`).subscribe(T=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:s=>this.ref.close(s)}]}refresh(){this.search(this.query)}search(h){this.query=h,this.loading=!0,this.rs.post("project/search",h).subscribe(u=>{this.datum=u.data,this.total=u.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(u){return new(u||M)(d.rXU(t.By),d.rXU(S.J9,8))};static#e=this.\u0275cmp=d.VBU({type:M,selectors:[["app-projects"]],standalone:!0,features:[d.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(u,s){1&u&&(d.j41(0,"im-smart-table",0),d.bIt("query",function(l){return s.search(l)}),d.k0s()),2&u&&d.Y8G("buttons",s.ref?d.lJ4(6,r):s.buttons)("columns",s.ref?s.columnsSelect:s.columns)("operators",s.ref?s.operatorsSelect:s.operators)("datum",s.datum)("total",s.total)("loading",s.loading)},dependencies:[O.MD,t.B2]})}return M})()},72:(H,L,n)=>{"use strict";n.d(L,{J:()=>_});var t=n(5222),O=n(177),d=n(4438),S=n(3053);const r=()=>[];let _=(()=>{class M{constructor(h,u){this.rs=h,this.ref=u,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/serial/create"}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:s=>`/admin/serial/${s.id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"port_name",sortable:!0,label:"\u7aef\u53e3",keyword:!0},{key:"status",label:"\u72b6\u6001"},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0},{key:"port_name",label:"\u7aef\u53e3",keyword:!0},{key:"status",label:"\u72b6\u6001"}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:s=>`/admin/serial/${s.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:s=>{this.rs.get(`serial/${s.id}/delete`).subscribe(T=>this.refresh())}},{icon:"play-circle",title:"\u542f\u52a8",action:s=>{this.rs.get(`serial/${s.id}/open`).subscribe(T=>this.refresh())}},{icon:"close-circle",title:"\u505c\u6b62",action:s=>{this.rs.get(`serial/${s.id}/close`).subscribe(T=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:s=>this.ref.close(s)}]}refresh(){this.search(this.query)}search(h){this.query=h,this.loading=!0,this.rs.post("serial/search",h).subscribe(u=>{this.datum=u.data,this.total=u.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(u){return new(u||M)(d.rXU(t.By),d.rXU(S.J9,8))};static#e=this.\u0275cmp=d.VBU({type:M,selectors:[["app-serials"]],standalone:!0,features:[d.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(u,s){1&u&&(d.j41(0,"im-smart-table",0),d.bIt("query",function(l){return s.search(l)}),d.k0s()),2&u&&d.Y8G("buttons",s.ref?d.lJ4(6,r):s.buttons)("columns",s.ref?s.columnsSelect:s.columns)("operators",s.ref?s.operatorsSelect:s.operators)("datum",s.datum)("total",s.total)("loading",s.loading)},dependencies:[O.MD,t.B2]})}return M})()},4432:(H,L,n)=>{"use strict";n.d(L,{h:()=>U});var t=n(7685),O=n(513),d=n(177),S=n(6530),r=n(2874),_=n(5222),M=n(5703),m=n(9541),h=n(5090),u=n(5506),s=n(4438),T=n(7094);function l(i,X){if(1&i&&s.nrm(0,"app-space-device",6),2&i){const x=s.XpG();s.Y8G("space_id",x.id)("project_id",x.data.project_id)}}function P(i,X){}function E(i,X){1&i&&(s.j41(0,"button",9),s.EFF(1,"\u7f16\u8f91"),s.k0s())}function F(i,X){if(1&i){const x=s.RV6();s.j41(0,"button",10),s.bIt("nzOnConfirm",function(){s.eBV(x);const C=s.XpG(2);return s.Njj(C.delete())}),s.EFF(1,"\u5220\u9664"),s.k0s()}}function j(i,X){1&i&&(s.j41(0,"nz-space"),s.DNE(1,E,2,0,"button",7)(2,F,2,0,"button",8),s.k0s())}let U=(()=>{class i{constructor(x,K,C,R){this.router=x,this.msg=K,this.rs=C,this.route=R,this.base="/admin",this.value="",this.data={},this.spaces=[],this.fields=[{label:"ID",key:"id"},{label:"\u540d\u79f0",key:"name"},{label:"\u521b\u5efa\u65f6\u95f4",key:"created",type:"date"},{label:"\u8bf4\u660e",key:"description",span:2}]}ngOnInit(){this.base=(0,u.X1)(this.route),this.project_id||=(0,u.pS)(this.route,"project"),this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.rs.get(`space/${this.id}`).subscribe(x=>{this.data=x.data})}delete(){this.rs.get(`space/${this.id}/delete`,{}).subscribe(x=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl(`${this.base}/space`)})}static#t=this.\u0275fac=function(K){return new(K||i)(s.rXU(S.Ix),s.rXU(T.xh),s.rXU(_.By),s.rXU(S.nX))};static#e=this.\u0275cmp=s.VBU({type:i,selectors:[["app-space-detail"]],standalone:!0,features:[s.aNF],decls:9,vars:3,consts:[["extra",""],["nzTitle","\u7a7a\u95f4\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u7a7a\u95f4\u8bbe\u5907"],["nz-tab",""],["nzTitle","\u62a5\u8b66\u65e5\u5fd7"],[3,"space_id","project_id"],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(K,C){if(1&K&&(s.j41(0,"nz-card",1),s.nrm(1,"im-smart-info",2),s.j41(2,"nz-tabset")(3,"nz-tab",3),s.DNE(4,l,1,2,"ng-template",4),s.k0s(),s.j41(5,"nz-tab",5),s.DNE(6,P,0,0,"ng-template",4),s.k0s()()(),s.DNE(7,j,3,0,"ng-template",null,0,s.C5r)),2&K){const R=s.sdS(8);s.Y8G("nzExtra",R),s.R7$(),s.Y8G("fields",C.fields)("value",C.data)}},dependencies:[d.MD,_.Zm,M.cK,t.U5,O.aO,t.Dq,S.Wk,r.PV,m.hM,m.JZ,m.rE,m.Tl,h.q]})}return i})()},5090:(H,L,n)=>{"use strict";n.d(L,{q:()=>u});var t=n(3053),O=n(177),d=n(5222),S=n(4658),r=n(5506),_=n(4438),M=n(6530),m=n(6504);const h=()=>[];let u=(()=>{class s{constructor(l,P,E,F,j,U){this.route=l,this.rs=P,this.msg=E,this.ms=F,this.ref=j,this.data=U,this.base="/admin",this.space_id="",this.project_id="",this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"link",label:"\u7ed1\u5b9a\u8bbe\u5907",action:()=>this.bind()}],this.columns=[{key:"device_id",sortable:!0,label:"ID",keyword:!0,link:i=>`${this.base}/device/${i.device_id}`},{key:"device",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"device_id",sortable:!0,label:"ID",keyword:!0},{key:"device",sortable:!0,label:"\u540d\u79f0",keyword:!0}],this.operators=[{icon:"disconnect",label:"\u89e3\u7ed1",confirm:"\u786e\u8ba4\u89e3\u7ed1\uff1f",action:i=>this.unbind(i.device_id)}],this.operatorsSelect=[{label:"\u9009\u62e9",action:i=>this.ref.close(i)}],this.space_id=U?.space_id,this.project_id=U?.project_id}ngOnInit(){this.base=(0,r.X1)(this.route),this.project_id||=(0,r.pS)(this.route,"project"),this.route.snapshot.paramMap.has("id")&&(this.space_id=this.route.snapshot.paramMap.get("id")),this.space_id&&!this.project_id&&this.rs.get("space/"+this.space_id).subscribe(l=>{this.project_id=l.data.project_id})}refresh(){this.search(this.query)}search(l){this.query=l,this.project_id&&(l.filter.project_id=this.project_id),this.loading=!0,this.rs.get(`space/${this.space_id}/device/list`).subscribe(P=>{this.datum=P.data}).add(()=>this.loading=!1)}bind(){this.ms.create({nzTitle:"\u7ed1\u5b9a\u8bbe\u5907",nzContent:S.D,nzData:{project_id:this.project_id}}).afterClose.subscribe(l=>{l&&this.rs.get(`space/${this.space_id}/device/${l.id}/bind`,{}).subscribe(P=>{this.msg.success("\u63d0\u793a","\u7ed1\u5b9a\u6210\u529f"),this.refresh()})})}unbind(l){this.rs.get(`space/${this.space_id}/device/${l}/unbind`,{}).subscribe(P=>{this.msg.success("\u63d0\u793a","\u89e3\u7ed1\u6210\u529f"),this.refresh()})}static#t=this.\u0275fac=function(P){return new(P||s)(_.rXU(M.nX),_.rXU(d.By),_.rXU(m.xY),_.rXU(t.N_),_.rXU(t.J9,8),_.rXU(t.or,8))};static#e=this.\u0275cmp=_.VBU({type:s,selectors:[["app-space-device"]],inputs:{space_id:"space_id",project_id:"project_id"},standalone:!0,features:[_.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(P,E){1&P&&(_.j41(0,"im-smart-table",0),_.bIt("query",function(j){return E.search(j)}),_.k0s()),2&P&&_.Y8G("buttons",E.ref?_.lJ4(6,h):E.buttons)("columns",E.ref?E.columnsSelect:E.columns)("operators",E.ref?E.operatorsSelect:E.operators)("datum",E.datum)("total",E.total)("loading",E.loading)},dependencies:[O.MD,d.B2]})}return s})()},1998:(H,L,n)=>{"use strict";n.d(L,{a:()=>F});var t=n(513),O=n(5222),d=n(177),S=n(5703),r=n(3597),_=n(4341),M=n(5506),m=n(4438),h=n(6530),u=n(3053),s=n(7094);const T=["form"],l=["chooseProject"];function P(j,U){if(1&j){const i=m.RV6();m.j41(0,"button",5),m.bIt("click",function(){m.eBV(i);const x=m.XpG();return m.Njj(x.onSubmit())}),m.EFF(1,"\u4fdd\u5b58"),m.k0s()}}function E(j,U){1&j&&m.nrm(0,"app-input-project",6),2&j&&m.Y8G("formControl",U.control)}let F=(()=>{class j{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u7a7a\u95f4"},{key:"project_id",label:"\u9879\u76ee",type:"template",template:this.chooseProject},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(i,X,x,K,C){this.router=i,this.ms=X,this.msg=x,this.rs=K,this.route=C,this.base="/admin",this.project_id="",this.id="",this.fields=[],this.data={}}ngOnInit(){this.base=(0,M.X1)(this.route),this.project_id||=(0,M.pS)(this.route,"project"),this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}ngAfterViewInit(){this.build(),this.project_id&&(this.form.patchValue({project_id:this.project_id}),this.form.group.get("project_id")?.disable())}load(){this.rs.get(`space/${this.id}`).subscribe(i=>{this.data=i.data})}onSubmit(){this.form.valid?this.rs.post(`space/${this.id||"create"}`,this.form.value).subscribe(X=>{this.router.navigateByUrl(`${this.base}/space/`+X.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(X){return new(X||j)(m.rXU(h.Ix),m.rXU(u.N_),m.rXU(s.xh),m.rXU(O.By),m.rXU(h.nX))};static#e=this.\u0275cmp=m.VBU({type:j,selectors:[["app-space-edit"]],viewQuery:function(X,x){if(1&X&&(m.GBs(T,5),m.GBs(l,5)),2&X){let K;m.mGM(K=m.lsd())&&(x.form=K.first),m.mGM(K=m.lsd())&&(x.chooseProject=K.first)}},standalone:!0,features:[m.aNF],decls:7,vars:4,consts:[["form",""],["extraTemplate",""],["chooseProject",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(X,x){if(1&X&&(m.j41(0,"nz-card",3),m.nrm(1,"im-smart-editor",4,0),m.k0s(),m.DNE(3,P,2,0,"ng-template",null,1,m.C5r)(5,E,1,1,"ng-template",null,2,m.C5r)),2&X){const K=m.sdS(4);m.Y8G("nzTitle","\u7a7a\u95f4"+(x.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",K),m.R7$(),m.Y8G("fields",x.fields)("values",x.data)}},dependencies:[d.MD,_.YN,_.BC,_.X1,_.l_,t.aO,S.cK,O.Ay,r.d]})}return j})()},2582:(H,L,n)=>{"use strict";n.d(L,{V:()=>m});var t=n(5222),O=n(3053),d=n(177),S=n(5506),r=n(4438),_=n(6530);const M=()=>[];let m=(()=>{class h{constructor(s,T,l,P){this.route=s,this.rs=T,this.ref=l,this.data=P,this.base="/admin",this.project_id="",this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>`${this.base}/space/create`}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:E=>`${this.base}/space/${E.id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"project",sortable:!0,label:"\u9879\u76ee",keyword:!0,link:E=>`${this.base}/project/${E.project_id}`},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:E=>`${this.base}/space/${E.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:E=>{this.rs.get(`space/${E.id}/delete`).subscribe(F=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:E=>this.ref.close(E)}],this.project_id=P?.project_id}ngOnInit(){this.base=(0,S.X1)(this.route),this.project_id||=(0,S.pS)(this.route,"project")}refresh(){this.search(this.query)}search(s){this.query=s,this.project_id&&(s.filter.project_id=this.project_id),this.loading=!0,this.rs.post("space/search",s).subscribe(T=>{this.datum=T.data,this.total=T.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(T){return new(T||h)(r.rXU(_.nX),r.rXU(t.By),r.rXU(O.J9,8),r.rXU(O.or,8))};static#e=this.\u0275cmp=r.VBU({type:h,selectors:[["app-spaces"]],inputs:{project_id:"project_id"},standalone:!0,features:[r.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(T,l){1&T&&(r.j41(0,"im-smart-table",0),r.bIt("query",function(E){return l.search(E)}),r.k0s()),2&T&&r.Y8G("buttons",l.ref?r.lJ4(6,M):l.buttons)("columns",l.ref?l.columnsSelect:l.columns)("operators",l.ref?l.operatorsSelect:l.operators)("datum",l.datum)("total",l.total)("loading",l.loading)},dependencies:[d.MD,t.B2]})}return h})()},4116:(H,L,n)=>{"use strict";n.d(L,{C:()=>_});var t=n(177),O=n(5222),d=n(4438),S=n(3053);const r=()=>[];let _=(()=>{class M{constructor(h,u){this.rs=h,this.ref=u,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/user/create"}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0},{key:"name",sortable:!0,label:"\u59d3\u540d",keyword:!0},{key:"cellphone",sortable:!0,label:"\u624b\u673a",keyword:!0},{key:"email",sortable:!0,label:"\u90ae\u7bb1",keyword:!0},{key:"disabled",sortable:!0,label:"\u72b6\u6001",keyword:!0},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:s=>`/admin/user/${s.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:s=>{this.rs.get(`user/${s.id}/delete`).subscribe(T=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:s=>this.ref.close(s)}]}refresh(){this.search(this.query)}search(h){this.query=h,this.loading=!0,this.rs.post("user/search",h).subscribe(u=>{this.datum=u.data,this.total=u.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(u){return new(u||M)(d.rXU(O.By),d.rXU(S.J9,8))};static#e=this.\u0275cmp=d.VBU({type:M,selectors:[["app-users"]],standalone:!0,features:[d.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(u,s){1&u&&(d.j41(0,"im-smart-table",0),d.bIt("query",function(l){return s.search(l)}),d.k0s()),2&u&&d.Y8G("buttons",s.ref?d.lJ4(6,r):s.buttons)("columns",s.ref?s.columnsSelect:s.columns)("operators",s.ref?s.operatorsSelect:s.operators)("datum",s.datum)("total",s.total)("loading",s.loading)},dependencies:[t.MD,O.B2]})}return M})()},8682:(H,L,n)=>{"use strict";n.d(L,{F:()=>S});var t=n(5197),O=n(4438),d=n(5222);let S=(()=>{class r{constructor(M){this.rs=M,this.model="device",this.title="\u8bbe\u5907\u603b\u6570",this.project="",this.count=0}ngOnInit(){let M={};this.project&&(M.filter={project_id:this.project}),this.rs.post(this.model+"/count",M).subscribe(m=>{this.count=m.data})}static#t=this.\u0275fac=function(m){return new(m||r)(O.rXU(d.By))};static#e=this.\u0275cmp=O.VBU({type:r,selectors:[["app-count"]],inputs:{model:"model",title:"title",project:"project"},standalone:!0,features:[O.aNF],decls:1,vars:2,consts:[[3,"nzTitle","nzValue"]],template:function(m,h){1&m&&O.nrm(0,"nz-statistic",0),2&m&&O.Y8G("nzTitle",h.title)("nzValue",h.count)},dependencies:[t.IV]})}return r})()},7374:function(H){H.exports=function(){"use strict";var n=6e4,t=36e5,O="millisecond",d="second",S="minute",r="hour",_="day",M="week",m="month",h="quarter",u="year",s="date",T="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var v=["th","st","nd","rd"],f=z%100;return"["+z+(v[(f-20)%10]||v[f]||v[0])+"]"}},F=function(z,v,f){var B=String(z);return!B||B.length>=v?z:""+Array(v+1-B.length).join(f)+z},j={s:F,z:function(z){var v=-z.utcOffset(),f=Math.abs(v),B=Math.floor(f/60),D=f%60;return(v<=0?"+":"-")+F(B,2,"0")+":"+F(D,2,"0")},m:function z(v,f){if(v.date()<f.date())return-z(f,v);var B=12*(f.year()-v.year())+(f.month()-v.month()),D=v.clone().add(B,m),N=f-D<0,y=v.clone().add(B+(N?-1:1),m);return+(-(B+(f-D)/(N?D-y:y-D))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:m,y:u,w:M,d:_,D:s,h:r,m:S,s:d,ms:O,Q:h}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return void 0===z}},U="en",i={};i[U]=E;var X="$isDayjsObject",x=function(z){return z instanceof A||!(!z||!z[X])},K=function z(v,f,B){var D;if(!v)return U;if("string"==typeof v){var N=v.toLowerCase();i[N]&&(D=N),f&&(i[N]=f,D=N);var y=v.split("-");if(!D&&y.length>1)return z(y[0])}else{var V=v.name;i[V]=v,D=V}return!B&&D&&(U=D),D||!B&&U},C=function(z,v){if(x(z))return z.clone();var f="object"==typeof v?v:{};return f.date=z,f.args=arguments,new A(f)},R=j;R.l=K,R.i=x,R.w=function(z,v){return C(z,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var A=function(){function z(f){this.$L=K(f.locale,null,!0),this.parse(f),this.$x=this.$x||f.x||{},this[X]=!0}var v=z.prototype;return v.parse=function(f){this.$d=function(B){var D=B.date,N=B.utc;if(null===D)return new Date(NaN);if(R.u(D))return new Date;if(D instanceof Date)return new Date(D);if("string"==typeof D&&!/Z$/i.test(D)){var y=D.match(l);if(y){var V=y[2]-1||0,p=(y[7]||"0").substring(0,3);return N?new Date(Date.UTC(y[1],V,y[3]||1,y[4]||0,y[5]||0,y[6]||0,p)):new Date(y[1],V,y[3]||1,y[4]||0,y[5]||0,y[6]||0,p)}}return new Date(D)}(f),this.init()},v.init=function(){var f=this.$d;this.$y=f.getFullYear(),this.$M=f.getMonth(),this.$D=f.getDate(),this.$W=f.getDay(),this.$H=f.getHours(),this.$m=f.getMinutes(),this.$s=f.getSeconds(),this.$ms=f.getMilliseconds()},v.$utils=function(){return R},v.isValid=function(){return this.$d.toString()!==T},v.isSame=function(f,B){var D=C(f);return this.startOf(B)<=D&&D<=this.endOf(B)},v.isAfter=function(f,B){return C(f)<this.startOf(B)},v.isBefore=function(f,B){return this.endOf(B)<C(f)},v.$g=function(f,B,D){return R.u(f)?this[B]:this.set(D,f)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(f,B){var D=this,N=!!R.u(B)||B,y=R.p(f),V=function(et,Z){var nt=R.w(D.$u?Date.UTC(D.$y,Z,et):new Date(D.$y,Z,et),D);return N?nt:nt.endOf(_)},p=function(et,Z){return R.w(D.toDate()[et].apply(D.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(Z)),D)},k=this.$W,b=this.$M,I=this.$D,W="set"+(this.$u?"UTC":"");switch(y){case u:return N?V(1,0):V(31,11);case m:return N?V(1,b):V(0,b+1);case M:var G=this.$locale().weekStart||0,q=(k<G?k+7:k)-G;return V(N?I-q:I+(6-q),b);case _:case s:return p(W+"Hours",0);case r:return p(W+"Minutes",1);case S:return p(W+"Seconds",2);case d:return p(W+"Milliseconds",3);default:return this.clone()}},v.endOf=function(f){return this.startOf(f,!1)},v.$set=function(f,B){var D,N=R.p(f),y="set"+(this.$u?"UTC":""),V=(D={},D[_]=y+"Date",D[s]=y+"Date",D[m]=y+"Month",D[u]=y+"FullYear",D[r]=y+"Hours",D[S]=y+"Minutes",D[d]=y+"Seconds",D[O]=y+"Milliseconds",D)[N],p=N===_?this.$D+(B-this.$W):B;if(N===m||N===u){var k=this.clone().set(s,1);k.$d[V](p),k.init(),this.$d=k.set(s,Math.min(this.$D,k.daysInMonth())).$d}else V&&this.$d[V](p);return this.init(),this},v.set=function(f,B){return this.clone().$set(f,B)},v.get=function(f){return this[R.p(f)]()},v.add=function(f,B){var D,N=this;f=Number(f);var y=R.p(B),V=function(b){var I=C(N);return R.w(I.date(I.date()+Math.round(b*f)),N)};if(y===m)return this.set(m,this.$M+f);if(y===u)return this.set(u,this.$y+f);if(y===_)return V(1);if(y===M)return V(7);var p=(D={},D[S]=n,D[r]=t,D[d]=1e3,D)[y]||1,k=this.$d.getTime()+f*p;return R.w(k,this)},v.subtract=function(f,B){return this.add(-1*f,B)},v.format=function(f){var B=this,D=this.$locale();if(!this.isValid())return D.invalidDate||T;var N=f||"YYYY-MM-DDTHH:mm:ssZ",y=R.z(this),V=this.$H,p=this.$m,k=this.$M,b=D.weekdays,I=D.months,G=function(Z,nt,at,lt){return Z&&(Z[nt]||Z(B,N))||at[nt].slice(0,lt)},q=function(Z){return R.s(V%12||12,Z,"0")},et=D.meridiem||function(Z,nt,at){var lt=Z<12?"AM":"PM";return at?lt.toLowerCase():lt};return N.replace(P,function(Z,nt){return nt||function(at){switch(at){case"YY":return String(B.$y).slice(-2);case"YYYY":return R.s(B.$y,4,"0");case"M":return k+1;case"MM":return R.s(k+1,2,"0");case"MMM":return G(D.monthsShort,k,I,3);case"MMMM":return G(I,k);case"D":return B.$D;case"DD":return R.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return G(D.weekdaysMin,B.$W,b,2);case"ddd":return G(D.weekdaysShort,B.$W,b,3);case"dddd":return b[B.$W];case"H":return String(V);case"HH":return R.s(V,2,"0");case"h":return q(1);case"hh":return q(2);case"a":return et(V,p,!0);case"A":return et(V,p,!1);case"m":return String(p);case"mm":return R.s(p,2,"0");case"s":return String(B.$s);case"ss":return R.s(B.$s,2,"0");case"SSS":return R.s(B.$ms,3,"0");case"Z":return y}return null}(Z)||y.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(f,B,D){var N,y=this,V=R.p(B),p=C(f),k=(p.utcOffset()-this.utcOffset())*n,b=this-p,I=function(){return R.m(y,p)};switch(V){case u:N=I()/12;break;case m:N=I();break;case h:N=I()/3;break;case M:N=(b-k)/6048e5;break;case _:N=(b-k)/864e5;break;case r:N=b/t;break;case S:N=b/n;break;case d:N=b/1e3;break;default:N=b}return D?N:R.a(N)},v.daysInMonth=function(){return this.endOf(m).$D},v.$locale=function(){return i[this.$L]},v.locale=function(f,B){if(!f)return this.$L;var D=this.clone(),N=K(f,B,!0);return N&&(D.$L=N),D},v.clone=function(){return R.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},z}(),Y=A.prototype;return C.prototype=Y,[["$ms",O],["$s",d],["$m",S],["$H",r],["$W",_],["$M",m],["$y",u],["$D",s]].forEach(function(z){Y[z[1]]=function(v){return this.$g(v,z[0],z[1])}}),C.extend=function(z,v){return z.$i||(z(v,A,C),z.$i=!0),C},C.locale=K,C.isDayjs=x,C.unix=function(z){return C(1e3*z)},C.en=i[U],C.Ls=i,C.p={},C}()},5197:(H,L,n)=>{"use strict";n.d(L,{IV:()=>i});var t=n(4438),O=n(1413),d=n(177),S=n(6977),r=n(7806),_=n(8203);const M=C=>({$implicit:C});function m(C,R){if(1&C&&t.eu8(0,3),2&C){const A=t.XpG();t.Y8G("ngTemplateOutlet",A.nzValueTemplate)("ngTemplateOutletContext",t.eq3(2,M,A.nzValue))}}function h(C,R){if(1&C&&(t.j41(0,"span",6),t.EFF(1),t.k0s()),2&C){const A=t.XpG(2);t.R7$(),t.JRh(A.displayInt)}}function u(C,R){if(1&C&&(t.j41(0,"span",7),t.EFF(1),t.k0s()),2&C){const A=t.XpG(2);t.R7$(),t.JRh(A.displayDecimal)}}function s(C,R){if(1&C&&(t.qex(0),t.DNE(1,h,2,1,"span",4)(2,u,2,1,"span",5),t.bVm()),2&C){const A=t.XpG();t.R7$(),t.Y8G("ngIf",A.displayInt),t.R7$(),t.Y8G("ngIf",A.displayDecimal)}}function T(C,R){if(1&C&&(t.qex(0),t.EFF(1),t.bVm()),2&C){const A=t.XpG();t.R7$(),t.JRh(A.nzTitle)}}function l(C,R){if(1&C&&(t.qex(0),t.EFF(1),t.bVm()),2&C){const A=t.XpG(2);t.R7$(),t.JRh(A.nzPrefix)}}function P(C,R){if(1&C&&(t.j41(0,"span",6),t.DNE(1,l,2,1,"ng-container",1),t.k0s()),2&C){const A=t.XpG();t.R7$(),t.Y8G("nzStringTemplateOutlet",A.nzPrefix)}}function E(C,R){if(1&C&&(t.qex(0),t.EFF(1),t.bVm()),2&C){const A=t.XpG(2);t.R7$(),t.JRh(A.nzSuffix)}}function F(C,R){if(1&C&&(t.j41(0,"span",7),t.DNE(1,E,2,1,"ng-container",1),t.k0s()),2&C){const A=t.XpG();t.R7$(),t.Y8G("nzStringTemplateOutlet",A.nzSuffix)}}let U=(()=>{class C{constructor(A){this.locale_id=A,this.displayInt="",this.displayDecimal=""}ngOnChanges(){this.formatNumber()}formatNumber(){const A="number"==typeof this.nzValue?".":(0,d.a)(this.locale_id,d.gz.Decimal),Y=String(this.nzValue),[z,v]=Y.split(A);this.displayInt=z,this.displayDecimal=v?`${A}${v}`:""}static#t=this.\u0275fac=function(Y){return new(Y||C)(t.rXU(t.xe9))};static#e=this.\u0275cmp=t.VBU({type:C,selectors:[["nz-statistic-number"]],inputs:{nzValue:"nzValue",nzValueTemplate:"nzValueTemplate"},exportAs:["nzStatisticNumber"],standalone:!0,features:[t.OA$,t.aNF],decls:3,vars:2,consts:[[1,"ant-statistic-content-value"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ant-statistic-content-value-int",4,"ngIf"],["class","ant-statistic-content-value-decimal",4,"ngIf"],[1,"ant-statistic-content-value-int"],[1,"ant-statistic-content-value-decimal"]],template:function(Y,z){1&Y&&(t.j41(0,"span",0),t.DNE(1,m,1,4,"ng-container",1)(2,s,3,2,"ng-container",2),t.k0s()),2&Y&&(t.R7$(),t.Y8G("ngIf",z.nzValueTemplate),t.R7$(),t.Y8G("ngIf",!z.nzValueTemplate))},dependencies:[d.bT,d.T3],encapsulation:2,changeDetection:0})}return C})(),i=(()=>{class C{constructor(A,Y){this.cdr=A,this.directionality=Y,this.nzValueStyle={},this.dir="ltr",this.destroy$=new O.B}ngOnInit(){this.directionality.change?.pipe((0,S.Q)(this.destroy$)).subscribe(A=>{this.dir=A,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(Y){return new(Y||C)(t.rXU(t.gRc),t.rXU(_.dS,8))};static#e=this.\u0275cmp=t.VBU({type:C,selectors:[["nz-statistic"]],hostAttrs:[1,"ant-statistic"],hostVars:2,hostBindings:function(Y,z){2&Y&&t.AVh("ant-statistic-rtl","rtl"===z.dir)},inputs:{nzPrefix:"nzPrefix",nzSuffix:"nzSuffix",nzTitle:"nzTitle",nzValue:"nzValue",nzValueStyle:"nzValueStyle",nzValueTemplate:"nzValueTemplate"},exportAs:["nzStatistic"],standalone:!0,features:[t.aNF],decls:6,vars:6,consts:[[1,"ant-statistic-title"],[4,"nzStringTemplateOutlet"],[1,"ant-statistic-content",3,"ngStyle"],["class","ant-statistic-content-prefix",4,"ngIf"],[3,"nzValue","nzValueTemplate"],["class","ant-statistic-content-suffix",4,"ngIf"],[1,"ant-statistic-content-prefix"],[1,"ant-statistic-content-suffix"]],template:function(Y,z){1&Y&&(t.j41(0,"div",0),t.DNE(1,T,2,1,"ng-container",1),t.k0s(),t.j41(2,"div",2),t.DNE(3,P,2,1,"span",3),t.nrm(4,"nz-statistic-number",4),t.DNE(5,F,2,1,"span",5),t.k0s()),2&Y&&(t.R7$(),t.Y8G("nzStringTemplateOutlet",z.nzTitle),t.R7$(),t.Y8G("ngStyle",z.nzValueStyle),t.R7$(),t.Y8G("ngIf",z.nzPrefix),t.R7$(),t.Y8G("nzValue",z.nzValue)("nzValueTemplate",z.nzValueTemplate),t.R7$(),t.Y8G("ngIf",z.nzSuffix))},dependencies:[U,d.bT,r.C,r.m,d.B3],encapsulation:2,changeDetection:0})}return C})()},9541:(H,L,n)=>{"use strict";n.d(L,{JZ:()=>zt,Tl:()=>bt,hM:()=>Jt,rE:()=>gt});var t=n(4438),O=n(7806),d=n(5103),S=n(4500),r=n(851),_=n(4085),M=n(7336),m=n(177),h=n(3726),u=n(8359),s=n(536),T=n(5007),l=n(1413),P=n(7673),E=n(7786),F=n(6977),j=n(3798),U=n(9172),i=n(1594),X=n(5964),x=n(1986),K=n(2602),C=n(1868),R=n(494),A=n(5979),Y=n(8203),z=n(713),v=n(1635),f=n(317),B=n(6530),D=n(6035),N=n(1265);function y(c,J){if(1&c&&(t.qex(0),t.nrm(1,"span",1),t.bVm()),2&c){const e=J.$implicit;t.R7$(),t.Y8G("nzType",e)}}const V=()=>({minWidth:"46px"}),p=()=>({visible:!1});function k(c,J){if(1&c&&(t.qex(0),t.EFF(1),t.bVm()),2&c){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.tab.label," ")}}function b(c,J){if(1&c){const e=t.RV6();t.j41(0,"li",8),t.bIt("click",function(){const o=t.eBV(e).$implicit,g=t.XpG(2);return t.Njj(g.onSelect(o))})("contextmenu",function(o){const g=t.eBV(e).$implicit,$=t.XpG(2);return t.Njj($.onContextmenu(g,o))}),t.DNE(1,k,2,1,"ng-container",9),t.k0s()}if(2&c){const e=J.$implicit;t.AVh("ant-tabs-dropdown-menu-item-disabled",e.disabled),t.Y8G("nzSelected",e.active)("nzDisabled",e.disabled),t.R7$(),t.Y8G("nzStringTemplateOutlet",e.tab.label)("nzStringTemplateOutletContext",t.lJ4(6,p))}}function I(c,J){if(1&c&&(t.j41(0,"ul",6),t.DNE(1,b,2,7,"li",7),t.k0s()),2&c){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.items)}}function W(c,J){if(1&c){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.addClicked.emit())}),t.k0s()}if(2&c){const e=t.XpG();t.Y8G("addIcon",e.addIcon)}}const G=["navWarp"],q=["navList"],et=["*"];function Z(c,J){if(1&c){const e=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.addClicked.emit())}),t.k0s()}if(2&c){const e=t.XpG();t.Y8G("addIcon",e.addIcon),t.BMQ("tabindex",-1)}}function nt(c,J){}function at(c,J){if(1&c&&(t.j41(0,"div",9),t.DNE(1,nt,0,0,"ng-template",10),t.k0s()),2&c){const e=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",e.extraTemplate)}}const lt=["nz-tab-body",""];function St(c,J){}function kt(c,J){if(1&c&&(t.qex(0),t.DNE(1,St,0,0,"ng-template",1),t.bVm()),2&c){const e=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",e.content)}}function jt(c,J){if(1&c&&(t.qex(0),t.nrm(1,"span",1),t.bVm()),2&c){const e=J.$implicit;t.R7$(),t.Y8G("nzType",e)}}const At=["contentTemplate"],Rt=[[["","nz-tab-link",""]],"*"],Ut=["[nz-tab-link]","*"];function Nt(c,J){1&c&&t.SdG(0)}function $t(c,J){1&c&&t.SdG(0,1)}const Lt=()=>({visible:!0});function Wt(c,J){if(1&c&&(t.qex(0),t.EFF(1),t.bVm()),2&c){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.label)}}function Ft(c,J){if(1&c){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(o){t.eBV(e);const g=t.XpG().index,$=t.XpG(2);return t.Njj($.onClose(g,o))}),t.k0s()}if(2&c){const e=t.XpG().$implicit;t.Y8G("closeIcon",e.nzCloseIcon)}}function xt(c,J){if(1&c){const e=t.RV6();t.j41(0,"div",6),t.bIt("click",function(o){const g=t.eBV(e),$=g.$implicit,w=g.index,Q=t.XpG(2);return t.Njj(Q.clickNavItem($,w,o))})("contextmenu",function(o){const g=t.eBV(e).$implicit,$=t.XpG(2);return t.Njj($.contextmenuNavItem(g,o))}),t.j41(1,"button",7),t.DNE(2,Wt,2,1,"ng-container",8)(3,Ft,1,1,"button",9),t.k0s()()}if(2&c){const e=J.$implicit,a=J.index,o=t.XpG(2);t.xc7("margin-right","horizontal"===o.position?o.nzTabBarGutter:null,"px")("margin-bottom","vertical"===o.position?o.nzTabBarGutter:null,"px"),t.AVh("ant-tabs-tab-active",o.nzSelectedIndex===a)("ant-tabs-tab-disabled",e.nzDisabled),t.R7$(),t.Y8G("id",o.getTabContentId(a))("disabled",e.nzDisabled)("tab",e)("active",o.nzSelectedIndex===a),t.BMQ("tabIndex",o.getTabIndex(e,a))("aria-disabled",e.nzDisabled)("aria-selected",o.nzSelectedIndex===a&&!o.nzHideAll)("aria-controls",o.getTabContentId(a)),t.R7$(),t.Y8G("nzStringTemplateOutlet",e.label)("nzStringTemplateOutletContext",t.lJ4(19,Lt)),t.R7$(),t.Y8G("ngIf",e.nzClosable&&o.closable&&!e.nzDisabled)}}function Xt(c,J){if(1&c){const e=t.RV6();t.j41(0,"nz-tabs-nav",4),t.bIt("tabScroll",function(o){t.eBV(e);const g=t.XpG();return t.Njj(g.nzTabListScroll.emit(o))})("selectFocusedIndex",function(o){t.eBV(e);const g=t.XpG();return t.Njj(g.setSelectedIndex(o))})("addClicked",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onAdd())}),t.DNE(1,xt,4,20,"div",5),t.k0s()}if(2&c){const e=t.XpG();t.Y8G("ngStyle",e.nzTabBarStyle)("selectedIndex",e.nzSelectedIndex||0)("inkBarAnimated",e.inkBarAnimated)("addable",e.addable)("addIcon",e.nzAddIcon)("hideBar",e.nzHideAll)("position",e.position)("extraTemplate",e.nzTabBarExtraContent),t.R7$(),t.Y8G("ngForOf",e.tabs)}}function Vt(c,J){if(1&c&&t.nrm(0,"div",11),2&c){const e=J.$implicit,a=J.index,o=t.XpG();t.Y8G("id",o.getTabContentId(a))("active",o.nzSelectedIndex===a&&!o.nzHideAll)("content",e.content)("forceRender",e.nzForceRender)("animated",o.tabPaneAnimated),t.BMQ("aria-labelledby",o.getTabContentId(a))}}let dt=(()=>{class c{constructor(e){this.elementRef=e,this.addIcon="plus",this.element=this.elementRef.nativeElement}getElementWidth(){return this.element?.offsetWidth||0}getElementHeight(){return this.element?.offsetHeight||0}static#t=this.\u0275fac=function(a){return new(a||c)(t.rXU(t.aKT))};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["nz-tab-add-button"],["button","nz-tab-add-button",""]],hostAttrs:["aria-label","Add tab","type","button",1,"ant-tabs-nav-add"],inputs:{addIcon:"addIcon"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(a,o){1&a&&t.DNE(0,y,2,1,"ng-container",0),2&a&&t.Y8G("nzStringTemplateOutlet",o.addIcon)},dependencies:[O.C,O.m,d.Y3,d.Dn],encapsulation:2})}return c})(),pt=(()=>{class c{get _animated(){return"NoopAnimations"!==this.animationMode&&this.animated}constructor(e,a,o){this.elementRef=e,this.ngZone=a,this.animationMode=o,this.position="horizontal",this.animated=!0}alignToElement(e){this.ngZone.runOutsideAngular(()=>{(0,S.j)(()=>this.setStyles(e))})}setStyles(e){const a=this.elementRef.nativeElement;"horizontal"===this.position?(a.style.top="",a.style.height="",a.style.left=this.getLeftPosition(e),a.style.width=this.getElementWidth(e)):(a.style.left="",a.style.width="",a.style.top=this.getTopPosition(e),a.style.height=this.getElementHeight(e))}getLeftPosition(e){return e?`${e.offsetLeft||0}px`:"0"}getElementWidth(e){return e?`${e.offsetWidth||0}px`:"0"}getTopPosition(e){return e?`${e.offsetTop||0}px`:"0"}getElementHeight(e){return e?`${e.offsetHeight||0}px`:"0"}static#t=this.\u0275fac=function(a){return new(a||c)(t.rXU(t.aKT),t.rXU(t.SKi),t.rXU(t.bc$,8))};static#e=this.\u0275dir=t.FsC({type:c,selectors:[["nz-tabs-ink-bar"],["","nz-tabs-ink-bar",""]],hostAttrs:[1,"ant-tabs-ink-bar"],hostVars:2,hostBindings:function(a,o){2&a&&t.AVh("ant-tabs-ink-bar-animated",o._animated)},inputs:{position:"position",animated:"animated"},standalone:!0})}return c})(),mt=(()=>{class c{constructor(e){this.elementRef=e,this.disabled=!1,this.active=!1,this.el=e.nativeElement,this.parentElement=this.el.parentElement}focus(){this.el.focus()}get width(){return this.parentElement.offsetWidth}get height(){return this.parentElement.offsetHeight}get left(){return this.parentElement.offsetLeft}get top(){return this.parentElement.offsetTop}static#t=this.\u0275fac=function(a){return new(a||c)(t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:c,selectors:[["","nzTabNavItem",""]],inputs:{disabled:"disabled",tab:"tab",active:"active"},standalone:!0})}return c})(),ut=(()=>{class c{constructor(e,a){this.cdr=e,this.elementRef=a,this.items=[],this.addable=!1,this.addIcon="plus",this.addClicked=new t.bkB,this.selected=new t.bkB,this.menuOpened=!1,this.element=this.elementRef.nativeElement}onSelect(e){e.disabled||(e.tab.nzClick.emit(),this.selected.emit(e))}onContextmenu(e,a){e.disabled||e.tab.nzContextmenu.emit(a)}showItems(){clearTimeout(this.closeAnimationWaitTimeoutId),this.menuOpened=!0,this.cdr.markForCheck()}menuVisChange(e){e||(this.closeAnimationWaitTimeoutId=setTimeout(()=>{this.menuOpened=!1,this.cdr.markForCheck()},150))}getElementWidth(){return this.element?.offsetWidth||0}getElementHeight(){return this.element?.offsetHeight||0}ngOnDestroy(){clearTimeout(this.closeAnimationWaitTimeoutId)}static#t=this.\u0275fac=function(a){return new(a||c)(t.rXU(t.gRc),t.rXU(t.aKT))};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["nz-tab-nav-operation"]],hostAttrs:[1,"ant-tabs-nav-operations"],hostVars:2,hostBindings:function(a,o){2&a&&t.AVh("ant-tabs-nav-operations-hidden",0===o.items.length)},inputs:{items:"items",addable:"addable",addIcon:"addIcon"},outputs:{addClicked:"addClicked",selected:"selected"},exportAs:["nzTabNavOperation"],standalone:!0,features:[t.aNF],decls:7,vars:6,consts:[["dropdownTrigger","nzDropdown"],["menu","nzDropdownMenu"],["nz-dropdown","","type","button","tabindex","-1","aria-hidden","true","nzOverlayClassName","nz-tabs-dropdown",1,"ant-tabs-nav-more",3,"nzVisibleChange","mouseenter","nzDropdownMenu","nzOverlayStyle","nzMatchWidthElement"],["nz-icon","","nzType","ellipsis"],["nz-menu","",4,"ngIf"],["nz-tab-add-button","",3,"addIcon","click",4,"ngIf"],["nz-menu",""],["nz-menu-item","","class","ant-tabs-dropdown-menu-item",3,"ant-tabs-dropdown-menu-item-disabled","nzSelected","nzDisabled","click","contextmenu",4,"ngFor","ngForOf"],["nz-menu-item","",1,"ant-tabs-dropdown-menu-item",3,"click","contextmenu","nzSelected","nzDisabled"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nz-tab-add-button","",3,"click","addIcon"]],template:function(a,o){if(1&a){const g=t.RV6();t.j41(0,"button",2,0),t.bIt("nzVisibleChange",function(w){return t.eBV(g),t.Njj(o.menuVisChange(w))})("mouseenter",function(){return t.eBV(g),t.Njj(o.showItems())}),t.nrm(2,"span",3),t.k0s(),t.j41(3,"nz-dropdown-menu",null,1),t.DNE(5,I,2,1,"ul",4),t.k0s(),t.DNE(6,W,1,1,"button",5)}if(2&a){const g=t.sdS(4);t.Y8G("nzDropdownMenu",g)("nzOverlayStyle",t.lJ4(5,V))("nzMatchWidthElement",null),t.R7$(5),t.Y8G("ngIf",o.menuOpened),t.R7$(),t.Y8G("ngIf",o.addable)}},dependencies:[d.Y3,d.Dn,m.bT,m.Sq,O.C,O.m,dt,K.wQ,C.GP,C.jS,C.CU,K.j3],encapsulation:2,changeDetection:0})}return c})();const Et=.995**20;let yt=(()=>{class c{constructor(e,a){this.ngZone=e,this.elementRef=a,this.lastWheelDirection=null,this.lastWheelTimestamp=0,this.lastTimestamp=0,this.lastTimeDiff=0,this.lastMixedWheel=0,this.lastWheelPrevent=!1,this.touchPosition=null,this.lastOffset=null,this.motion=-1,this.unsubscribe=()=>{},this.offsetChange=new t.bkB,this.tabScroll=new t.bkB,this.onTouchEnd=o=>{if(!this.touchPosition)return;const g=this.lastOffset,$=this.lastTimeDiff;if(this.lastOffset=this.touchPosition=null,g){const w=g.x/$,Q=g.y/$,st=Math.abs(w),ot=Math.abs(Q);if(Math.max(st,ot)<.1)return;let it=w,rt=Q;this.motion=window.setInterval(()=>{Math.abs(it)<.01&&Math.abs(rt)<.01?window.clearInterval(this.motion):(it*=Et,rt*=Et,this.onOffset(20*it,20*rt,o))},20)}},this.onTouchMove=o=>{if(!this.touchPosition)return;o.preventDefault();const{screenX:g,screenY:$}=o.touches[0],w=g-this.touchPosition.x,Q=$-this.touchPosition.y;this.onOffset(w,Q,o);const st=Date.now();this.lastTimeDiff=st-this.lastTimestamp,this.lastTimestamp=st,this.lastOffset={x:w,y:Q},this.touchPosition={x:g,y:$}},this.onTouchStart=o=>{const{screenX:g,screenY:$}=o.touches[0];this.touchPosition={x:g,y:$},window.clearInterval(this.motion)},this.onWheel=o=>{const{deltaX:g,deltaY:$}=o;let w;const Q=Math.abs(g),st=Math.abs($);Q===st?w="x"===this.lastWheelDirection?g:$:Q>st?(w=g,this.lastWheelDirection="x"):(w=$,this.lastWheelDirection="y");const ot=Date.now(),it=Math.abs(w);(ot-this.lastWheelTimestamp>100||it-this.lastMixedWheel>10)&&(this.lastWheelPrevent=!1),this.onOffset(-w,-w,o),(o.defaultPrevented||this.lastWheelPrevent)&&(this.lastWheelPrevent=!0),this.lastWheelTimestamp=ot,this.lastMixedWheel=it}}ngOnInit(){this.unsubscribe=this.ngZone.runOutsideAngular(()=>{const e=this.elementRef.nativeElement,a=(0,h.R)(e,"wheel"),o=(0,h.R)(e,"touchstart"),g=(0,h.R)(e,"touchmove"),$=(0,h.R)(e,"touchend"),w=new u.yU;return w.add(this.subscribeWrap("wheel",a,this.onWheel)),w.add(this.subscribeWrap("touchstart",o,this.onTouchStart)),w.add(this.subscribeWrap("touchmove",g,this.onTouchMove)),w.add(this.subscribeWrap("touchend",$,this.onTouchEnd)),()=>{w.unsubscribe()}})}subscribeWrap(e,a,o){return a.subscribe(g=>{this.tabScroll.emit({type:e,event:g}),g.defaultPrevented||o(g)})}onOffset(e,a,o){this.ngZone.run(()=>{this.offsetChange.emit({x:e,y:a,event:o})})}ngOnDestroy(){this.unsubscribe()}static#t=this.\u0275fac=function(a){return new(a||c)(t.rXU(t.SKi),t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:c,selectors:[["","nzTabScrollList",""]],outputs:{offsetChange:"offsetChange",tabScroll:"tabScroll"},standalone:!0})}return c})();const wt=typeof requestAnimationFrame<"u"?s.X:T.$;let _t=(()=>{class c{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){const a=(0,_.OE)(e);this._selectedIndex!==a&&(this._selectedIndex=e,this.selectedIndexChanged=!0,this.keyManager&&this.keyManager.updateActiveItem(e))}get focusIndex(){return this.keyManager?this.keyManager.activeItemIndex:0}set focusIndex(e){!this.isValidIndex(e)||this.focusIndex===e||!this.keyManager||this.keyManager.setActiveItem(e)}get showAddButton(){return 0===this.hiddenItems.length&&this.addable}constructor(e,a,o,g,$){this.cdr=e,this.ngZone=a,this.viewportRuler=o,this.nzResizeObserver=g,this.dir=$,this.indexFocused=new t.bkB,this.selectFocusedIndex=new t.bkB,this.addClicked=new t.bkB,this.tabScroll=new t.bkB,this.position="horizontal",this.addable=!1,this.hideBar=!1,this.addIcon="plus",this.inkBarAnimated=!0,this.translate=null,this.transformX=0,this.transformY=0,this.pingLeft=!1,this.pingRight=!1,this.pingTop=!1,this.pingBottom=!1,this.hiddenItems=[],this.destroy$=new l.B,this._selectedIndex=0,this.wrapperWidth=0,this.wrapperHeight=0,this.scrollListWidth=0,this.scrollListHeight=0,this.operationWidth=0,this.operationHeight=0,this.addButtonWidth=0,this.addButtonHeight=0,this.selectedIndexChanged=!1}ngAfterViewInit(){const e=this.dir?this.dir.change.asObservable():(0,P.of)(null),a=this.viewportRuler.change(150),o=()=>{this.updateScrollListPosition(),this.alignInkBarToSelectedTab()};this.keyManager=new r.Bu(this.items).withHorizontalOrientation(this.getLayoutDirection()).withWrap(),this.keyManager.updateActiveItem(this.selectedIndex),(0,S.j)(o),(0,E.h)(this.nzResizeObserver.observe(this.navWarpRef),this.nzResizeObserver.observe(this.navListRef)).pipe((0,F.Q)(this.destroy$),(0,j.Z)(16,wt)).subscribe(()=>{o()}),(0,E.h)(e,a,this.items.changes).pipe((0,F.Q)(this.destroy$)).subscribe(()=>{Promise.resolve().then(o),this.keyManager.withHorizontalOrientation(this.getLayoutDirection())}),this.keyManager.change.pipe((0,F.Q)(this.destroy$)).subscribe(g=>{this.indexFocused.emit(g),this.setTabFocus(g),this.scrollToTab(this.keyManager.activeItem)})}ngAfterContentChecked(){this.selectedIndexChanged&&(this.updateScrollListPosition(),this.alignInkBarToSelectedTab(),this.selectedIndexChanged=!1,this.cdr.markForCheck())}ngOnDestroy(){clearTimeout(this.lockAnimationTimeoutId),clearTimeout(this.cssTransformTimeWaitingId),this.destroy$.next(),this.destroy$.complete()}onSelectedFromMenu(e){const a=this.items.toArray().findIndex(o=>o===e);-1!==a&&(this.keyManager.updateActiveItem(a),this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this.scrollToTab(e)))}onOffsetChange(e){if("horizontal"===this.position){if(!this.lockAnimationTimeoutId&&(this.transformX>=0&&e.x>0||this.transformX<=this.wrapperWidth-this.scrollListWidth&&e.x<0))return;e.event.preventDefault(),this.transformX=this.clampTransformX(this.transformX+e.x),this.setTransform(this.transformX,0)}else{if(!this.lockAnimationTimeoutId&&(this.transformY>=0&&e.y>0||this.transformY<=this.wrapperHeight-this.scrollListHeight&&e.y<0))return;e.event.preventDefault(),this.transformY=this.clampTransformY(this.transformY+e.y),this.setTransform(0,this.transformY)}this.lockAnimation(),this.setVisibleRange(),this.setPingStatus()}handleKeydown(e){const a=this.navWarpRef.nativeElement.contains(e.target);if(!(0,M.rp)(e)&&a)switch(e.keyCode){case M.UQ:case M.i7:case M.LE:case M.n6:this.lockAnimation(),this.keyManager.onKeydown(e);break;case M.Fm:case M.t6:this.focusIndex!==this.selectedIndex&&this.selectFocusedIndex.emit(this.focusIndex);break;default:this.keyManager.onKeydown(e)}}isValidIndex(e){if(!this.items)return!0;const a=this.items?this.items.toArray()[e]:null;return!!a&&!a.disabled}scrollToTab(e){if(!this.items.find(o=>o===e))return;const a=this.items.toArray();if("horizontal"===this.position){let o=this.transformX;if("rtl"===this.getLayoutDirection()){const g=a[0].left+a[0].width-e.left-e.width;g<this.transformX?o=g:g+e.width>this.transformX+this.wrapperWidth&&(o=g+e.width-this.wrapperWidth)}else e.left<-this.transformX?o=-e.left:e.left+e.width>-this.transformX+this.wrapperWidth&&(o=-(e.left+e.width-this.wrapperWidth));this.transformX=o,this.transformY=0,this.setTransform(o,0)}else{let o=this.transformY;e.top<-this.transformY?o=-e.top:e.top+e.height>-this.transformY+this.wrapperHeight&&(o=-(e.top+e.height-this.wrapperHeight)),this.transformY=o,this.transformX=0,this.setTransform(0,o)}clearTimeout(this.cssTransformTimeWaitingId),this.cssTransformTimeWaitingId=setTimeout(()=>{this.setVisibleRange()},150)}lockAnimation(){this.lockAnimationTimeoutId||this.ngZone.runOutsideAngular(()=>{this.navListRef.nativeElement.style.transition="none",this.lockAnimationTimeoutId=setTimeout(()=>{this.navListRef.nativeElement.style.transition="",this.lockAnimationTimeoutId=void 0},150)})}setTransform(e,a){this.navListRef.nativeElement.style.transform=`translate(${e}px, ${a}px)`}clampTransformX(e){const a=this.wrapperWidth-this.scrollListWidth;return"rtl"===this.getLayoutDirection()?Math.max(Math.min(a,e),0):Math.min(Math.max(a,e),0)}clampTransformY(e){return Math.min(Math.max(this.wrapperHeight-this.scrollListHeight,e),0)}updateScrollListPosition(){this.resetSizes(),this.transformX=this.clampTransformX(this.transformX),this.transformY=this.clampTransformY(this.transformY),this.setVisibleRange(),this.setPingStatus(),this.keyManager&&(this.keyManager.updateActiveItem(this.keyManager.activeItemIndex),this.keyManager.activeItem&&this.scrollToTab(this.keyManager.activeItem))}resetSizes(){this.addButtonWidth=this.addBtnRef?this.addBtnRef.getElementWidth():0,this.addButtonHeight=this.addBtnRef?this.addBtnRef.getElementHeight():0,this.operationWidth=this.operationRef.getElementWidth(),this.operationHeight=this.operationRef.getElementHeight(),this.wrapperWidth=this.navWarpRef.nativeElement.offsetWidth||0,this.wrapperHeight=this.navWarpRef.nativeElement.offsetHeight||0,this.scrollListHeight=this.navListRef.nativeElement.offsetHeight||0,this.scrollListWidth=this.navListRef.nativeElement.offsetWidth||0}alignInkBarToSelectedTab(){const e=this.items&&this.items.length?this.items.toArray()[this.selectedIndex]:null,a=e?e.elementRef.nativeElement:null;a&&this.inkBar.alignToElement(a.parentElement)}setPingStatus(){const e={top:!1,right:!1,bottom:!1,left:!1},a=this.navWarpRef.nativeElement;"horizontal"===this.position?"rtl"===this.getLayoutDirection()?(e.right=this.transformX>0,e.left=this.transformX+this.wrapperWidth<this.scrollListWidth):(e.left=this.transformX<0,e.right=-this.transformX+this.wrapperWidth<this.scrollListWidth):(e.top=this.transformY<0,e.bottom=-this.transformY+this.wrapperHeight<this.scrollListHeight),Object.keys(e).forEach(o=>{const g=`ant-tabs-nav-wrap-ping-${o}`;e[o]?a.classList.add(g):a.classList.remove(g)})}setVisibleRange(){let e,a,o,g,$,w;const Q=this.items.toArray(),st={width:0,height:0,left:0,top:0,right:0},ot=tt=>{let ct;return ct="right"===a?Q[0].left+Q[0].width-Q[tt].left-Q[tt].width:(Q[tt]||st)[a],ct};"horizontal"===this.position?(e="width",g=this.wrapperWidth,$=this.scrollListWidth-(this.hiddenItems.length?this.operationWidth:0),w=this.addButtonWidth,o=Math.abs(this.transformX),"rtl"===this.getLayoutDirection()?(a="right",this.pingRight=this.transformX>0,this.pingLeft=this.transformX+this.wrapperWidth<this.scrollListWidth):(this.pingLeft=this.transformX<0,this.pingRight=-this.transformX+this.wrapperWidth<this.scrollListWidth,a="left")):(e="height",g=this.wrapperHeight,$=this.scrollListHeight-(this.hiddenItems.length?this.operationHeight:0),w=this.addButtonHeight,a="top",o=-this.transformY,this.pingTop=this.transformY<0,this.pingBottom=-this.transformY+this.wrapperHeight<this.scrollListHeight);let it=g;if($+w>g&&(it=g-w),!Q.length)return this.hiddenItems=[],void this.cdr.markForCheck();const rt=Q.length;let Pt=rt;for(let tt=0;tt<rt;tt+=1)if(ot(tt)+(Q[tt]||st)[e]>o+it){Pt=tt-1;break}let Bt=0;for(let tt=rt-1;tt>=0;tt-=1)if(ot(tt)<o){Bt=tt+1;break}const Qt=Q.slice(0,Bt),Zt=Q.slice(Pt+1);this.hiddenItems=[...Qt,...Zt],this.cdr.markForCheck()}getLayoutDirection(){return this.dir&&"rtl"===this.dir.value?"rtl":"ltr"}setTabFocus(e){}ngOnChanges(e){const{position:a}=e;a&&!a.isFirstChange()&&(this.alignInkBarToSelectedTab(),this.lockAnimation(),this.updateScrollListPosition())}static#t=this.\u0275fac=function(a){return new(a||c)(t.rXU(t.gRc),t.rXU(t.SKi),t.rXU(R.Xj),t.rXU(A.xH),t.rXU(Y.dS,8))};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["nz-tabs-nav"]],contentQueries:function(a,o,g){if(1&a&&t.wni(g,mt,5),2&a){let $;t.mGM($=t.lsd())&&(o.items=$)}},viewQuery:function(a,o){if(1&a&&(t.GBs(G,7),t.GBs(q,7),t.GBs(ut,7),t.GBs(dt,5),t.GBs(pt,7)),2&a){let g;t.mGM(g=t.lsd())&&(o.navWarpRef=g.first),t.mGM(g=t.lsd())&&(o.navListRef=g.first),t.mGM(g=t.lsd())&&(o.operationRef=g.first),t.mGM(g=t.lsd())&&(o.addBtnRef=g.first),t.mGM(g=t.lsd())&&(o.inkBar=g.first)}},hostAttrs:[1,"ant-tabs-nav"],hostBindings:function(a,o){1&a&&t.bIt("keydown",function($){return o.handleKeydown($)})},inputs:{position:"position",addable:"addable",hideBar:"hideBar",addIcon:"addIcon",inkBarAnimated:"inkBarAnimated",extraTemplate:"extraTemplate",selectedIndex:"selectedIndex"},outputs:{indexFocused:"indexFocused",selectFocusedIndex:"selectFocusedIndex",addClicked:"addClicked",tabScroll:"tabScroll"},exportAs:["nzTabsNav"],standalone:!0,features:[t.OA$,t.aNF],ngContentSelectors:et,decls:9,vars:16,consts:[["navWarp",""],["navList",""],[1,"ant-tabs-nav-wrap"],["nzTabScrollList","","role","tablist",1,"ant-tabs-nav-list",3,"offsetChange","tabScroll"],["role","tab","nz-tab-add-button","",3,"addIcon","click",4,"ngIf"],["nz-tabs-ink-bar","",3,"hidden","position","animated"],[3,"addClicked","selected","addIcon","addable","items"],["class","ant-tabs-extra-content",4,"ngIf"],["role","tab","nz-tab-add-button","",3,"click","addIcon"],[1,"ant-tabs-extra-content"],[3,"ngTemplateOutlet"]],template:function(a,o){if(1&a){const g=t.RV6();t.NAR(),t.j41(0,"div",2,0)(2,"div",3,1),t.bIt("offsetChange",function(w){return t.eBV(g),t.Njj(o.onOffsetChange(w))})("tabScroll",function(w){return t.eBV(g),t.Njj(o.tabScroll.emit(w))}),t.SdG(4),t.DNE(5,Z,1,2,"button",4),t.nrm(6,"div",5),t.k0s()(),t.j41(7,"nz-tab-nav-operation",6),t.bIt("addClicked",function(){return t.eBV(g),t.Njj(o.addClicked.emit())})("selected",function(w){return t.eBV(g),t.Njj(o.onSelectedFromMenu(w))}),t.k0s(),t.DNE(8,at,2,1,"div",7)}2&a&&(t.AVh("ant-tabs-nav-wrap-ping-left",o.pingLeft)("ant-tabs-nav-wrap-ping-right",o.pingRight)("ant-tabs-nav-wrap-ping-top",o.pingTop)("ant-tabs-nav-wrap-ping-bottom",o.pingBottom),t.R7$(5),t.Y8G("ngIf",o.showAddButton),t.R7$(),t.Y8G("hidden",o.hideBar)("position",o.position)("animated",o.inkBarAnimated),t.R7$(),t.Y8G("addIcon",o.addIcon)("addable",o.addable)("items",o.hiddenItems),t.R7$(),t.Y8G("ngIf",o.extraTemplate))},dependencies:[yt,m.bT,dt,pt,ut,m.T3],encapsulation:2,changeDetection:0})}return c})(),Ct=(()=>{class c{constructor(){this.content=null,this.active=!1,this.animated=!0,this.forceRender=!1,this.hasBeenActive=!1}ngOnChanges(e){const{active:a}=e;a?.currentValue&&(this.hasBeenActive=!0)}static#t=this.\u0275fac=function(a){return new(a||c)};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["","nz-tab-body",""]],hostAttrs:[1,"ant-tabs-tabpane"],hostVars:10,hostBindings:function(a,o){2&a&&(t.zvX("@tabSwitchMotion",o.active?"enter":"leave")("@.disabled",!o.animated),t.BMQ("tabindex",o.active?0:-1)("aria-hidden",!o.active),t.xc7("overflow-y",o.animated?o.active?null:"none":null),t.AVh("ant-tabs-tabpane-active",o.active)("ant-tabs-tabpane-hidden",o.animated?null:!o.active))},inputs:{content:"content",active:"active",animated:"animated",forceRender:"forceRender"},exportAs:["nzTabBody"],standalone:!0,features:[t.OA$,t.aNF],attrs:lt,decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(a,o){1&a&&t.DNE(0,kt,2,1,"ng-container",0),2&a&&t.Y8G("ngIf",o.hasBeenActive||o.forceRender)},dependencies:[m.bT,m.T3],encapsulation:2,data:{animation:[z.eF]},changeDetection:0})}return c})(),ft=(()=>{class c{constructor(){this.closeIcon="close"}static#t=this.\u0275fac=function(a){return new(a||c)};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["nz-tab-close-button"],["button","nz-tab-close-button",""]],hostAttrs:["aria-label","Close tab","type","button",1,"ant-tabs-tab-remove"],inputs:{closeIcon:"closeIcon"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(a,o){1&a&&t.DNE(0,jt,2,1,"ng-container",0),2&a&&t.Y8G("nzStringTemplateOutlet",o.closeIcon)},dependencies:[O.C,O.m,d.Y3,d.Dn],encapsulation:2})}return c})(),Mt=(()=>{class c{constructor(e){this.templateRef=e}static#t=this.\u0275fac=function(a){return new(a||c)(t.rXU(t.C4Q,1))};static#e=this.\u0275dir=t.FsC({type:c,selectors:[["ng-template","nzTabLink",""]],exportAs:["nzTabLinkTemplate"],standalone:!0})}return c})(),Ot=(()=>{class c{constructor(e,a){this.elementRef=e,this.routerLink=a}static#t=this.\u0275fac=function(a){return new(a||c)(t.rXU(t.aKT),t.rXU(B.Wk,10))};static#e=this.\u0275dir=t.FsC({type:c,selectors:[["a","nz-tab-link",""]],exportAs:["nzTabLink"],standalone:!0})}return c})(),bt=(()=>{class c{static#t=this.\u0275fac=function(a){return new(a||c)};static#e=this.\u0275dir=t.FsC({type:c,selectors:[["","nz-tab",""]],exportAs:["nzTab"],standalone:!0})}return c})();const It=new t.nKC("NZ_TAB_SET");let gt=(()=>{class c{get content(){return this.template||this.contentTemplate}get label(){return this.nzTitle||this.nzTabLinkTemplateDirective?.templateRef}constructor(e){this.closestTabSet=e,this.nzTitle="",this.nzClosable=!1,this.nzCloseIcon="close",this.nzDisabled=!1,this.nzForceRender=!1,this.nzSelect=new t.bkB,this.nzDeselect=new t.bkB,this.nzClick=new t.bkB,this.nzContextmenu=new t.bkB,this.template=null,this.isActive=!1,this.position=null,this.origin=null,this.stateChanges=new l.B}ngOnChanges(e){const{nzTitle:a,nzDisabled:o,nzForceRender:g}=e;(a||o||g)&&this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete()}static#t=this.\u0275fac=function(a){return new(a||c)(t.rXU(It))};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["nz-tab"]],contentQueries:function(a,o,g){if(1&a&&(t.wni(g,Mt,5),t.wni(g,bt,5,t.C4Q),t.wni(g,Ot,5)),2&a){let $;t.mGM($=t.lsd())&&(o.nzTabLinkTemplateDirective=$.first),t.mGM($=t.lsd())&&(o.template=$.first),t.mGM($=t.lsd())&&(o.linkDirective=$.first)}},viewQuery:function(a,o){if(1&a&&t.GBs(At,7),2&a){let g;t.mGM(g=t.lsd())&&(o.contentTemplate=g.first)}},inputs:{nzTitle:"nzTitle",nzClosable:"nzClosable",nzCloseIcon:"nzCloseIcon",nzDisabled:"nzDisabled",nzForceRender:"nzForceRender"},outputs:{nzSelect:"nzSelect",nzDeselect:"nzDeselect",nzClick:"nzClick",nzContextmenu:"nzContextmenu"},exportAs:["nzTab"],standalone:!0,features:[t.OA$,t.aNF],ngContentSelectors:Ut,decls:4,vars:0,consts:[["tabLinkTemplate",""],["contentTemplate",""]],template:function(a,o){1&a&&(t.NAR(Rt),t.DNE(0,Nt,1,0,"ng-template",null,0,t.C5r)(2,$t,1,0,"ng-template",null,1,t.C5r))},encapsulation:2,changeDetection:0})}return(0,v.Cg)([(0,f.H3)()],c.prototype,"nzClosable",void 0),(0,v.Cg)([(0,f.H3)()],c.prototype,"nzDisabled",void 0),(0,v.Cg)([(0,f.H3)()],c.prototype,"nzForceRender",void 0),c})();class Kt{}let Ht=0,zt=(()=>{class c{get nzSelectedIndex(){return this.selectedIndex}set nzSelectedIndex(e){this.indexToSelect=(0,_.OE)(e,null)}get position(){return-1===["top","bottom"].indexOf(this.nzTabPosition)?"vertical":"horizontal"}get addable(){return"editable-card"===this.nzType&&!this.nzHideAdd}get closable(){return"editable-card"===this.nzType}get line(){return"line"===this.nzType}get inkBarAnimated(){return this.line&&("boolean"==typeof this.nzAnimated?this.nzAnimated:this.nzAnimated.inkBar)}get tabPaneAnimated(){return"boolean"==typeof this.nzAnimated?this.nzAnimated:this.nzAnimated.tabPane}constructor(e,a,o,g,$){this.nzConfigService=e,this.ngZone=a,this.cdr=o,this.directionality=g,this.router=$,this._nzModuleName="tabs",this.nzTabPosition="top",this.nzCanDeactivate=null,this.nzAddIcon="plus",this.nzTabBarStyle=null,this.nzType="line",this.nzSize="default",this.nzAnimated=!0,this.nzTabBarGutter=void 0,this.nzHideAdd=!1,this.nzCentered=!1,this.nzHideAll=!1,this.nzLinkRouter=!1,this.nzLinkExact=!0,this.nzSelectChange=new t.bkB(!0),this.nzSelectedIndexChange=new t.bkB,this.nzTabListScroll=new t.bkB,this.nzClose=new t.bkB,this.nzAdd=new t.bkB,this.allTabs=new t.rOR,this.tabs=new t.rOR,this.dir="ltr",this.destroy$=new l.B,this.indexToSelect=0,this.selectedIndex=null,this.tabLabelSubscription=u.yU.EMPTY,this.tabsSubscription=u.yU.EMPTY,this.canDeactivateSubscription=u.yU.EMPTY,this.tabSetId=Ht++}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe((0,F.Q)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.tabs.destroy(),this.tabLabelSubscription.unsubscribe(),this.tabsSubscription.unsubscribe(),this.canDeactivateSubscription.unsubscribe()}ngAfterContentInit(){this.ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>this.setUpRouter())}),this.subscribeToTabLabels(),this.subscribeToAllTabChanges(),this.tabsSubscription=this.tabs.changes.subscribe(()=>{if(this.clampTabIndex(this.indexToSelect)===this.selectedIndex){const a=this.tabs.toArray();for(let o=0;o<a.length;o++)if(a[o].isActive){this.indexToSelect=this.selectedIndex=o;break}}this.subscribeToTabLabels(),this.cdr.markForCheck()})}ngAfterContentChecked(){const e=this.indexToSelect=this.clampTabIndex(this.indexToSelect);if(this.selectedIndex!==e){const a=null==this.selectedIndex;a||this.nzSelectChange.emit(this.createChangeEvent(e)),Promise.resolve().then(()=>{this.tabs.forEach((o,g)=>o.isActive=g===e),a||this.nzSelectedIndexChange.emit(e)})}this.tabs.forEach((a,o)=>{a.position=o-e,null!=this.selectedIndex&&0===a.position&&!a.origin&&(a.origin=e-this.selectedIndex)}),this.selectedIndex!==e&&(this.selectedIndex=e,this.cdr.markForCheck())}onClose(e,a){a.preventDefault(),a.stopPropagation(),this.nzClose.emit({index:e})}onAdd(){this.nzAdd.emit()}clampTabIndex(e){return Math.min(this.tabs.length-1,Math.max(e||0,0))}createChangeEvent(e){const a=new Kt;return a.index=e,this.tabs&&this.tabs.length&&(a.tab=this.tabs.toArray()[e],this.tabs.forEach((o,g)=>{g!==e&&o.nzDeselect.emit()}),a.tab.nzSelect.emit()),a}subscribeToTabLabels(){this.tabLabelSubscription&&this.tabLabelSubscription.unsubscribe(),this.tabLabelSubscription=(0,E.h)(...this.tabs.map(e=>e.stateChanges)).subscribe(()=>this.cdr.markForCheck())}subscribeToAllTabChanges(){this.allTabs.changes.pipe((0,U.Z)(this.allTabs)).subscribe(e=>{this.tabs.reset(e.filter(a=>a.closestTabSet===this)),this.tabs.notifyOnChanges()})}canDeactivateFun(e,a){return"function"==typeof this.nzCanDeactivate?(0,f.cG)(this.nzCanDeactivate(e,a)).pipe((0,i.$)(),(0,F.Q)(this.destroy$)):(0,P.of)(!0)}clickNavItem(e,a,o){e.nzDisabled||(e.nzClick.emit(),this.isRouterLinkClickEvent(a,o)||this.setSelectedIndex(a))}isRouterLinkClickEvent(e,a){const o=a.target;return!!this.nzLinkRouter&&!!this.tabs.toArray()[e]?.linkDirective?.elementRef.nativeElement.contains(o)}contextmenuNavItem(e,a){e.nzDisabled||e.nzContextmenu.emit(a)}setSelectedIndex(e){this.canDeactivateSubscription.unsubscribe(),this.canDeactivateSubscription=this.canDeactivateFun(this.selectedIndex,e).subscribe(a=>{a&&(this.nzSelectedIndex=e,this.tabNavBarRef.focusIndex=e,this.cdr.markForCheck())})}getTabIndex(e,a){return e.nzDisabled?null:this.selectedIndex===a?0:-1}getTabContentId(e){return`nz-tabs-${this.tabSetId}-tab-${e}`}setUpRouter(){if(this.nzLinkRouter){if(!this.router)throw new Error(`${N.H3} you should import 'RouterModule' if you want to use 'nzLinkRouter'!`);this.router.events.pipe((0,F.Q)(this.destroy$),(0,X.p)(e=>e instanceof B.wF),(0,U.Z)(!0),(0,x.c)(0)).subscribe(()=>{this.updateRouterActive(),this.cdr.markForCheck()})}}updateRouterActive(){if(this.router.navigated){const e=this.findShouldActiveTabIndex();e!==this.selectedIndex&&this.setSelectedIndex(e),this.nzHideAll=-1===e}}findShouldActiveTabIndex(){const e=this.tabs.toArray(),a=this.isLinkActive(this.router);return e.findIndex(o=>{const g=o.linkDirective;return!!g&&a(g.routerLink)})}isLinkActive(e){return a=>!!a&&e.isActive(a.urlTree||"",{paths:this.nzLinkExact?"exact":"subset",queryParams:this.nzLinkExact?"exact":"subset",fragment:"ignored",matrixParams:"ignored"})}static#t=this.\u0275fac=function(a){return new(a||c)(t.rXU(D.yx),t.rXU(t.SKi),t.rXU(t.gRc),t.rXU(Y.dS,8),t.rXU(B.Ix,8))};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["nz-tabset"]],contentQueries:function(a,o,g){if(1&a&&t.wni(g,gt,5),2&a){let $;t.mGM($=t.lsd())&&(o.allTabs=$)}},viewQuery:function(a,o){if(1&a&&t.GBs(_t,5),2&a){let g;t.mGM(g=t.lsd())&&(o.tabNavBarRef=g.first)}},hostAttrs:[1,"ant-tabs"],hostVars:24,hostBindings:function(a,o){2&a&&t.AVh("ant-tabs-card","card"===o.nzType||"editable-card"===o.nzType)("ant-tabs-editable","editable-card"===o.nzType)("ant-tabs-editable-card","editable-card"===o.nzType)("ant-tabs-centered",o.nzCentered)("ant-tabs-rtl","rtl"===o.dir)("ant-tabs-top","top"===o.nzTabPosition)("ant-tabs-bottom","bottom"===o.nzTabPosition)("ant-tabs-left","left"===o.nzTabPosition)("ant-tabs-right","right"===o.nzTabPosition)("ant-tabs-default","default"===o.nzSize)("ant-tabs-small","small"===o.nzSize)("ant-tabs-large","large"===o.nzSize)},inputs:{nzSelectedIndex:"nzSelectedIndex",nzTabPosition:"nzTabPosition",nzTabBarExtraContent:"nzTabBarExtraContent",nzCanDeactivate:"nzCanDeactivate",nzAddIcon:"nzAddIcon",nzTabBarStyle:"nzTabBarStyle",nzType:"nzType",nzSize:"nzSize",nzAnimated:"nzAnimated",nzTabBarGutter:"nzTabBarGutter",nzHideAdd:"nzHideAdd",nzCentered:"nzCentered",nzHideAll:"nzHideAll",nzLinkRouter:"nzLinkRouter",nzLinkExact:"nzLinkExact"},outputs:{nzSelectChange:"nzSelectChange",nzSelectedIndexChange:"nzSelectedIndexChange",nzTabListScroll:"nzTabListScroll",nzClose:"nzClose",nzAdd:"nzAdd"},exportAs:["nzTabset"],standalone:!0,features:[t.Jv_([{provide:It,useExisting:c}]),t.aNF],decls:4,vars:12,consts:[[3,"ngStyle","selectedIndex","inkBarAnimated","addable","addIcon","hideBar","position","extraTemplate","tabScroll","selectFocusedIndex","addClicked",4,"ngIf"],[1,"ant-tabs-content-holder"],[1,"ant-tabs-content"],["role","tabpanel","nz-tab-body","",3,"id","active","content","forceRender","animated",4,"ngFor","ngForOf"],[3,"tabScroll","selectFocusedIndex","addClicked","ngStyle","selectedIndex","inkBarAnimated","addable","addIcon","hideBar","position","extraTemplate"],["class","ant-tabs-tab",3,"margin-right","margin-bottom","ant-tabs-tab-active","ant-tabs-tab-disabled","click","contextmenu",4,"ngFor","ngForOf"],[1,"ant-tabs-tab",3,"click","contextmenu"],["type","button","role","tab","nzTabNavItem","","cdkMonitorElementFocus","",1,"ant-tabs-tab-btn",3,"id","disabled","tab","active"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["type","button","nz-tab-close-button","",3,"closeIcon","click",4,"ngIf"],["type","button","nz-tab-close-button","",3,"click","closeIcon"],["role","tabpanel","nz-tab-body","",3,"id","active","content","forceRender","animated"]],template:function(a,o){1&a&&(t.DNE(0,Xt,2,9,"nz-tabs-nav",0),t.j41(1,"div",1)(2,"div",2),t.DNE(3,Vt,1,6,"div",3),t.k0s()()),2&a&&(t.Y8G("ngIf",o.tabs.length||o.addable),t.R7$(2),t.AVh("ant-tabs-content-top","top"===o.nzTabPosition)("ant-tabs-content-bottom","bottom"===o.nzTabPosition)("ant-tabs-content-left","left"===o.nzTabPosition)("ant-tabs-content-right","right"===o.nzTabPosition)("ant-tabs-content-animated",o.tabPaneAnimated),t.R7$(),t.Y8G("ngForOf",o.tabs))},dependencies:[_t,m.bT,m.B3,m.Sq,mt,r.Pd,r.vR,O.C,O.m,ft,Ct],encapsulation:2})}return(0,v.Cg)([(0,D.H4)()],c.prototype,"nzType",void 0),(0,v.Cg)([(0,D.H4)()],c.prototype,"nzSize",void 0),(0,v.Cg)([(0,D.H4)()],c.prototype,"nzAnimated",void 0),(0,v.Cg)([(0,D.H4)()],c.prototype,"nzTabBarGutter",void 0),(0,v.Cg)([(0,f.H3)()],c.prototype,"nzHideAdd",void 0),(0,v.Cg)([(0,f.H3)()],c.prototype,"nzCentered",void 0),(0,v.Cg)([(0,f.H3)()],c.prototype,"nzHideAll",void 0),(0,v.Cg)([(0,f.H3)()],c.prototype,"nzLinkRouter",void 0),(0,v.Cg)([(0,f.H3)()],c.prototype,"nzLinkExact",void 0),c})(),Jt=(()=>{class c{static#t=this.\u0275fac=function(a){return new(a||c)};static#e=this.\u0275mod=t.$C({type:c});static#n=this.\u0275inj=t.G2t({imports:[zt,_t,ut,dt,ft]})}return c})()}}]);