"use strict";(self.webpackChunkwebui=self.webpackChunkwebui||[]).push([[584],{584:(an,T,r)=>{r.r(T),r.d(T,{AdminModule:()=>on});var h=r(1368),c=r(940),j=r(1800),q=r(3351),l=r(3128),H=r(2032),G=r(2532),p=r(5128),u=r(4716),L=r(7180),t=r(4496);const V=["test"],K=["editor"];function Z(i,s){1&i&&t.wR5(0,"app-input-product",9),2&i&&t.E7m("formControl",s.control)}const W=()=>[16,16];let X=(()=>{class i{constructor(){this.fields=[{key:"test",type:"text",label:"test"},{key:"zzz",type:"template",label:"zzz",template:this.test},{key:"abc",type:"table",label:"abc",children:[{key:"a",type:"number",label:"A"},{key:"b",type:"number",label:"B"},{key:"c",type:"table",label:"def",children:[{key:"d",type:"number",label:"D"},{key:"e",type:"number",label:"E"}]},{key:"f",type:"object",label:"C",children:[{key:"a",type:"number",label:"A"},{key:"b",type:"number",label:"B"}]}]}],this.values={test:"\u5f20\u6770\u4e00",abc:[{a:1,b:2,f:{a:2,b:3}}]}}ngAfterViewInit(){setTimeout(()=>{this.fields[1].template=this.test})}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-dash"]],viewQuery:function(n,o){if(1&n&&(t.CC$(V,5),t.CC$(K,5)),2&n){let a;t.wto(a=t.Gqi())&&(o.test=a.first),t.wto(a=t.Gqi())&&(o.editor=a.first)}},standalone:!0,features:[t.UHJ],decls:21,vars:2,consts:[[3,"nzGutter"],["nzSpan","8"],["model","gateway","title","\u7f51\u5173\u603b\u6570"],["model","device","title","\u8bbe\u5907\u603b\u6570"],["model","product","title","\u4ea7\u54c1\u603b\u6570"],["model","project","title","\u9879\u76ee\u603b\u6570"],["model","space","title","\u7a7a\u95f4\u603b\u6570"],["model","user","title","\u7528\u6237\u603b\u6570"],["test",""],[3,"formControl"]],template:function(n,o){1&n&&(t.I0R(0,"nz-row",0)(1,"nz-col",1)(2,"nz-card"),t.wR5(3,"app-count",2),t.C$Y()(),t.I0R(4,"nz-col",1)(5,"nz-card"),t.wR5(6,"app-count",3),t.C$Y()(),t.I0R(7,"nz-col",1)(8,"nz-card"),t.wR5(9,"app-count",4),t.C$Y()(),t.I0R(10,"nz-col",1)(11,"nz-card"),t.wR5(12,"app-count",5),t.C$Y()(),t.I0R(13,"nz-col",1)(14,"nz-card"),t.wR5(15,"app-count",6),t.C$Y()(),t.I0R(16,"nz-col",1)(17,"nz-card"),t.wR5(18,"app-count",7),t.C$Y()()(),t.yuY(19,Z,1,1,"ng-template",null,8,t.gJz)),2&n&&t.E7m("nzGutter",t.q4q(1,W))},dependencies:[H.U,G.ox,G.QD,p.Q9,u.y,u.ue,L.a,u.sl,u.ug]})}return i})();var tt=r(556),d=r(460),et=r(268);let z=(()=>{class i{get value(){return this._value}set value(e){this._value=e,this.onChange(e)}constructor(e){this.rs=e,this.options=[],this._value="",this.load()}ngOnInit(){}load(){this.rs.get("protocol/list").subscribe(e=>{this.options=e.data.map(n=>({value:n.name,label:n.label}))})}registerOnChange(e){this.onChange=e}registerOnTouched(e){}setDisabledState(e){}writeValue(e){this._value=e}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(l.Cm))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-input-protocol"]],standalone:!0,features:[t.M5G([{provide:u.Y6,useExisting:(0,t.wd)(()=>i),multi:!0}]),t.UHJ],decls:1,vars:2,consts:[[3,"nzOptions","ngModel","ngModelChange"]],template:function(n,o){1&n&&(t.I0R(0,"nz-select",0),t.iHE("ngModelChange",function(_){return t.kNx(o.value,_)||(o.value=_),_}),t.C$Y()),2&n&&(t.E7m("nzOptions",o.options),t.OKB("ngModel",o.value))},dependencies:[et.Mh,u.y,u.ue,u._G],styles:["nz-select[_ngcontent-%COMP%]{width:100%}"]})}return i})();var f=r(9432);const nt=["form"],it=["chooseProtocol"];function ot(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",5),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}function at(i,s){1&i&&t.wR5(0,"app-input-protocol",6),2&i&&t.E7m("formControl",s.control)}let x=(()=>{class i{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u4ea7\u54c1"},{key:"keywords",label:"\u5173\u952e\u5b57",type:"tags",default:[]},{key:"icon",label:"\u56fe\u6807",type:"text"},{key:"protocol",label:"\u534f\u8bae",type:"template",template:this.chooseProtocol},{key:"url",label:"\u94fe\u63a5",type:"text"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.fields=[],this.values={}}ngAfterViewInit(){setTimeout(()=>this.build(),1)}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.rs.get("product/"+this.id).subscribe(e=>{this.values=e.data})}onSubmit(){this.form.valid?this.rs.post(`product/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/product/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-product-edit"]],viewQuery:function(n,o){if(1&n&&(t.CC$(nt,5),t.CC$(it,5)),2&n){let a;t.wto(a=t.Gqi())&&(o.form=a.first),t.wto(a=t.Gqi())&&(o.chooseProtocol=a.first)}},standalone:!0,features:[t.UHJ],decls:7,vars:4,consts:[[3,"nzTitle","nzExtra"],[3,"fields","values"],["form",""],["extraTemplate",""],["chooseProtocol",""],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,ot,2,0,"ng-template",null,3,t.gJz)(5,at,1,1,"ng-template",null,4,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzTitle","\u4ea7\u54c1"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[h.MD,u.sl,u.ue,u.ug,d.Ez,p.Q9,l.qq,z]})}return i})();var b=r(4408),y=r(3436),m=r(740),g=r(9936),k=r(1316),w=r(3616),E=r(8033),D=r(2420),I=r(6208),st=r(1900);const lt=["*"],P="collapse";let ut=(()=>{class i{constructor(e,n,o,a){this.nzConfigService=e,this.cdr=n,this.directionality=o,this.destroy$=a,this._nzModuleName=P,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(P).pipe((0,w.a)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,w.a)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(e){this.listOfNzCollapsePanelComponent.push(e)}removePanel(e){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(e),1)}click(e){this.nzAccordion&&!e.nzActive&&this.listOfNzCollapsePanelComponent.filter(n=>n!==e).forEach(n=>{n.nzActive&&(n.nzActive=!1,n.nzActiveChange.emit(n.nzActive),n.markForCheck())}),e.nzActive=!e.nzActive,e.nzActiveChange.emit(e.nzActive)}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(E.gl),t.GI1(t.kD9),t.GI1(st.yG,8),t.GI1(D.sz))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(n,o){2&n&&t.eAK("ant-collapse-icon-position-left","left"===o.nzExpandIconPosition)("ant-collapse-icon-position-right","right"===o.nzExpandIconPosition)("ant-collapse-ghost",o.nzGhost)("ant-collapse-borderless",!o.nzBordered)("ant-collapse-rtl","rtl"===o.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[t.M5G([D.sz]),t.UHJ],ngContentSelectors:lt,decls:1,vars:0,template:function(n,o){1&n&&(t.kPM(),t._Xx(0))},encapsulation:2,changeDetection:0})}return(0,k.UN)([(0,E.Mb)(),(0,I.U7)()],i.prototype,"nzAccordion",void 0),(0,k.UN)([(0,E.Mb)(),(0,I.U7)()],i.prototype,"nzBordered",void 0),(0,k.UN)([(0,E.Mb)(),(0,I.U7)()],i.prototype,"nzGhost",void 0),i})();var v=r(9268);const pt=["editor"];function dt(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}let mt=(()=>{class i{constructor(e,n){this.rs=e,this.ms=n,this.arguments=[{label:"\u53d8\u91cf",key:"name",type:"text"},{label:"\u540d\u79f0",key:"label",type:"text"},{label:"\u7c7b\u578b",key:"type",type:"select",default:"int",options:[{label:"\u6574\u6570",value:"int"},{label:"\u6d6e\u70b9\u6570",value:"float"},{label:"\u5e03\u5c14\u578b",value:"bool"},{label:"\u5b57\u7b26\u4e32",value:"text"},{label:"\u6570\u7ec4",value:"array"},{label:"\u5bf9\u8c61",value:"object"}]}],this.values={},this.fields=[{label:"",key:"actions",type:"list",children:[{label:"\u52a8\u4f5c",key:"name",type:"text"},{label:"\u540d\u79f0",key:"label",type:"text"},{label:"\u5f02\u6b65",key:"async",type:"switch"},{label:"\u8f93\u5165",key:"inputs",type:"table",children:this.arguments},{label:"\u8f93\u51fa",key:"outputs",type:"table",children:this.arguments}]}]}ngOnInit(){this.rs.get(`product/${this.product_id}/config/action`).subscribe(e=>{this.values={actions:e.data||[]}})}onSubmit(){this.rs.post(`product/${this.product_id}/config/action`,this.editor.value.actions).subscribe(n=>{this.ms.success("\u63d0\u793a","\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(l.Cm),t.GI1(v.GA))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-product-action-edit"]],viewQuery:function(n,o){if(1&n&&t.CC$(pt,5),2&n){let a;t.wto(a=t.Gqi())&&(o.editor=a.first)}},inputs:{product_id:"product_id"},standalone:!0,features:[t.UHJ],decls:5,vars:3,consts:[["nzTitle","\u52a8\u4f5c\u7f16\u8f91",3,"nzExtra"],[3,"fields","values"],["editor",""],["extraTemplate",""],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,dt,2,0,"ng-template",null,3,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[l.qq,d.Ez,p.Q9]})}return i})();const ht=["editor"];function ft(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}let _t=(()=>{class i{constructor(e,n){this.rs=e,this.ms=n,this.arguments=[{label:"\u53d8\u91cf",key:"name",type:"text"},{label:"\u540d\u79f0",key:"label",type:"text"},{label:"\u7c7b\u578b",key:"type",type:"select",default:"int",options:[{label:"\u6574\u6570",value:"int"},{label:"\u6d6e\u70b9\u6570",value:"float"},{label:"\u5e03\u5c14\u578b",value:"bool"},{label:"\u5b57\u7b26\u4e32",value:"text"},{label:"\u6570\u7ec4",value:"array"},{label:"\u5bf9\u8c61",value:"object"}]}],this.values={},this.fields=[{label:"",key:"events",type:"list",children:[{label:"\u7b49\u7ea7",key:"level",type:"number"},{label:"\u4e8b\u4ef6",key:"name",type:"text"},{label:"\u540d\u79f0",key:"label",type:"text"},{label:"\u8f93\u51fa",key:"outputs",type:"table",children:this.arguments}]}]}ngOnInit(){this.rs.get(`product/${this.product_id}/config/event`).subscribe(e=>{this.values={events:e.data||[]}})}onSubmit(){this.rs.post(`product/${this.product_id}/config/event`,this.editor.value.events).subscribe(n=>{this.ms.success("\u63d0\u793a","\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(l.Cm),t.GI1(v.GA))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-product-event-edit"]],viewQuery:function(n,o){if(1&n&&t.CC$(ht,5),2&n){let a;t.wto(a=t.Gqi())&&(o.editor=a.first)}},inputs:{product_id:"product_id"},standalone:!0,features:[t.UHJ],decls:5,vars:3,consts:[["nzTitle","\u4e8b\u4ef6\u7f16\u8f91",3,"nzExtra"],[3,"fields","values"],["editor",""],["extraTemplate",""],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,ft,2,0,"ng-template",null,3,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[l.qq,d.Ez,p.Q9]})}return i})();const bt=["editor"];function yt(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}let Ct=(()=>{class i{constructor(e,n){this.rs=e,this.ms=n,this.values={},this.fields=[{label:"",key:"mappers",type:"table",children:[]}]}ngOnInit(){this.rs.get(`product/${this.product_id}`).subscribe(e=>{this.rs.get(`protocol/${e.data.protocol}/mapper`).subscribe(o=>{this.fields[0].children=o.data,this.rs.get(`product/${this.product_id}/config/mapper`).subscribe(a=>{this.values={mappers:a.data||[]}})})})}onSubmit(){this.rs.post(`product/${this.product_id}/config/mapper`,this.editor.value.mappers).subscribe(n=>{this.ms.success("\u63d0\u793a","\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(l.Cm),t.GI1(v.GA))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-product-mapper-edit"]],viewQuery:function(n,o){if(1&n&&t.CC$(bt,5),2&n){let a;t.wto(a=t.Gqi())&&(o.editor=a.first)}},inputs:{product_id:"product_id"},standalone:!0,features:[t.UHJ],decls:5,vars:3,consts:[["nzTitle","\u6570\u636e\u6620\u5c04",3,"nzExtra"],[3,"fields","values"],["editor",""],["extraTemplate",""],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,yt,2,0,"ng-template",null,3,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[d.Ez,p.Q9,l.qq]})}return i})();const zt=["editor"];function gt(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}let vt=(()=>{class i{constructor(e,n){this.rs=e,this.ms=n,this.values={},this.fields=[{label:"",key:"pollers",type:"table",children:[]}]}ngOnInit(){this.rs.get(`product/${this.product_id}`).subscribe(e=>{this.rs.get(`protocol/${e.data.protocol}/poller`).subscribe(o=>{this.fields[0].children=o.data,this.rs.get(`product/${this.product_id}/config/poller`).subscribe(a=>{this.values={pollers:a.data||[]}})})})}onSubmit(){this.rs.post(`product/${this.product_id}/config/poller`,this.editor.value.pollers).subscribe(n=>{this.ms.success("\u63d0\u793a","\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(l.Cm),t.GI1(v.GA))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-product-poller-edit"]],viewQuery:function(n,o){if(1&n&&t.CC$(zt,5),2&n){let a;t.wto(a=t.Gqi())&&(o.editor=a.first)}},inputs:{product_id:"product_id"},standalone:!0,features:[t.UHJ],decls:5,vars:3,consts:[["nzTitle","\u6570\u636e\u8f6e\u8be2",3,"nzExtra"],[3,"fields","values"],["editor",""],["extraTemplate",""],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,gt,2,0,"ng-template",null,3,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[d.Ez,p.Q9,l.qq]})}return i})();const Et=["editor"];function kt(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}let It=(()=>{class i{constructor(e,n){this.rs=e,this.ms=n,this.values={},this.fields=[{label:"",key:"properties",type:"table",children:[{label:"\u53d8\u91cf",key:"name",type:"text"},{label:"\u540d\u79f0",key:"label",type:"text"},{label:"\u7c7b\u578b",key:"type",type:"select",default:"int",options:[{label:"\u6574\u6570",value:"int"},{label:"\u6d6e\u70b9\u6570",value:"float"},{label:"\u5e03\u5c14\u578b",value:"bool"},{label:"\u5b57\u7b26\u4e32",value:"text"},{label:"\u6570\u7ec4",value:"array"},{label:"\u5bf9\u8c61",value:"object"}]},{label:"\u5355\u4f4d",key:"unit",type:"text"},{label:"\u6a21\u5f0f",key:"mode",type:"select",default:"r",options:[{label:"\u53ea\u8bfb",value:"r"},{label:"\u8bfb\u5199",value:"rw"}]}]}]}ngOnInit(){this.rs.get(`product/${this.product_id}/config/property`).subscribe(e=>{this.values={properties:e.data||[]}})}onSubmit(){this.rs.post(`product/${this.product_id}/config/property`,this.editor.value.properties).subscribe(n=>{this.ms.success("\u63d0\u793a","\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(l.Cm),t.GI1(v.GA))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-product-property-edit"]],viewQuery:function(n,o){if(1&n&&t.CC$(Et,5),2&n){let a;t.wto(a=t.Gqi())&&(o.editor=a.first)}},inputs:{product_id:"product_id"},standalone:!0,features:[t.UHJ],decls:5,vars:3,consts:[["nzTitle","\u5c5e\u6027\u7f16\u8f91",3,"nzExtra"],[3,"fields","values"],["editor",""],["extraTemplate",""],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,kt,2,0,"ng-template",null,3,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[l.qq,d.Ez,p.Q9]})}return i})();function Tt(i,s){if(1&i&&t.wR5(0,"app-devices",10),2&i){const e=t.GaO();t.E7m("product_id",e.id)("project_id",e.project_id)}}function Gt(i,s){if(1&i&&t.wR5(0,"app-product-property-edit",11),2&i){const e=t.GaO();t.E7m("product_id",e.id)}}function xt(i,s){if(1&i&&t.wR5(0,"app-product-event-edit",11),2&i){const e=t.GaO();t.E7m("product_id",e.id)}}function wt(i,s){if(1&i&&t.wR5(0,"app-product-action-edit",11),2&i){const e=t.GaO();t.E7m("product_id",e.id)}}function Dt(i,s){if(1&i&&t.wR5(0,"app-product-mapper-edit",11),2&i){const e=t.GaO();t.E7m("product_id",e.id)}}function Pt(i,s){if(1&i&&t.wR5(0,"app-product-poller-edit",11),2&i){const e=t.GaO();t.E7m("product_id",e.id)}}function $t(i,s){1&i&&(t.I0R(0,"button",15),t.OEk(1,"\u7f16\u8f91"),t.C$Y())}function Ot(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",16),t.qCj("nzOnConfirm",function(){t.usT(e);const o=t.GaO(3);return t.CGJ(o.delete())}),t.OEk(1,"\u5220\u9664"),t.C$Y()}}function At(i,s){1&i&&(t.I0R(0,"nz-space"),t.yuY(1,$t,2,0,"button",13)(2,Ot,2,0,"button",14),t.C$Y())}function Rt(i,s){if(1&i&&t.yuY(0,At,3,0,"nz-space",12),2&i){const e=t.GaO();t.E7m("ngIf",!e.project_id)}}let Yt=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.base="/admin",this.value="",this.data={},this.fields=[{label:"ID",key:"id"},{label:"\u540d\u79f0",key:"name"},{label:"\u5173\u952e\u5b57",key:"keywords",type:"tags"},{label:"\u521b\u5efa\u65f6\u95f4",key:"created",type:"date"},{label:"\u8bf4\u660e",key:"description",span:2}]}ngOnInit(){this.route.parent?.snapshot.paramMap.has("project")&&(this.project_id=this.route.parent?.snapshot.paramMap.get("project"),this.base=`/project/${this.project_id}`),this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.rs.get(`product/${this.id}`,{}).subscribe(e=>{this.data=e.data})}delete(){this.rs.get(`product/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("admin/product")}),this.load()}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-product-detail"]],standalone:!0,features:[t.UHJ],decls:18,vars:3,consts:[["nzTitle","\u4ea7\u54c1\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u4ea7\u54c1\u8bbe\u5907"],["nz-tab",""],["nzTitle","\u4ea7\u54c1\u5c5e\u6027"],["nzTitle","\u4ea7\u54c1\u4e8b\u4ef6"],["nzTitle","\u4ea7\u54c1\u52a8\u4f5c"],["nzTitle","\u6570\u636e\u6620\u5c04"],["nzTitle","\u6570\u636e\u8f6e\u8be2"],["extra",""],[3,"product_id","project_id"],[3,"product_id"],[4,"ngIf"],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-info",1)(2,"nz-collapse"),t.I0R(3,"nz-tabset")(4,"nz-tab",2),t.yuY(5,Tt,1,2,"ng-template",3),t.C$Y(),t.I0R(6,"nz-tab",4),t.yuY(7,Gt,1,1,"ng-template",3),t.C$Y(),t.I0R(8,"nz-tab",5),t.yuY(9,xt,1,1,"ng-template",3),t.C$Y(),t.I0R(10,"nz-tab",6),t.yuY(11,wt,1,1,"ng-template",3),t.C$Y(),t.I0R(12,"nz-tab",7),t.yuY(13,Dt,1,1,"ng-template",3),t.C$Y(),t.I0R(14,"nz-tab",8),t.yuY(15,Pt,1,1,"ng-template",3),t.C$Y()()(),t.yuY(16,Rt,1,1,"ng-template",null,9,t.gJz)),2&n){const a=t.Gew(17);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("value",o.data)}},dependencies:[h.MD,h.u_,l.cr,p.Q9,b.Ud,d.Ez,b.UH,c.ER,y.GG,m.K6,m.g1,m.Yh,m._c,g.A,ut,mt,_t,Ct,vt,It]})}return i})();var $=r(6124),Ft=r(8572),St=r(6484),C=r(1496);const Mt=["form"];function Bt(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}let O=(()=>{class i{constructor(e,n,o,a,_){this.router=e,this.ms=n,this.msg=o,this.rs=a,this.route=_,this.base="/admin",this.id="",this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u7f51\u5173"},{key:"keywords",label:"\u5173\u952e\u5b57",type:"tags",default:[]},{key:"description",label:"\u8bf4\u660e",type:"textarea"},{key:"username",label:"MQTT\u7528\u6237\u540d",type:"text"},{key:"password",label:"MQTT\u5bc6\u7801",type:"text"},{key:"disabled",label:"\u7981\u7528",type:"switch"}],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}ngAfterViewInit(){}load(){this.rs.get(`gateway/${this.id}`).subscribe(e=>{this.values=e.data})}onSubmit(){this.form.valid?this.rs.post(`gateway/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl(`${this.base}/gateway/`+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(C.mU),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-gateway-edit"]],viewQuery:function(n,o){if(1&n&&t.CC$(Mt,5),2&n){let a;t.wto(a=t.Gqi())&&(o.form=a.first)}},standalone:!0,features:[t.UHJ],decls:5,vars:4,consts:[[3,"nzTitle","nzExtra"],[3,"fields","values"],["form",""],["extraTemplate",""],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,Bt,2,0,"ng-template",null,3,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzTitle","\u7f51\u5173"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[h.MD,d.Ez,p.Q9,l.qq]})}return i})();function Qt(i,s){}function Ut(i,s){1&i&&(t.I0R(0,"button",7),t.OEk(1,"\u7f16\u8f91"),t.C$Y())}function Jt(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",8),t.qCj("nzOnConfirm",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.delete())}),t.OEk(1,"\u5220\u9664"),t.C$Y()}}function Nt(i,s){1&i&&(t.I0R(0,"nz-space"),t.yuY(1,Ut,2,0,"button",5)(2,Jt,2,0,"button",6),t.C$Y())}let jt=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.base="/admin",this.data={},this.loading=!1,this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"project",label:"\u9879\u76ee",type:"link",link:()=>`${this.base}/project/${this.data.project_id}`},{key:"username",label:"\u7528\u6237\u540d"},{key:"password",label:"\u5bc6\u7801"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.loading=!0,this.rs.post("gateway/search",{filter:{id:this.id}}).subscribe(e=>{this.data=e.data[0]}).add(()=>this.loading=!1)}delete(){this.rs.get(`gateway/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl(`${this.base}/gateway`)})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-gateway-detail"]],standalone:!0,features:[t.UHJ],decls:7,vars:3,consts:[["nzTitle","\u7f51\u5173\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u62a5\u8b66\u65e5\u5fd7"],["nz-tab",""],["extra",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-info",1),t.I0R(2,"nz-tabset")(3,"nz-tab",2),t.yuY(4,Qt,0,0,"ng-template",3),t.C$Y()()(),t.yuY(5,Nt,3,0,"ng-template",null,4,t.gJz)),2&n){const a=t.Gew(6);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("value",o.data)}},dependencies:[h.MD,l.cr,p.Q9,b.Ud,b.UH,d.Ez,c.ER,y.GG,m.K6,m.g1,m.Yh,m._c]})}return i})();var qt=r(7448),A=r(9632),Ht=r(7260),Lt=r(7752),R=r(3264),Vt=r(7812),Kt=r(9688);const Zt=["form"];function Wt(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}let Y=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0},{key:"email",label:"\u90ae\u7bb1",type:"text"},{key:"cellphone",label:"\u624b\u673a\u53f7",type:"text"},{key:"disabled",label:"\u7981\u7528",type:"switch"},{key:"admin",label:"\u7ba1\u7406\u5458",type:"switch"}],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.rs.get("user/"+this.id).subscribe(e=>{this.values=e.data})}onSubmit(){this.form.valid?this.rs.post(`user/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/user/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-user-edit"]],viewQuery:function(n,o){if(1&n&&t.CC$(Zt,5),2&n){let a;t.wto(a=t.Gqi())&&(o.form=a.first)}},standalone:!0,features:[t.UHJ],decls:5,vars:4,consts:[[3,"nzTitle","nzExtra"],[3,"fields","values"],["form",""],["extraTemplate",""],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,Wt,2,0,"ng-template",null,3,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzTitle","\u7528\u6237"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[h.MD,d.Ez,p.Q9,l.qq]})}return i})(),Xt=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-user-detail"]],standalone:!0,features:[t.UHJ],decls:2,vars:0,template:function(n,o){1&n&&(t.I0R(0,"p"),t.OEk(1,"user-detail works!"),t.C$Y())}})}return i})();var te=r(1175),ee=r(6579);const ne=()=>[];let F=(()=>{class i{constructor(e,n){this.rs=e,this.ref=n,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/server/create"}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:o=>`/admin/server/${o.id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"port",sortable:!0,label:"\u7aef\u53e3",keyword:!0},{key:"status",label:"\u72b6\u6001"},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0},{key:"port",label:"\u7aef\u53e3",keyword:!0},{key:"status",label:"\u72b6\u6001"}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:o=>`/admin/server/${o.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:o=>{this.rs.get(`server/${o.id}/delete`).subscribe(a=>this.refresh())}},{icon:"play-circle",title:"\u542f\u52a8",action:o=>{this.rs.get(`server/${o.id}/open`).subscribe(a=>this.refresh())}},{icon:"close-circle",title:"\u505c\u6b62",action:o=>{this.rs.get(`server/${o.id}/close`).subscribe(a=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:o=>this.ref.close(o)}]}refresh(){this.search(this.query)}search(e){this.query=e,this.loading=!0,this.rs.post("server/search",e).subscribe(n=>{this.datum=n.data,this.total=n.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(l.Cm),t.GI1(C.U7,8))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-servers"]],standalone:!0,features:[t.UHJ],decls:1,vars:7,consts:[[3,"buttons","columns","operators","datum","total","loading","query"]],template:function(n,o){1&n&&(t.I0R(0,"im-smart-table",0),t.qCj("query",function(_){return o.search(_)}),t.C$Y()),2&n&&t.E7m("buttons",o.ref?t.q4q(6,ne):o.buttons)("columns",o.ref?o.columnsSelect:o.columns)("operators",o.ref?o.operatorsSelect:o.operators)("datum",o.datum)("total",o.total)("loading",o.loading)},dependencies:[h.MD,l.YP]})}return i})();const ie=["form"],oe=["chooseProtocol"];function ae(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",5),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}function se(i,s){1&i&&t.wR5(0,"app-input-protocol",6),2&i&&t.E7m("formControl",s.control)}let S=(()=>{class i{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u670d\u52a1\u7aef"},{key:"port",label:"\u7aef\u53e3",type:"number",min:1,max:65535,default:6e4},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae",type:"template",template:this.chooseProtocol,change:e=>setTimeout(()=>this.loadProtocolOptions(e))},{key:"protocol_options",label:"\u901a\u8baf\u534f\u8bae\u53c2\u6570",type:"object"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.fields=[],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}ngAfterViewInit(){setTimeout(()=>this.build(),1)}load(){this.rs.get("server/"+this.id).subscribe(e=>{this.values=e.data,this.loadProtocolOptions(this.values.protocol_name)})}loadProtocolOptions(e){e&&this.rs.get(`protocol/${e}/option`).subscribe(n=>{this.fields[4].children=n.data,this.form.group.setControl("protocol_options",this.form.build(n.data,this.form.value.protocol_options))})}onSubmit(){this.form.valid?this.rs.post(`server/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/server/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-servers-edit"]],viewQuery:function(n,o){if(1&n&&(t.CC$(ie,5),t.CC$(oe,5)),2&n){let a;t.wto(a=t.Gqi())&&(o.form=a.first),t.wto(a=t.Gqi())&&(o.chooseProtocol=a.first)}},standalone:!0,features:[t.UHJ],decls:7,vars:4,consts:[[3,"nzTitle","nzExtra"],[3,"fields","values"],["form",""],["extraTemplate",""],["chooseProtocol",""],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,ae,2,0,"ng-template",null,3,t.gJz)(5,se,1,1,"ng-template",null,4,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzTitle","\u670d\u52a1\u5668"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[h.MD,u.sl,u.ue,u.ug,d.Ez,p.Q9,l.qq,z]})}return i})();var M=r(3036);function le(i,s){}function re(i,s){1&i&&(t.I0R(0,"button",10),t.OEk(1,"\u7f16\u8f91"),t.C$Y())}function ce(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",11),t.qCj("nzOnConfirm",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.delete())}),t.OEk(1,"\u5220\u9664"),t.C$Y()}}function ue(i,s){1&i&&(t.I0R(0,"nz-space"),t.yuY(1,re,2,0,"button",8)(2,ce,2,0,"button",9),t.C$Y())}let pe=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.data={},this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"port",label:"\u7aef\u53e3"},{key:"disabled",label:"\u7981\u7528"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.load()}load(){this.rs.get(`server/${this.id}`).subscribe(e=>{this.data=e.data})}delete(){this.rs.get(`server/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("/admin/server")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-servers-detail"]],standalone:!0,features:[t.UHJ],decls:9,vars:4,consts:[["nzTitle","\u670d\u52a1\u5668\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzType","line"],["nzTitle","\u8fde\u63a5"],[3,"server_id"],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["extra",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-info",1),t.I0R(2,"nz-tabset",2)(3,"nz-tab",3),t.wR5(4,"app-links",4),t.C$Y(),t.I0R(5,"nz-tab",5),t.yuY(6,le,0,0,"ng-template",6),t.C$Y()()(),t.yuY(7,ue,3,0,"ng-template",null,7,t.gJz)),2&n){const a=t.Gew(8);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("value",o.data),t.yG2(3),t.E7m("server_id",o.id)}},dependencies:[h.MD,m.g1,m.Yh,m._c,p.Q9,l.cr,b.Ud,b.UH,d.Ez,c.ER,y.GG,M.e]})}return i})();var de=r(2605);let me=(()=>{class i{constructor(e,n){this.ms=e,this.rs=n,this.id="",this.server={},this.placeholder=""}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){this.id!==e&&(this.id=e,this.id&&this.load())}load(){console.log("load servers",this.id),this.rs.get("server/"+this.id).subscribe(e=>{e.data&&(this.server=e.data)})}select(){this.ms.create({nzTitle:"\u9009\u62e9",nzContent:F,nzData:this.data}).afterClose.subscribe(e=>{console.log(e),e&&(this.server=e,this.id=e.id,this.onChange(this.id))})}change(e){console.log("on change",e),this.id=e,this.onChange(e),this.load()}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(C.mU),t.GI1(l.Cm))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-input-server"]],inputs:{data:"data",placeholder:"placeholder"},standalone:!0,features:[t.M5G([{provide:u.Y6,useExisting:(0,t.wd)(()=>i),multi:!0}]),t.UHJ],decls:5,vars:3,consts:[["nz-input","",3,"placeholder","value","change"],["box",""],["type","button","nz-button","",3,"click"]],template:function(n,o){if(1&n){const a=t.KQA();t.I0R(0,"input",0,1),t.qCj("change",function(){t.usT(a);const N=t.Gew(1);return t.CGJ(o.change(N.value))}),t.C$Y(),t.I0R(2,"button",2),t.qCj("click",function(){return o.select()}),t.OEk(3,"\u9009\u62e9"),t.C$Y(),t.OEk(4)}2&n&&(t.E7m("placeholder",o.placeholder)("value",o.id),t.yG2(4),t.oRS("\n",o.server.name,"\n"))},dependencies:[d.Ez,de.cv]})}return i})();const he=["form"],fe=["chooseServer"],_e=["chooseProtocol"];function be(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",6),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}function ye(i,s){1&i&&t.wR5(0,"app-input-server",7),2&i&&t.E7m("formControl",s.control)}function Ce(i,s){1&i&&t.wR5(0,"app-input-protocol",7),2&i&&t.E7m("formControl",s.control)}let B=(()=>{class i{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0},{key:"server_id",label:"\u670d\u52a1\u5668",type:"template",template:this.chooseServer},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae",type:"template",template:this.chooseProtocol,change:e=>setTimeout(()=>this.loadProtocolOptions(e))},{key:"protocol_options",label:"\u901a\u8baf\u534f\u8bae\u53c2\u6570",type:"object"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.fields=[],this.values={}}ngAfterViewInit(){setTimeout(()=>this.build(),1)}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.rs.get("link/"+this.id).subscribe(e=>{this.values=e.data,this.loadProtocolOptions(this.values.protocol_name)})}loadProtocolOptions(e){e&&this.rs.get(`protocol/${e}/option`).subscribe(n=>{this.fields[4].children=n.data,this.form.group.setControl("protocol_options",this.form.build(n.data,this.form.value.protocol_options))})}onSubmit(){this.form.valid?this.rs.post(`link/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/link/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-links-edit"]],viewQuery:function(n,o){if(1&n&&(t.CC$(he,5),t.CC$(fe,5),t.CC$(_e,5)),2&n){let a;t.wto(a=t.Gqi())&&(o.form=a.first),t.wto(a=t.Gqi())&&(o.chooseServer=a.first),t.wto(a=t.Gqi())&&(o.chooseProtocol=a.first)}},standalone:!0,features:[t.UHJ],decls:9,vars:4,consts:[[3,"nzTitle","nzExtra"],[3,"fields","values"],["form",""],["extraTemplate",""],["chooseServer",""],["chooseProtocol",""],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,be,2,0,"ng-template",null,3,t.gJz)(5,ye,1,1,"ng-template",null,4,t.gJz)(7,Ce,1,1,"ng-template",null,5,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzTitle","\u8fde\u63a5"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[h.MD,u.sl,u.ue,u.ug,d.Ez,p.Q9,l.qq,me,z]})}return i})();function ze(i,s){}function ge(i,s){1&i&&(t.I0R(0,"button",9),t.OEk(1,"\u7f16\u8f91"),t.C$Y())}function ve(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",10),t.qCj("nzOnConfirm",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.delete())}),t.OEk(1,"\u5220\u9664"),t.C$Y()}}function Ee(i,s){1&i&&(t.I0R(0,"nz-space"),t.yuY(1,ge,2,0,"button",7)(2,ve,2,0,"button",8),t.C$Y())}let ke=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.data={},this.fields=[{key:"id",label:"ID"},{key:"server",label:"\u670d\u52a1\u5668",type:"link",link:()=>`/admin/server/${this.data.server_id}`},{key:"name",label:"\u540d\u79f0"},{key:"remote",label:"\u8fdc\u7a0b\u5730\u5740"},{key:"disabled",label:"\u7981\u7528"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.load()}load(){this.rs.get(`link/${this.id}`).subscribe(e=>{this.data=e.data})}delete(){this.rs.get(`link/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("/admin/link")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-links-detail"]],standalone:!0,features:[t.UHJ],decls:9,vars:4,consts:[["nzTitle","\u8fde\u63a5\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u8bbe\u5907"],[3,"tunnel_id"],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["extra",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-info",1),t.I0R(2,"nz-tabset")(3,"nz-tab",2),t.wR5(4,"app-devices",3),t.C$Y(),t.I0R(5,"nz-tab",4),t.yuY(6,ze,0,0,"ng-template",5),t.C$Y()()(),t.yuY(7,Ee,3,0,"ng-template",null,6,t.gJz)),2&n){const a=t.Gew(8);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("value",o.data),t.yG2(3),t.E7m("tunnel_id",o.id)}},dependencies:[h.MD,m.g1,m.Yh,m._c,p.Q9,l.cr,b.Ud,b.UH,d.Ez,c.ER,y.GG,g.A]})}return i})();var Ie=r(1388);const Te=["form"],Ge=["chooseProtocol"];function xe(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",5),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}function we(i,s){1&i&&t.wR5(0,"app-input-protocol",6),2&i&&t.E7m("formControl",s.control)}let Q=(()=>{class i{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u4e32\u53e3"},{key:"port_name",label:"\u7aef\u53e3",type:"select",options:this.ports},{key:"baud_rate",label:"\u6ce2\u7279\u7387",type:"select",default:9600,options:[{label:"150",value:150},{label:"200",value:200},{label:"300",value:300},{label:"600",value:600},{label:"1200",value:1200},{label:"1800",value:1800},{label:"2400",value:2400},{label:"4800",value:4800},{label:"9600",value:9600},{label:"19200",value:19200},{label:"38400",value:38400},{label:"57600",value:57600},{label:"115200",value:115200}]},{key:"data_bits",label:"\u5b57\u957f",type:"radio",options:[{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8}],default:8},{key:"parity_mode",label:"\u6821\u9a8c",type:"radio",options:[{label:"\u65e0",value:0},{label:"\u5947",value:1},{label:"\u5076",value:2},{label:"1",value:3},{label:"0",value:4}]},{key:"stop_bits",label:"\u505c\u6b62\u4f4d",type:"radio",options:[{label:"1",value:1},{label:"1.5",value:1.5,disabled:!0},{label:"2",value:2}]},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae",type:"template",template:this.chooseProtocol,change:e=>setTimeout(()=>this.loadProtocolOptions(e))},{key:"protocol_options",label:"\u901a\u8baf\u534f\u8bae\u53c2\u6570",type:"object"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.ports=[],this.fields=[],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load()),this.loadPorts()}ngAfterViewInit(){setTimeout(()=>this.build(),1)}load(){this.rs.get("serial/"+this.id).subscribe(e=>{this.values=e.data,this.loadProtocolOptions(this.values.protocol_name)})}loadPorts(){this.rs.get("serial/ports").subscribe(e=>{this.fields[2].options=e.data.map(n=>({value:n,label:n}))})}loadProtocolOptions(e){e&&this.rs.get(`protocol/${e}/option`).subscribe(n=>{this.fields[8].children=n.data,this.form.group.setControl("protocol_options",this.form.build(n.data,this.form.value.protocol_options))})}onSubmit(){this.form.valid?this.rs.post(`serial/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/serial/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-serials-edit"]],viewQuery:function(n,o){if(1&n&&(t.CC$(Te,5),t.CC$(Ge,5)),2&n){let a;t.wto(a=t.Gqi())&&(o.form=a.first),t.wto(a=t.Gqi())&&(o.chooseProtocol=a.first)}},standalone:!0,features:[t.UHJ],decls:7,vars:4,consts:[[3,"nzTitle","nzExtra"],[3,"fields","values"],["form",""],["extraTemplate",""],["chooseProtocol",""],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,xe,2,0,"ng-template",null,3,t.gJz)(5,we,1,1,"ng-template",null,4,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzTitle","\u4e32\u53e3"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[h.MD,u.sl,u.ue,u.ug,d.Ez,p.Q9,l.qq,z]})}return i})();function De(i,s){}function Pe(i,s){1&i&&(t.I0R(0,"button",9),t.OEk(1,"\u7f16\u8f91"),t.C$Y())}function $e(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",10),t.qCj("nzOnConfirm",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.delete())}),t.OEk(1,"\u5220\u9664"),t.C$Y()}}function Oe(i,s){1&i&&(t.I0R(0,"nz-space"),t.yuY(1,Pe,2,0,"button",7)(2,$e,2,0,"button",8),t.C$Y())}let Ae=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.data={},this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"net",label:"\u7f51\u7edc"},{key:"addr",label:"\u5730\u5740"},{key:"port_name",label:"\u7aef\u53e3"},{key:"disabled",label:"\u7981\u7528"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae"},{key:"baud_rate",label:"\u6ce2\u7279\u7387"},{key:"parity_mode",label:"\u5947\u5076\u6821\u9a8c",type:"select",options:["\u65e0\u6821\u9a8c NONE","\u5947\u6821\u9a8c ODD","\u5076\u6821\u9a8c EVEN","1\u6821\u9a8c MARK","0\u6821\u9a8c SPACE"]},{key:"stop_bits",label:"\u505c\u6b62\u4f4d"},{key:"data_bits",label:"\u5b57\u957f"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.load()}load(){this.rs.get(`serial/${this.id}`).subscribe(e=>{this.data=e.data})}delete(){this.rs.get(`client/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("/admin/client")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-serials-detail"]],standalone:!0,features:[t.UHJ],decls:9,vars:4,consts:[["nzTitle","\u4e32\u53e3\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u8bbe\u5907"],[3,"tunnel_id"],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["extra",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-info",1),t.I0R(2,"nz-tabset")(3,"nz-tab",2),t.wR5(4,"app-devices",3),t.C$Y(),t.I0R(5,"nz-tab",4),t.yuY(6,De,0,0,"ng-template",5),t.C$Y()()(),t.yuY(7,Oe,3,0,"ng-template",null,6,t.gJz)),2&n){const a=t.Gew(8);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("value",o.data),t.yG2(3),t.E7m("tunnel_id",o.id)}},dependencies:[h.MD,m.g1,m.Yh,m._c,p.Q9,l.cr,b.Ud,b.UH,d.Ez,c.ER,y.GG,g.A]})}return i})();var Re=r(1748);const Ye=["form"],Fe=["chooseProtocol"];function Se(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",5),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}function Me(i,s){1&i&&t.wR5(0,"app-input-protocol",6),2&i&&t.E7m("formControl",s.control)}let U=(()=>{class i{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u5ba2\u6237\u7aef"},{key:"net",label:"\u7f51\u7edc",type:"select",default:"tcp",options:[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"}]},{key:"addr",label:"\u5730\u5740",type:"text"},{key:"port",label:"\u7aef\u53e3",type:"number",min:1,max:65535},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae",type:"template",template:this.chooseProtocol,change:e=>setTimeout(()=>this.loadProtocolOptions(e))},{key:"protocol_options",label:"\u901a\u8baf\u534f\u8bae\u53c2\u6570",type:"object"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.fields=[],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}ngAfterViewInit(){setTimeout(()=>this.build(),1)}load(){this.rs.get("client/"+this.id).subscribe(e=>{this.values=e.data,this.loadProtocolOptions(this.values.protocol_name)})}loadProtocolOptions(e){e&&this.rs.get(`protocol/${e}/option`).subscribe(n=>{this.fields[6].children=n.data,this.form.group.setControl("protocol_options",this.form.build(n.data,this.form.value.protocol_options))})}onSubmit(){this.form.valid?this.rs.post(`client/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/client/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-clients-edit"]],viewQuery:function(n,o){if(1&n&&(t.CC$(Ye,5),t.CC$(Fe,5)),2&n){let a;t.wto(a=t.Gqi())&&(o.form=a.first),t.wto(a=t.Gqi())&&(o.chooseProtocol=a.first)}},standalone:!0,features:[t.UHJ],decls:7,vars:4,consts:[[3,"nzTitle","nzExtra"],[3,"fields","values"],["form",""],["extraTemplate",""],["chooseProtocol",""],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,Se,2,0,"ng-template",null,3,t.gJz)(5,Me,1,1,"ng-template",null,4,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzTitle","\u5ba2\u6237\u7aef"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[h.MD,u.sl,u.ue,u.ug,d.Ez,p.Q9,l.qq,z]})}return i})();function Be(i,s){}function Qe(i,s){1&i&&(t.I0R(0,"button",9),t.OEk(1,"\u7f16\u8f91"),t.C$Y())}function Ue(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",10),t.qCj("nzOnConfirm",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.delete())}),t.OEk(1,"\u5220\u9664"),t.C$Y()}}function Je(i,s){1&i&&(t.I0R(0,"nz-space"),t.yuY(1,Qe,2,0,"button",7)(2,Ue,2,0,"button",8),t.C$Y())}let Ne=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.data={},this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"net",label:"\u7f51\u7edc"},{key:"addr",label:"\u5730\u5740"},{key:"port",label:"\u7aef\u53e3"},{key:"disabled",label:"\u7981\u7528"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.load()}load(){this.rs.get(`client/${this.id}`).subscribe(e=>{this.data=e.data})}delete(){this.rs.get(`client/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("/admin/client")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-clients-detail"]],standalone:!0,features:[t.UHJ],decls:9,vars:4,consts:[["nzTitle","\u5ba2\u6237\u7aef\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u8bbe\u5907"],[3,"tunnel_id"],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["extra",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-info",1),t.I0R(2,"nz-tabset")(3,"nz-tab",2),t.wR5(4,"app-devices",3),t.C$Y(),t.I0R(5,"nz-tab",4),t.yuY(6,Be,0,0,"ng-template",5),t.C$Y()()(),t.yuY(7,Je,3,0,"ng-template",null,6,t.gJz)),2&n){const a=t.Gew(8);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("value",o.data),t.yG2(3),t.E7m("tunnel_id",o.id)}},dependencies:[h.MD,m.g1,m.Yh,m._c,p.Q9,l.cr,b.Ud,b.UH,d.Ez,c.ER,y.GG,g.A]})}return i})(),je=(()=>{class i{constructor(e,n,o){this.route=e,this.rs=n,this.ref=o,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/broker/create"}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:a=>`/admin/broker/${a.id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"port",sortable:!0,label:"\u7aef\u53e3",keyword:!0},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:a=>`/admin/broker/${a.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:a=>{this.rs.get(`broker/${a.id}/delete`).subscribe(_=>this.refresh())}}]}ngOnInit(){}refresh(){this.search(this.query)}search(e){this.query=e,this.loading=!0,this.rs.post("broker/search",e).subscribe(n=>{this.datum=n.data,this.total=n.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.gV),t.GI1(l.Cm),t.GI1(C.U7,8))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-brokers"]],standalone:!0,features:[t.UHJ],decls:1,vars:6,consts:[[3,"buttons","columns","operators","datum","total","loading","query"]],template:function(n,o){1&n&&(t.I0R(0,"im-smart-table",0),t.qCj("query",function(_){return o.search(_)}),t.C$Y()),2&n&&t.E7m("buttons",o.buttons)("columns",o.columns)("operators",o.operators)("datum",o.datum)("total",o.total)("loading",o.loading)},dependencies:[h.MD,l.YP]})}return i})();const qe=["form"];function He(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}let J=(()=>{class i{constructor(e,n,o,a,_){this.router=e,this.ms=n,this.msg=o,this.rs=a,this.route=_,this.id="",this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0MQTT\u670d\u52a1\u5668"},{key:"port",label:"\u7aef\u53e3",type:"number",default:1883,min:100,max:65535},{key:"description",label:"\u8bf4\u660e",type:"textarea"},{key:"disabled",label:"\u7981\u7528",type:"switch"}],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}ngAfterViewInit(){}load(){this.rs.get(`broker/${this.id}`).subscribe(e=>{this.values=e.data})}onSubmit(){this.form.valid?this.rs.post(`broker/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/broker/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(C.mU),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-broker-edit"]],viewQuery:function(n,o){if(1&n&&t.CC$(qe,5),2&n){let a;t.wto(a=t.Gqi())&&(o.form=a.first)}},standalone:!0,features:[t.UHJ],decls:5,vars:4,consts:[[3,"nzTitle","nzExtra"],[3,"fields","values"],["form",""],["extraTemplate",""],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,He,2,0,"ng-template",null,3,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzTitle","MQTT\u670d\u52a1\u5668"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[h.MD,d.Ez,p.Q9,l.qq]})}return i})();function Le(i,s){1&i&&(t.I0R(0,"button",5),t.OEk(1,"\u7f16\u8f91"),t.C$Y())}function Ve(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",6),t.qCj("nzOnConfirm",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.delete())}),t.OEk(1,"\u5220\u9664"),t.C$Y()}}function Ke(i,s){1&i&&(t.I0R(0,"nz-space"),t.yuY(1,Le,2,0,"button",3)(2,Ve,2,0,"button",4),t.C$Y())}const We=["form"];function Xe(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(1,"\u4fdd\u5b58"),t.C$Y()}}const en=[{path:"",pathMatch:"full",redirectTo:"dash"},{path:"dash",component:X,title:"\u63a7\u5236\u53f0",data:{breadcrumb:"\u63a7\u5236\u53f0"}},{path:"product",component:tt.G,title:"\u4ea7\u54c1\u5217\u8868",data:{breadcrumb:"\u4ea7\u54c1\u5217\u8868"}},{path:"product/create",component:x,title:"\u521b\u5efa\u4ea7\u54c1",data:{breadcrumb:"\u521b\u5efa\u4ea7\u54c1"}},{path:"product/:id",component:Yt,title:"\u4ea7\u54c1\u8be6\u60c5",data:{breadcrumb:"\u4ea7\u54c1\u8be6\u60c5"}},{path:"product/:id/edit",component:x,title:"\u7f16\u8f91\u4ea7\u54c1",data:{breadcrumb:"\u7f16\u8f91\u4ea7\u54c1"}},{path:"device",component:g.A,title:"\u8bbe\u5907\u5217\u8868",data:{breadcrumb:"\u8bbe\u5907\u5217\u8868"}},{path:"device/create",component:$.q,title:"\u521b\u5efa\u8bbe\u5907",data:{breadcrumb:"\u521b\u5efa\u8bbe\u5907"}},{path:"device/:id",component:Ft.M,title:"\u8bbe\u5907\u8be6\u60c5",data:{breadcrumb:"\u8bbe\u5907\u8be6\u60c5"}},{path:"device/:id/edit",component:$.q,title:"\u7f16\u8f91\u8bbe\u5907",data:{breadcrumb:"\u7f16\u8f91\u8bbe\u5907"}},{path:"broker",component:je,title:"MQTT\u670d\u52a1\u5668\u5217\u8868",data:{breadcrumb:"MQTT\u670d\u52a1\u5668\u5217\u8868"}},{path:"broker/create",component:J,title:"\u521b\u5efaMQTT\u670d\u52a1\u5668",data:{breadcrumb:"\u521b\u5efaMQTT\u670d\u52a1\u5668"}},{path:"broker/:id",component:(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.data={},this.loading=!1,this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"port",label:"\u7aef\u53e3"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.loading=!0,this.rs.post("broker/search",{filter:{id:this.id}}).subscribe(e=>{this.data=e.data[0]}).add(()=>this.loading=!1)}delete(){this.rs.get(`broker/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("/admin/broker")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(c.E5),t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-broker-detail"]],standalone:!0,features:[t.UHJ],decls:4,vars:3,consts:[["nzTitle","MQTT\u670d\u52a1\u5668\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["extra",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-info",1),t.C$Y(),t.yuY(2,Ke,3,0,"ng-template",null,2,t.gJz)),2&n){const a=t.Gew(3);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("value",o.data)}},dependencies:[h.MD,l.cr,p.Q9,b.Ud,b.UH,d.Ez,c.ER,y.GG,m.K6]})}return i})(),title:"MQTT\u670d\u52a1\u5668\u8be6\u60c5",data:{breadcrumb:"MQTT\u670d\u52a1\u5668\u8be6\u60c5"}},{path:"broker/:id/edit",component:J,title:"\u7f16\u8f91MQTT\u670d\u52a1\u5668",data:{breadcrumb:"\u7f16\u8f91MQTT\u670d\u52a1\u5668"}},{path:"gateway",component:St.I,title:"\u7f51\u5173\u5217\u8868",data:{breadcrumb:"\u7f51\u5173\u5217\u8868"}},{path:"gateway/create",component:O,title:"\u521b\u5efa\u7f51\u5173",data:{breadcrumb:"\u521b\u5efa\u7f51\u5173"}},{path:"gateway/:id",component:jt,title:"\u7f51\u5173\u8be6\u60c5",data:{breadcrumb:"\u7f51\u5173\u8be6\u60c5"}},{path:"gateway/:id/edit",component:O,title:"\u7f16\u8f91\u7f51\u5173",data:{breadcrumb:"\u7f16\u8f91\u7f51\u5173"}},{path:"project",component:qt.a,title:"\u9879\u76ee\u5217\u8868",data:{breadcrumb:"\u9879\u76ee\u5217\u8868"}},{path:"project/create",component:A.Q,title:"\u521b\u5efa\u9879\u76ee",data:{breadcrumb:"\u521b\u5efa\u9879\u76ee"}},{path:"project/:id",component:Ht.M,title:"\u9879\u76ee\u8be6\u60c5",data:{breadcrumb:"\u9879\u76ee\u8be6\u60c5"}},{path:"project/:id/edit",component:A.Q,title:"\u7f16\u8f91\u9879\u76ee",data:{breadcrumb:"\u7f16\u8f91\u9879\u76ee"}},{path:"project/:id/user",component:te.i,title:"\u7ed1\u5b9a\u7528\u6237",data:{breadcrumb:"\u7ed1\u5b9a\u7528\u6237"}},{path:"space",component:Lt.q,title:"\u7a7a\u95f4\u5217\u8868",data:{breadcrumb:"\u7a7a\u95f4\u5217\u8868"}},{path:"space/create",component:R.q,title:"\u521b\u5efa\u7a7a\u95f4",data:{breadcrumb:"\u521b\u5efa\u7a7a\u95f4"}},{path:"space/:id",component:Vt.E,title:"\u7a7a\u95f4\u8be6\u60c5",data:{breadcrumb:"\u7a7a\u95f4\u8be6\u60c5"}},{path:"space/:id/edit",component:R.q,title:"\u7a7a\u95f4\u7f16\u8f91",data:{breadcrumb:"\u7a7a\u95f4\u7f16\u8f91"}},{path:"space/:id/device",component:ee.m,title:"\u7ed1\u5b9a\u8bbe\u5907",data:{breadcrumb:"\u7ed1\u5b9a\u8bbe\u5907"}},{path:"server",component:F,title:"TCP\u670d\u52a1\u5668\u5217\u8868",data:{breadcrumb:"TCP\u670d\u52a1\u5668\u5217\u8868"}},{path:"server/create",component:S,title:"\u521b\u5efaTCP\u670d\u52a1\u5668",data:{breadcrumb:"\u521b\u5efaTCP\u670d\u52a1\u5668"}},{path:"server/:id",component:pe,title:"TCP\u670d\u52a1\u5668\u8be6\u60c5",data:{breadcrumb:"TCP\u670d\u52a1\u5668\u8be6\u60c5"}},{path:"server/:id/edit",component:S,title:"TCP\u670d\u52a1\u5668\u7f16\u8f91",data:{breadcrumb:"TCP\u670d\u52a1\u5668\u7f16\u8f91"}},{path:"link",component:M.e,title:"TCP\u8fde\u63a5\u5217\u8868",data:{breadcrumb:"TCP\u8fde\u63a5\u5217\u8868"}},{path:"link/create",component:B,title:"\u521b\u5efaTCP\u8fde\u63a5",data:{breadcrumb:"\u521b\u5efaTCP\u8fde\u63a5"}},{path:"link/:id",component:ke,title:"TCP\u8fde\u63a5\u8be6\u60c5",data:{breadcrumb:"TCP\u8fde\u63a5\u8be6\u60c5"}},{path:"link/:id/edit",component:B,title:"TCP\u8fde\u63a5\u7f16\u8f91",data:{breadcrumb:"TCP\u8fde\u63a5\u7f16\u8f91"}},{path:"serial",component:Ie.I,title:"\u4e32\u53e3\u5217\u8868",data:{breadcrumb:"\u4e32\u53e3\u5217\u8868"}},{path:"serial/create",component:Q,title:"\u521b\u5efa\u4e32\u53e3",data:{breadcrumb:"\u521b\u5efa\u4e32\u53e3"}},{path:"serial/:id",component:Ae,title:"\u4e32\u53e3\u8be6\u60c5",data:{breadcrumb:"\u4e32\u53e3\u8be6\u60c5"}},{path:"serial/:id/edit",component:Q,title:"\u4e32\u53e3\u7f16\u8f91",data:{breadcrumb:"\u4e32\u53e3\u7f16\u8f91"}},{path:"client",component:Re.i,title:"\u5ba2\u6237\u7aef\u5217\u8868",data:{breadcrumb:"\u5ba2\u6237\u7aef\u5217\u8868"}},{path:"client/create",component:U,title:"\u521b\u5efa\u5ba2\u6237\u7aef",data:{breadcrumb:"\u521b\u5efa\u5ba2\u6237\u7aef"}},{path:"client/:id",component:Ne,title:"\u5ba2\u6237\u7aef\u8be6\u60c5",data:{breadcrumb:"\u5ba2\u6237\u7aef\u8be6\u60c5"}},{path:"client/:id/edit",component:U,title:"\u5ba2\u6237\u7aef\u7f16\u8f91",data:{breadcrumb:"\u5ba2\u6237\u7aef\u7f16\u8f91"}},{path:"user",component:Kt.g,title:"\u7528\u6237\u5217\u8868",data:{breadcrumb:"\u7528\u6237\u5217\u8868"}},{path:"user/create",component:Y,title:"\u521b\u5efa\u7528\u6237",data:{breadcrumb:"\u521b\u5efa\u7528\u6237"}},{path:"user/:id",component:Xt,title:"\u7528\u6237\u8be6\u60c5",data:{breadcrumb:"\u7528\u6237\u8be6\u60c5"}},{path:"user/:id/edit",component:Y,title:"\u7f16\u8f91\u7528\u6237",data:{breadcrumb:"\u7f16\u8f91\u7528\u6237"}},{path:"setting",component:(()=>{class i{constructor(e,n,o){this.msg=e,this.rs=n,this.route=o,this.module="web",this.fields=[],this.values={},this.route.queryParamMap.subscribe(a=>{this.module=a.get("module"),this.load()})}load(){this.rs.get("setting/"+this.module+"/form").subscribe(e=>{this.fields=e.data}),this.rs.get("setting/"+this.module).subscribe(e=>{this.values=e.data})}onSubmit(){this.form.valid?this.rs.post("setting/"+this.module,this.form.value).subscribe(e=>{this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(f.yo),t.GI1(l.Cm),t.GI1(c.gV))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-setting"]],viewQuery:function(n,o){if(1&n&&t.CC$(We,5),2&n){let a;t.wto(a=t.Gqi())&&(o.form=a.first)}},standalone:!0,features:[t.UHJ],decls:5,vars:3,consts:[["nzTitle","\u8bbe\u7f6e Web\u670d\u52a1",3,"nzExtra"],[3,"fields","values"],["form",""],["extraTemplate",""],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.I0R(0,"nz-card",0),t.wR5(1,"im-smart-editor",1,2),t.C$Y(),t.yuY(3,Xe,2,0,"ng-template",null,3,t.gJz)),2&n){const a=t.Gew(4);t.E7m("nzExtra",a),t.yG2(),t.E7m("fields",o.fields)("values",o.values)}},dependencies:[d.Ez,p.Q9,l.qq]})}return i})(),title:"\u8bbe\u7f6e",data:{breadcrumb:"\u8bbe\u7f6e"}},{path:"web",component:j.U,title:"\u6269\u5c55\u9875\u9762",data:{breadcrumb:"\u6269\u5c55\u9875\u9762"}},{path:"alarm",component:q.s,title:"\u544a\u8b66\u65e5\u5fd7",data:{breadcrumb:"\u544a\u8b66\u65e5\u5fd7"}},{path:"**",component:l.Wq}];let nn=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.a4G({type:i});static#n=this.\u0275inj=t.s3X({imports:[c.qQ.forChild(en),c.qQ]})}return i})(),on=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.a4G({type:i});static#n=this.\u0275inj=t.s3X({imports:[h.MD,nn,C.vc]})}return i})()}}]);