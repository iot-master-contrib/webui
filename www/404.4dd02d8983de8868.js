"use strict";(self.webpackChunkwebui=self.webpackChunkwebui||[]).push([[404],{5404:(ln,x,l)=>{l.r(x),l.d(x,{AdminModule:()=>rn});var h=l(177),c=l(6530),Q=l(3075),L=l(7203),r=l(9169),Z=l(8682),D=l(7529),d=l(5703),u=l(4341),K=l(3217),t=l(4438);const H=["test"],J=["editor"],W=()=>[16,16];function q(i,s){1&i&&t.nrm(0,"app-input-product",9),2&i&&t.Y8G("formControl",s.control)}let tt=(()=>{class i{constructor(){this.fields=[{key:"test",type:"text",label:"test"},{key:"zzz",type:"template",label:"zzz",template:this.test},{key:"abc",type:"table",label:"abc",children:[{key:"a",type:"number",label:"A"},{key:"b",type:"number",label:"B"},{key:"c",type:"table",label:"def",children:[{key:"d",type:"number",label:"D"},{key:"e",type:"number",label:"E"}]},{key:"f",type:"object",label:"C",children:[{key:"a",type:"number",label:"A"},{key:"b",type:"number",label:"B"}]}]}],this.values={test:"\u5f20\u6770\u4e00",abc:[{a:1,b:2,f:{a:2,b:3}}]}}ngAfterViewInit(){setTimeout(()=>{this.fields[1].template=this.test})}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-dash"]],viewQuery:function(n,o){if(1&n&&(t.GBs(H,5),t.GBs(J,5)),2&n){let a;t.mGM(a=t.lsd())&&(o.test=a.first),t.mGM(a=t.lsd())&&(o.editor=a.first)}},standalone:!0,features:[t.aNF],decls:21,vars:2,consts:[["test",""],[3,"nzGutter"],["nzSpan","8"],["model","gateway","title","\u7f51\u5173\u603b\u6570"],["model","device","title","\u8bbe\u5907\u603b\u6570"],["model","product","title","\u4ea7\u54c1\u603b\u6570"],["model","project","title","\u9879\u76ee\u603b\u6570"],["model","space","title","\u7a7a\u95f4\u603b\u6570"],["model","user","title","\u7528\u6237\u603b\u6570"],[3,"formControl"]],template:function(n,o){1&n&&(t.j41(0,"nz-row",1)(1,"nz-col",2)(2,"nz-card"),t.nrm(3,"app-count",3),t.k0s()(),t.j41(4,"nz-col",2)(5,"nz-card"),t.nrm(6,"app-count",4),t.k0s()(),t.j41(7,"nz-col",2)(8,"nz-card"),t.nrm(9,"app-count",5),t.k0s()(),t.j41(10,"nz-col",2)(11,"nz-card"),t.nrm(12,"app-count",6),t.k0s()(),t.j41(13,"nz-col",2)(14,"nz-card"),t.nrm(15,"app-count",7),t.k0s()(),t.j41(16,"nz-col",2)(17,"nz-card"),t.nrm(18,"app-count",8),t.k0s()()(),t.DNE(19,q,1,1,"ng-template",null,0,t.C5r)),2&n&&t.Y8G("nzGutter",t.lJ4(1,W))},dependencies:[Z.F,D.e,D.Uq,d.cK,u.YN,u.BC,K.t,u.X1,u.l_]})}return i})();var et=l(9233),m=l(513),nt=l(1997);let z=(()=>{class i{get value(){return this._value}set value(e){this._value=e,this.onChange(e)}constructor(e){this.rs=e,this.options=[],this._value="",this.load()}ngOnInit(){}load(){this.rs.get("protocol/list").subscribe(e=>{this.options=e.data.map(n=>({value:n.name,label:n.label}))})}registerOnChange(e){this.onChange=e}registerOnTouched(e){}setDisabledState(e){}writeValue(e){this._value=e}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(r.By))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-input-protocol"]],standalone:!0,features:[t.Jv_([{provide:u.kq,useExisting:(0,t.Rfq)(()=>i),multi:!0}]),t.aNF],decls:1,vars:2,consts:[[3,"ngModelChange","nzOptions","ngModel"]],template:function(n,o){1&n&&(t.j41(0,"nz-select",0),t.mxI("ngModelChange",function(f){return t.DH7(o.value,f)||(o.value=f),f}),t.k0s()),2&n&&(t.Y8G("nzOptions",o.options),t.R50("ngModel",o.value))},dependencies:[nt.WI,u.YN,u.BC,u.vS],styles:["nz-select[_ngcontent-%COMP%]{width:100%}"]})}return i})();var b=l(7094);const it=["form"],ot=["chooseProtocol"];function at(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}function st(i,s){1&i&&t.nrm(0,"app-input-protocol",6),2&i&&t.Y8G("formControl",s.control)}let B=(()=>{class i{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u4ea7\u54c1"},{key:"keywords",label:"\u5173\u952e\u5b57",type:"tags",default:[]},{key:"icon",label:"\u56fe\u6807",type:"text"},{key:"protocol",label:"\u534f\u8bae",type:"template",template:this.chooseProtocol},{key:"url",label:"\u94fe\u63a5",type:"text"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.fields=[],this.values={}}ngAfterViewInit(){setTimeout(()=>this.build(),1)}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.rs.get("product/"+this.id).subscribe(e=>{this.values=e.data})}onSubmit(){this.form.valid?this.rs.post(`product/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/product/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-edit"]],viewQuery:function(n,o){if(1&n&&(t.GBs(it,5),t.GBs(ot,5)),2&n){let a;t.mGM(a=t.lsd())&&(o.form=a.first),t.mGM(a=t.lsd())&&(o.chooseProtocol=a.first)}},standalone:!0,features:[t.aNF],decls:7,vars:4,consts:[["form",""],["extraTemplate",""],["chooseProtocol",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",3),t.nrm(1,"im-smart-editor",4,0),t.k0s(),t.DNE(3,at,2,0,"ng-template",null,1,t.C5r)(5,st,1,1,"ng-template",null,2,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzTitle","\u4ea7\u54c1"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[h.MD,u.X1,u.BC,u.l_,m.aO,d.cK,r.Ay,z]})}return i})();var _=l(7685),y=l(2874),p=l(9541),g=l(4658),F=l(5579),E=l(1635),j=l(6977),k=l(6035),P=l(1025),T=l(317),rt=l(8203);const lt=["*"],G="collapse";let ut=(()=>{class i{constructor(e,n,o,a){this.nzConfigService=e,this.cdr=n,this.directionality=o,this.destroy$=a,this._nzModuleName=G,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(G).pipe((0,j.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,j.Q)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(e){this.listOfNzCollapsePanelComponent.push(e)}removePanel(e){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(e),1)}click(e){this.nzAccordion&&!e.nzActive&&this.listOfNzCollapsePanelComponent.filter(n=>n!==e).forEach(n=>{n.nzActive&&(n.nzActive=!1,n.nzActiveChange.emit(n.nzActive),n.markForCheck())}),e.nzActive=!e.nzActive,e.nzActiveChange.emit(e.nzActive)}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(k.yx),t.rXU(t.gRc),t.rXU(rt.dS,8),t.rXU(P.y4))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(n,o){2&n&&t.AVh("ant-collapse-icon-position-left","left"===o.nzExpandIconPosition)("ant-collapse-icon-position-right","right"===o.nzExpandIconPosition)("ant-collapse-ghost",o.nzGhost)("ant-collapse-borderless",!o.nzBordered)("ant-collapse-rtl","rtl"===o.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[t.Jv_([P.y4]),t.aNF],ngContentSelectors:lt,decls:1,vars:0,template:function(n,o){1&n&&(t.NAR(),t.SdG(0))},encapsulation:2,changeDetection:0})}return(0,E.Cg)([(0,k.H4)(),(0,T.H3)()],i.prototype,"nzAccordion",void 0),(0,E.Cg)([(0,k.H4)(),(0,T.H3)()],i.prototype,"nzBordered",void 0),(0,E.Cg)([(0,k.H4)(),(0,T.H3)()],i.prototype,"nzGhost",void 0),i})();function dt(i,s){if(1&i&&t.nrm(0,"app-product-version",6),2&i){const e=t.XpG();t.Y8G("product_id",e.id)}}function mt(i,s){if(1&i&&t.nrm(0,"app-devices",7),2&i){const e=t.XpG();t.Y8G("product_id",e.id)("project_id",e.project_id)}}function ht(i,s){1&i&&(t.j41(0,"button",11),t.EFF(1,"\u7f16\u8f91"),t.k0s())}function bt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",12),t.bIt("nzOnConfirm",function(){t.eBV(e);const o=t.XpG(3);return t.Njj(o.delete())}),t.EFF(1,"\u5220\u9664"),t.k0s()}}function ft(i,s){1&i&&(t.j41(0,"nz-space"),t.DNE(1,ht,2,0,"button",9)(2,bt,2,0,"button",10),t.k0s())}function _t(i,s){if(1&i&&t.DNE(0,ft,3,0,"nz-space",8),2&i){const e=t.XpG();t.Y8G("ngIf",!e.project_id)}}let yt=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.base="/admin",this.value="",this.data={},this.fields=[{label:"ID",key:"id"},{label:"\u540d\u79f0",key:"name"},{label:"\u5173\u952e\u5b57",key:"keywords",type:"tags"},{label:"\u521b\u5efa\u65f6\u95f4",key:"created",type:"date"},{label:"\u8bf4\u660e",key:"description",span:2}]}ngOnInit(){this.route.parent?.snapshot.paramMap.has("project")&&(this.project_id=this.route.parent?.snapshot.paramMap.get("project"),this.base=`/project/${this.project_id}`),this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.rs.get(`product/${this.id}`,{}).subscribe(e=>{this.data=e.data})}delete(){this.rs.get(`product/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("admin/product")}),this.load()}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-detail"]],standalone:!0,features:[t.aNF],decls:10,vars:3,consts:[["extra",""],["nzTitle","\u4ea7\u54c1\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u4ea7\u54c1\u7248\u672c"],["nz-tab",""],["nzTitle","\u4ea7\u54c1\u8bbe\u5907"],[3,"product_id"],[3,"product_id","project_id"],[4,"ngIf"],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",1),t.nrm(1,"im-smart-info",2)(2,"nz-collapse"),t.j41(3,"nz-tabset")(4,"nz-tab",3),t.DNE(5,dt,1,1,"ng-template",4),t.k0s(),t.j41(6,"nz-tab",5),t.DNE(7,mt,1,2,"ng-template",4),t.k0s()()(),t.DNE(8,_t,1,1,"ng-template",null,0,t.C5r)),2&n){const a=t.sdS(9);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("value",o.data)}},dependencies:[h.MD,h.bT,r.Zm,d.cK,_.U5,m.aO,_.Dq,c.Wk,y.PV,p.hM,p.JZ,p.rE,p.Tl,g.D,F.L,ut]})}return i})();var N=l(6542),vt=l(5578),zt=l(8238),v=l(3053);const gt=["form"];function Ct(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}let U=(()=>{class i{constructor(e,n,o,a,f){this.router=e,this.ms=n,this.msg=o,this.rs=a,this.route=f,this.base="/admin",this.id="",this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u7f51\u5173"},{key:"keywords",label:"\u5173\u952e\u5b57",type:"tags",default:[]},{key:"description",label:"\u8bf4\u660e",type:"textarea"},{key:"username",label:"MQTT\u7528\u6237\u540d",type:"text"},{key:"password",label:"MQTT\u5bc6\u7801",type:"text"},{key:"disabled",label:"\u7981\u7528",type:"switch"}],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}ngAfterViewInit(){}load(){this.rs.get(`gateway/${this.id}`).subscribe(e=>{this.values=e.data})}onSubmit(){this.form.valid?this.rs.post(`gateway/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl(`${this.base}/gateway/`+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(v.N_),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-gateway-edit"]],viewQuery:function(n,o){if(1&n&&t.GBs(gt,5),2&n){let a;t.mGM(a=t.lsd())&&(o.form=a.first)}},standalone:!0,features:[t.aNF],decls:5,vars:4,consts:[["form",""],["extraTemplate",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",2),t.nrm(1,"im-smart-editor",3,0),t.k0s(),t.DNE(3,Ct,2,0,"ng-template",null,1,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzTitle","\u7f51\u5173"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[h.MD,m.aO,d.cK,r.Ay]})}return i})();function kt(i,s){}function Et(i,s){1&i&&(t.j41(0,"button",7),t.EFF(1,"\u7f16\u8f91"),t.k0s())}function Tt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",8),t.bIt("nzOnConfirm",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.delete())}),t.EFF(1,"\u5220\u9664"),t.k0s()}}function xt(i,s){1&i&&(t.j41(0,"nz-space"),t.DNE(1,Et,2,0,"button",5)(2,Tt,2,0,"button",6),t.k0s())}let Dt=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.base="/admin",this.data={},this.loading=!1,this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"project",label:"\u9879\u76ee",type:"link",link:()=>`${this.base}/project/${this.data.project_id}`},{key:"username",label:"\u7528\u6237\u540d"},{key:"password",label:"\u5bc6\u7801"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.loading=!0,this.rs.post("gateway/search",{filter:{id:this.id}}).subscribe(e=>{this.data=e.data[0]}).add(()=>this.loading=!1)}delete(){this.rs.get(`gateway/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl(`${this.base}/gateway`)})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-gateway-detail"]],standalone:!0,features:[t.aNF],decls:7,vars:3,consts:[["extra",""],["nzTitle","\u7f51\u5173\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u62a5\u8b66\u65e5\u5fd7"],["nz-tab",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",1),t.nrm(1,"im-smart-info",2),t.j41(2,"nz-tabset")(3,"nz-tab",3),t.DNE(4,kt,0,0,"ng-template",4),t.k0s()()(),t.DNE(5,xt,3,0,"ng-template",null,0,t.C5r)),2&n){const a=t.sdS(6);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("value",o.data)}},dependencies:[h.MD,r.Zm,d.cK,_.U5,_.Dq,m.aO,c.Wk,y.PV,p.hM,p.JZ,p.rE,p.Tl]})}return i})();var Bt=l(9635),I=l(4247),Ft=l(1369),jt=l(2582),S=l(1998),Pt=l(4432),Gt=l(4116);const Nt=["form"];function Ut(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}let X=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0},{key:"email",label:"\u90ae\u7bb1",type:"text"},{key:"cellphone",label:"\u624b\u673a\u53f7",type:"text"},{key:"disabled",label:"\u7981\u7528",type:"switch"},{key:"admin",label:"\u7ba1\u7406\u5458",type:"switch"}],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.rs.get("user/"+this.id).subscribe(e=>{this.values=e.data})}onSubmit(){this.form.valid?this.rs.post(`user/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/user/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-user-edit"]],viewQuery:function(n,o){if(1&n&&t.GBs(Nt,5),2&n){let a;t.mGM(a=t.lsd())&&(o.form=a.first)}},standalone:!0,features:[t.aNF],decls:5,vars:4,consts:[["form",""],["extraTemplate",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",2),t.nrm(1,"im-smart-editor",3,0),t.k0s(),t.DNE(3,Ut,2,0,"ng-template",null,1,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzTitle","\u7528\u6237"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[h.MD,m.aO,d.cK,r.Ay]})}return i})(),It=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-user-detail"]],standalone:!0,features:[t.aNF],decls:2,vars:0,template:function(n,o){1&n&&(t.j41(0,"p"),t.EFF(1,"user-detail works!"),t.k0s())}})}return i})();var St=l(6629),Xt=l(5090),C=l(6504);const Mt=["editor"];function At(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}let Ot=(()=>{class i{constructor(e,n){this.rs=e,this.ms=n,this.values={},this.fields=[{label:"",key:"properties",type:"table",children:[{label:"\u53d8\u91cf",key:"name",type:"text"},{label:"\u540d\u79f0",key:"label",type:"text"},{label:"\u7c7b\u578b",key:"type",type:"select",default:"int",options:[{label:"\u6574\u6570",value:"int"},{label:"\u6d6e\u70b9\u6570",value:"float"},{label:"\u5e03\u5c14\u578b",value:"bool"},{label:"\u5b57\u7b26\u4e32",value:"text"},{label:"\u6570\u7ec4",value:"array"},{label:"\u5bf9\u8c61",value:"object"}]},{label:"\u5355\u4f4d",key:"unit",type:"text"},{label:"\u6a21\u5f0f",key:"mode",type:"select",default:"r",options:[{label:"\u53ea\u8bfb",value:"r"},{label:"\u8bfb\u5199",value:"rw"}]}]}]}ngOnInit(){this.rs.get(`product/${this.product_id}/version/${this.version}/config/property`).subscribe(e=>{this.values={properties:e.data||[]}})}onSubmit(){this.rs.post(`product/${this.product_id}/version/${this.version}/config/property`,this.editor.value.properties).subscribe(n=>{this.ms.success("\u63d0\u793a","\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(r.By),t.rXU(C.xY))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-property-edit"]],viewQuery:function(n,o){if(1&n&&t.GBs(Mt,5),2&n){let a;t.mGM(a=t.lsd())&&(o.editor=a.first)}},inputs:{product_id:"product_id",version:"version"},standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[["editor",""],["extraTemplate",""],["nzTitle","\u5c5e\u6027\u7f16\u8f91",3,"nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",2),t.nrm(1,"im-smart-editor",3,0),t.k0s(),t.DNE(3,At,2,0,"ng-template",null,1,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[r.Ay,m.aO,d.cK]})}return i})();const Vt=["editor"];function $t(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}let wt=(()=>{class i{constructor(e,n){this.rs=e,this.ms=n,this.arguments=[{label:"\u53d8\u91cf",key:"name",type:"text"},{label:"\u540d\u79f0",key:"label",type:"text"},{label:"\u7c7b\u578b",key:"type",type:"select",default:"int",options:[{label:"\u6574\u6570",value:"int"},{label:"\u6d6e\u70b9\u6570",value:"float"},{label:"\u5e03\u5c14\u578b",value:"bool"},{label:"\u5b57\u7b26\u4e32",value:"text"},{label:"\u6570\u7ec4",value:"array"},{label:"\u5bf9\u8c61",value:"object"}]}],this.values={},this.fields=[{label:"",key:"events",type:"list",children:[{label:"\u7b49\u7ea7",key:"level",type:"number"},{label:"\u4e8b\u4ef6",key:"name",type:"text"},{label:"\u540d\u79f0",key:"label",type:"text"},{label:"\u8f93\u51fa",key:"outputs",type:"table",children:this.arguments}]}]}ngOnInit(){this.rs.get(`product/${this.product_id}/version/${this.version}/config/event`).subscribe(e=>{this.values={events:e.data||[]}})}onSubmit(){this.rs.post(`product/${this.product_id}/version/${this.version}/config/event`,this.editor.value.events).subscribe(n=>{this.ms.success("\u63d0\u793a","\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(r.By),t.rXU(C.xY))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-event-edit"]],viewQuery:function(n,o){if(1&n&&t.GBs(Vt,5),2&n){let a;t.mGM(a=t.lsd())&&(o.editor=a.first)}},inputs:{product_id:"product_id",version:"version"},standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[["editor",""],["extraTemplate",""],["nzTitle","\u4e8b\u4ef6\u7f16\u8f91",3,"nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",2),t.nrm(1,"im-smart-editor",3,0),t.k0s(),t.DNE(3,$t,2,0,"ng-template",null,1,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[r.Ay,m.aO,d.cK]})}return i})();const Yt=["editor"];function Rt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}let Qt=(()=>{class i{constructor(e,n){this.rs=e,this.ms=n,this.arguments=[{label:"\u53d8\u91cf",key:"name",type:"text"},{label:"\u540d\u79f0",key:"label",type:"text"},{label:"\u7c7b\u578b",key:"type",type:"select",default:"int",options:[{label:"\u6574\u6570",value:"int"},{label:"\u6d6e\u70b9\u6570",value:"float"},{label:"\u5e03\u5c14\u578b",value:"bool"},{label:"\u5b57\u7b26\u4e32",value:"text"},{label:"\u6570\u7ec4",value:"array"},{label:"\u5bf9\u8c61",value:"object"}]}],this.values={},this.fields=[{label:"",key:"actions",type:"list",children:[{label:"\u52a8\u4f5c",key:"name",type:"text"},{label:"\u540d\u79f0",key:"label",type:"text"},{label:"\u5f02\u6b65",key:"async",type:"switch"},{label:"\u8f93\u5165",key:"inputs",type:"table",children:this.arguments},{label:"\u8f93\u51fa",key:"outputs",type:"table",children:this.arguments}]}]}ngOnInit(){this.rs.get(`product/${this.product_id}/version/${this.version}/config/action`).subscribe(e=>{this.values={actions:e.data||[]}})}onSubmit(){this.rs.post(`product/${this.product_id}/version/${this.version}/config/action`,this.editor.value.actions).subscribe(n=>{this.ms.success("\u63d0\u793a","\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(r.By),t.rXU(C.xY))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-action-edit"]],viewQuery:function(n,o){if(1&n&&t.GBs(Yt,5),2&n){let a;t.mGM(a=t.lsd())&&(o.editor=a.first)}},inputs:{product_id:"product_id",version:"version"},standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[["editor",""],["extraTemplate",""],["nzTitle","\u52a8\u4f5c\u7f16\u8f91",3,"nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",2),t.nrm(1,"im-smart-editor",3,0),t.k0s(),t.DNE(3,Rt,2,0,"ng-template",null,1,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[r.Ay,m.aO,d.cK]})}return i})();const Lt=["editor"];function Zt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}let Kt=(()=>{class i{constructor(e,n){this.rs=e,this.ms=n,this.values={},this.fields=[{label:"",key:"mappers",type:"table",children:[]}]}ngOnInit(){this.rs.get(`product/${this.product_id}`).subscribe(e=>{this.rs.get(`protocol/${e.data.protocol}/mapper`).subscribe(o=>{this.fields[0].children=o.data,this.rs.get(`product/${this.product_id}/version/${this.version}/config/mapper`).subscribe(a=>{this.values={mappers:a.data||[]}})})})}onSubmit(){this.rs.post(`product/${this.product_id}/version/${this.version}/config/mapper`,this.editor.value.mappers).subscribe(n=>{this.ms.success("\u63d0\u793a","\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(r.By),t.rXU(C.xY))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-mapper-edit"]],viewQuery:function(n,o){if(1&n&&t.GBs(Lt,5),2&n){let a;t.mGM(a=t.lsd())&&(o.editor=a.first)}},inputs:{product_id:"product_id",version:"version"},standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[["editor",""],["extraTemplate",""],["nzTitle","\u6570\u636e\u6620\u5c04",3,"nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",2),t.nrm(1,"im-smart-editor",3,0),t.k0s(),t.DNE(3,Zt,2,0,"ng-template",null,1,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[m.aO,d.cK,r.Ay]})}return i})();const Ht=["editor"];function Jt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}let Wt=(()=>{class i{constructor(e,n){this.rs=e,this.ms=n,this.values={},this.fields=[{label:"",key:"pollers",type:"table",children:[]}]}ngOnInit(){this.rs.get(`product/${this.product_id}`).subscribe(e=>{this.rs.get(`protocol/${e.data.protocol}/poller`).subscribe(o=>{this.fields[0].children=o.data,this.rs.get(`product/${this.product_id}/version/${this.version}/config/poller`).subscribe(a=>{this.values={pollers:a.data||[]}})})})}onSubmit(){this.rs.post(`product/${this.product_id}/version/${this.version}/config/poller`,this.editor.value.pollers).subscribe(n=>{this.ms.success("\u63d0\u793a","\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(r.By),t.rXU(C.xY))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-poller-edit"]],viewQuery:function(n,o){if(1&n&&t.GBs(Ht,5),2&n){let a;t.mGM(a=t.lsd())&&(o.editor=a.first)}},inputs:{product_id:"product_id",version:"version"},standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[["editor",""],["extraTemplate",""],["nzTitle","\u6570\u636e\u8f6e\u8be2",3,"nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",2),t.nrm(1,"im-smart-editor",3,0),t.k0s(),t.DNE(3,Jt,2,0,"ng-template",null,1,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[m.aO,d.cK,r.Ay]})}return i})();function qt(i,s){if(1&i&&t.nrm(0,"app-product-property-edit",8),2&i){const e=t.XpG();t.Y8G("product_id",e.id)("version",e.version)}}function te(i,s){if(1&i&&t.nrm(0,"app-product-event-edit",8),2&i){const e=t.XpG();t.Y8G("product_id",e.id)("version",e.version)}}function ee(i,s){if(1&i&&t.nrm(0,"app-product-action-edit",8),2&i){const e=t.XpG();t.Y8G("product_id",e.id)("version",e.version)}}function ne(i,s){if(1&i&&t.nrm(0,"app-product-mapper-edit",8),2&i){const e=t.XpG();t.Y8G("product_id",e.id)("version",e.version)}}function ie(i,s){if(1&i&&t.nrm(0,"app-product-poller-edit",8),2&i){const e=t.XpG();t.Y8G("product_id",e.id)("version",e.version)}}let oe=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.value="",this.data={},this.fields=[{label:"ID",key:"id"},{label:"\u540d\u79f0",key:"name"},{label:"\u5173\u952e\u5b57",key:"keywords",type:"tags"},{label:"\u521b\u5efa\u65f6\u95f4",key:"created",type:"date"},{label:"\u8bf4\u660e",key:"description",span:2}]}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load()),this.route.snapshot.paramMap.has("version")&&(this.version=this.route.snapshot.paramMap.get("version"))}load(){this.rs.get(`product/${this.id}`,{}).subscribe(e=>{this.data=e.data})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-version-edit"]],standalone:!0,features:[t.aNF],decls:13,vars:2,consts:[["nzTitle","\u4ea7\u54c1\u7248\u672c\u7f16\u8f91"],[3,"fields","value"],["nzTitle","\u4ea7\u54c1\u5c5e\u6027"],["nz-tab",""],["nzTitle","\u4ea7\u54c1\u4e8b\u4ef6"],["nzTitle","\u4ea7\u54c1\u52a8\u4f5c"],["nzTitle","\u6570\u636e\u6620\u5c04"],["nzTitle","\u6570\u636e\u8f6e\u8be2"],[3,"product_id","version"]],template:function(n,o){1&n&&(t.j41(0,"nz-card",0),t.nrm(1,"im-smart-info",1),t.j41(2,"nz-tabset")(3,"nz-tab",2),t.DNE(4,qt,1,2,"ng-template",3),t.k0s(),t.j41(5,"nz-tab",4),t.DNE(6,te,1,2,"ng-template",3),t.k0s(),t.j41(7,"nz-tab",5),t.DNE(8,ee,1,2,"ng-template",3),t.k0s(),t.j41(9,"nz-tab",6),t.DNE(10,ne,1,2,"ng-template",3),t.k0s(),t.j41(11,"nz-tab",7),t.DNE(12,ie,1,2,"ng-template",3),t.k0s()()()),2&n&&(t.R7$(),t.Y8G("fields",o.fields)("value",o.data))},dependencies:[h.MD,r.Zm,d.cK,p.hM,p.JZ,p.rE,p.Tl,Ot,wt,Qt,Kt,Wt]})}return i})();const ae=()=>[];let M=(()=>{class i{constructor(e,n){this.rs=e,this.ref=n,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/server/create"}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:o=>`/admin/server/${o.id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"port",sortable:!0,label:"\u7aef\u53e3",keyword:!0},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.columnsSelect=[{key:"id",label:"ID",keyword:!0},{key:"name",label:"\u540d\u79f0",keyword:!0},{key:"port",label:"\u7aef\u53e3",keyword:!0}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:o=>`/admin/server/${o.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:o=>{this.rs.get(`server/${o.id}/delete`).subscribe(a=>this.refresh())}}],this.operatorsSelect=[{label:"\u9009\u62e9",action:o=>this.ref.close(o)}]}refresh(){this.search(this.query)}search(e){this.query=e,this.loading=!0,this.rs.post("server/search",e).subscribe(n=>{this.datum=n.data,this.total=n.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(r.By),t.rXU(v.J9,8))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-servers"]],standalone:!0,features:[t.aNF],decls:1,vars:7,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(n,o){1&n&&(t.j41(0,"im-smart-table",0),t.bIt("query",function(f){return o.search(f)}),t.k0s()),2&n&&t.Y8G("buttons",o.ref?t.lJ4(6,ae):o.buttons)("columns",o.ref?o.columnsSelect:o.columns)("operators",o.ref?o.operatorsSelect:o.operators)("datum",o.datum)("total",o.total)("loading",o.loading)},dependencies:[h.MD,r.B2]})}return i})();const se=["form"],re=["chooseProtocol"];function le(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}function ce(i,s){1&i&&t.nrm(0,"app-input-protocol",6),2&i&&t.Y8G("formControl",s.control)}let A=(()=>{class i{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u670d\u52a1\u7aef"},{key:"port",label:"\u7aef\u53e3",type:"number",min:1,max:65535,default:6e4},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae",type:"template",template:this.chooseProtocol,change:e=>setTimeout(()=>this.loadProtocolOptions(e))},{key:"protocol_options",label:"\u901a\u8baf\u534f\u8bae\u53c2\u6570",type:"object"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.fields=[],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}ngAfterViewInit(){setTimeout(()=>this.build(),1)}load(){this.rs.get("server/"+this.id).subscribe(e=>{this.values=e.data,this.loadProtocolOptions(this.values.protocol_name)})}loadProtocolOptions(e){e&&this.rs.get(`protocol/${e}/option`).subscribe(n=>{this.fields[4].children=n.data,this.form.group.setControl("protocol_options",this.form.build(n.data,this.form.value.protocol_options))})}onSubmit(){this.form.valid?this.rs.post(`server/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/server/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-servers-edit"]],viewQuery:function(n,o){if(1&n&&(t.GBs(se,5),t.GBs(re,5)),2&n){let a;t.mGM(a=t.lsd())&&(o.form=a.first),t.mGM(a=t.lsd())&&(o.chooseProtocol=a.first)}},standalone:!0,features:[t.aNF],decls:7,vars:4,consts:[["form",""],["extraTemplate",""],["chooseProtocol",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",3),t.nrm(1,"im-smart-editor",4,0),t.k0s(),t.DNE(3,le,2,0,"ng-template",null,1,t.C5r)(5,ce,1,1,"ng-template",null,2,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzTitle","\u670d\u52a1\u5668"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[h.MD,u.X1,u.BC,u.l_,m.aO,d.cK,r.Ay,z]})}return i})();var O=l(6068);function pe(i,s){}function ue(i,s){1&i&&(t.j41(0,"button",10),t.EFF(1,"\u7f16\u8f91"),t.k0s())}function de(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",11),t.bIt("nzOnConfirm",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.delete())}),t.EFF(1,"\u5220\u9664"),t.k0s()}}function me(i,s){1&i&&(t.j41(0,"nz-space"),t.DNE(1,ue,2,0,"button",8)(2,de,2,0,"button",9),t.k0s())}let he=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.data={},this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"port",label:"\u7aef\u53e3"},{key:"disabled",label:"\u7981\u7528"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.load()}load(){this.rs.get(`server/${this.id}`).subscribe(e=>{this.data=e.data})}delete(){this.rs.get(`server/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("/admin/server")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-servers-detail"]],standalone:!0,features:[t.aNF],decls:9,vars:4,consts:[["extra",""],["nzTitle","\u670d\u52a1\u5668\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzType","line"],["nzTitle","\u8fde\u63a5"],[3,"server_id"],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",1),t.nrm(1,"im-smart-info",2),t.j41(2,"nz-tabset",3)(3,"nz-tab",4),t.nrm(4,"app-links",5),t.k0s(),t.j41(5,"nz-tab",6),t.DNE(6,pe,0,0,"ng-template",7),t.k0s()()(),t.DNE(7,me,3,0,"ng-template",null,0,t.C5r)),2&n){const a=t.sdS(8);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("value",o.data),t.R7$(3),t.Y8G("server_id",o.id)}},dependencies:[h.MD,p.JZ,p.rE,p.Tl,d.cK,r.Zm,_.U5,_.Dq,m.aO,c.Wk,y.PV,O.l]})}return i})();var be=l(1011);let fe=(()=>{class i{constructor(e,n){this.ms=e,this.rs=n,this.id="",this.server={},this.placeholder=""}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){this.id!==e&&(this.id=e,this.id&&this.load())}load(){console.log("load servers",this.id),this.rs.get("server/"+this.id).subscribe(e=>{e.data&&(this.server=e.data)})}select(){this.ms.create({nzTitle:"\u9009\u62e9",nzContent:M,nzData:this.data}).afterClose.subscribe(e=>{console.log(e),e&&(this.server=e,this.id=e.id,this.onChange(this.id))})}change(e){console.log("on change",e),this.id=e,this.onChange(e),this.load()}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(v.N_),t.rXU(r.By))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-input-server"]],inputs:{data:"data",placeholder:"placeholder"},standalone:!0,features:[t.Jv_([{provide:u.kq,useExisting:(0,t.Rfq)(()=>i),multi:!0}]),t.aNF],decls:5,vars:3,consts:[["box",""],["nz-input","",3,"change","placeholder","value"],["type","button","nz-button","",3,"click"]],template:function(n,o){if(1&n){const a=t.RV6();t.j41(0,"input",1,0),t.bIt("change",function(){t.eBV(a);const R=t.sdS(1);return t.Njj(o.change(R.value))}),t.k0s(),t.j41(2,"button",2),t.bIt("click",function(){return t.eBV(a),t.Njj(o.select())}),t.EFF(3,"\u9009\u62e9"),t.k0s(),t.EFF(4)}2&n&&(t.Y8G("placeholder",o.placeholder)("value",o.id),t.R7$(4),t.SpI("\n",o.server.name,"\n"))},dependencies:[m.aO,be.Sy]})}return i})();const _e=["form"],ye=["chooseServer"],ve=["chooseProtocol"];function ze(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",6),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}function ge(i,s){1&i&&t.nrm(0,"app-input-server",7),2&i&&t.Y8G("formControl",s.control)}function Ce(i,s){1&i&&t.nrm(0,"app-input-protocol",7),2&i&&t.Y8G("formControl",s.control)}let V=(()=>{class i{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0},{key:"server_id",label:"\u670d\u52a1\u5668",type:"template",template:this.chooseServer},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae",type:"template",template:this.chooseProtocol,change:e=>setTimeout(()=>this.loadProtocolOptions(e))},{key:"protocol_options",label:"\u901a\u8baf\u534f\u8bae\u53c2\u6570",type:"object"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.fields=[],this.values={}}ngAfterViewInit(){setTimeout(()=>this.build(),1)}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.rs.get("link/"+this.id).subscribe(e=>{this.values=e.data,this.loadProtocolOptions(this.values.protocol_name)})}loadProtocolOptions(e){e&&this.rs.get(`protocol/${e}/option`).subscribe(n=>{this.fields[4].children=n.data,this.form.group.setControl("protocol_options",this.form.build(n.data,this.form.value.protocol_options))})}onSubmit(){this.form.valid?this.rs.post(`link/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/link/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-links-edit"]],viewQuery:function(n,o){if(1&n&&(t.GBs(_e,5),t.GBs(ye,5),t.GBs(ve,5)),2&n){let a;t.mGM(a=t.lsd())&&(o.form=a.first),t.mGM(a=t.lsd())&&(o.chooseServer=a.first),t.mGM(a=t.lsd())&&(o.chooseProtocol=a.first)}},standalone:!0,features:[t.aNF],decls:9,vars:4,consts:[["form",""],["extraTemplate",""],["chooseServer",""],["chooseProtocol",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",4),t.nrm(1,"im-smart-editor",5,0),t.k0s(),t.DNE(3,ze,2,0,"ng-template",null,1,t.C5r)(5,ge,1,1,"ng-template",null,2,t.C5r)(7,Ce,1,1,"ng-template",null,3,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzTitle","\u8fde\u63a5"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[h.MD,u.X1,u.BC,u.l_,m.aO,d.cK,r.Ay,fe,z]})}return i})();function ke(i,s){}function Ee(i,s){1&i&&(t.j41(0,"button",9),t.EFF(1,"\u7f16\u8f91"),t.k0s())}function Te(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",10),t.bIt("nzOnConfirm",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.delete())}),t.EFF(1,"\u5220\u9664"),t.k0s()}}function xe(i,s){1&i&&(t.j41(0,"nz-space"),t.DNE(1,Ee,2,0,"button",7)(2,Te,2,0,"button",8),t.k0s())}let De=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.data={},this.fields=[{key:"id",label:"ID"},{key:"server",label:"\u670d\u52a1\u5668",type:"link",link:()=>`/admin/server/${this.data.server_id}`},{key:"name",label:"\u540d\u79f0"},{key:"remote",label:"\u8fdc\u7a0b\u5730\u5740"},{key:"disabled",label:"\u7981\u7528"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.load()}load(){this.rs.get(`link/${this.id}`).subscribe(e=>{this.data=e.data})}delete(){this.rs.get(`link/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("/admin/link")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-links-detail"]],standalone:!0,features:[t.aNF],decls:9,vars:4,consts:[["extra",""],["nzTitle","\u8fde\u63a5\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u8bbe\u5907"],[3,"tunnel_id"],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",1),t.nrm(1,"im-smart-info",2),t.j41(2,"nz-tabset")(3,"nz-tab",3),t.nrm(4,"app-devices",4),t.k0s(),t.j41(5,"nz-tab",5),t.DNE(6,ke,0,0,"ng-template",6),t.k0s()()(),t.DNE(7,xe,3,0,"ng-template",null,0,t.C5r)),2&n){const a=t.sdS(8);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("value",o.data),t.R7$(3),t.Y8G("tunnel_id",o.id)}},dependencies:[h.MD,p.JZ,p.rE,p.Tl,d.cK,r.Zm,_.U5,_.Dq,m.aO,c.Wk,y.PV,g.D]})}return i})();var Be=l(72);const Fe=["form"],je=["chooseProtocol"];function Pe(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}function Ge(i,s){1&i&&t.nrm(0,"app-input-protocol",6),2&i&&t.Y8G("formControl",s.control)}let $=(()=>{class i{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u4e32\u53e3"},{key:"port_name",label:"\u7aef\u53e3",type:"select",options:this.ports},{key:"baud_rate",label:"\u6ce2\u7279\u7387",type:"select",default:9600,options:[{label:"150",value:150},{label:"200",value:200},{label:"300",value:300},{label:"600",value:600},{label:"1200",value:1200},{label:"1800",value:1800},{label:"2400",value:2400},{label:"4800",value:4800},{label:"9600",value:9600},{label:"19200",value:19200},{label:"38400",value:38400},{label:"57600",value:57600},{label:"115200",value:115200}]},{key:"data_bits",label:"\u5b57\u957f",type:"radio",options:[{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8}],default:8},{key:"parity_mode",label:"\u6821\u9a8c",type:"radio",options:[{label:"\u65e0",value:0},{label:"\u5947",value:1},{label:"\u5076",value:2},{label:"1",value:3},{label:"0",value:4}]},{key:"stop_bits",label:"\u505c\u6b62\u4f4d",type:"radio",options:[{label:"1",value:1},{label:"1.5",value:1.5,disabled:!0},{label:"2",value:2}]},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae",type:"template",template:this.chooseProtocol,change:e=>setTimeout(()=>this.loadProtocolOptions(e))},{key:"protocol_options",label:"\u901a\u8baf\u534f\u8bae\u53c2\u6570",type:"object"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.ports=[],this.fields=[],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load()),this.loadPorts()}ngAfterViewInit(){setTimeout(()=>this.build(),1)}load(){this.rs.get("serial/"+this.id).subscribe(e=>{this.values=e.data,this.loadProtocolOptions(this.values.protocol_name)})}loadPorts(){this.rs.get("serial/ports").subscribe(e=>{this.fields[2].options=e.data.map(n=>({value:n,label:n}))})}loadProtocolOptions(e){e&&this.rs.get(`protocol/${e}/option`).subscribe(n=>{this.fields[8].children=n.data,this.form.group.setControl("protocol_options",this.form.build(n.data,this.form.value.protocol_options))})}onSubmit(){this.form.valid?this.rs.post(`serial/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/serial/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-serials-edit"]],viewQuery:function(n,o){if(1&n&&(t.GBs(Fe,5),t.GBs(je,5)),2&n){let a;t.mGM(a=t.lsd())&&(o.form=a.first),t.mGM(a=t.lsd())&&(o.chooseProtocol=a.first)}},standalone:!0,features:[t.aNF],decls:7,vars:4,consts:[["form",""],["extraTemplate",""],["chooseProtocol",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",3),t.nrm(1,"im-smart-editor",4,0),t.k0s(),t.DNE(3,Pe,2,0,"ng-template",null,1,t.C5r)(5,Ge,1,1,"ng-template",null,2,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzTitle","\u4e32\u53e3"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[h.MD,u.X1,u.BC,u.l_,m.aO,d.cK,r.Ay,z]})}return i})();function Ne(i,s){}function Ue(i,s){1&i&&(t.j41(0,"button",9),t.EFF(1,"\u7f16\u8f91"),t.k0s())}function Ie(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",10),t.bIt("nzOnConfirm",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.delete())}),t.EFF(1,"\u5220\u9664"),t.k0s()}}function Se(i,s){1&i&&(t.j41(0,"nz-space"),t.DNE(1,Ue,2,0,"button",7)(2,Ie,2,0,"button",8),t.k0s())}let Xe=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.data={},this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"net",label:"\u7f51\u7edc"},{key:"addr",label:"\u5730\u5740"},{key:"port_name",label:"\u7aef\u53e3"},{key:"disabled",label:"\u7981\u7528"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae"},{key:"baud_rate",label:"\u6ce2\u7279\u7387"},{key:"parity_mode",label:"\u5947\u5076\u6821\u9a8c",type:"select",options:["\u65e0\u6821\u9a8c NONE","\u5947\u6821\u9a8c ODD","\u5076\u6821\u9a8c EVEN","1\u6821\u9a8c MARK","0\u6821\u9a8c SPACE"]},{key:"stop_bits",label:"\u505c\u6b62\u4f4d"},{key:"data_bits",label:"\u5b57\u957f"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.load()}load(){this.rs.get(`serial/${this.id}`).subscribe(e=>{this.data=e.data})}delete(){this.rs.get(`client/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("/admin/client")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-serials-detail"]],standalone:!0,features:[t.aNF],decls:9,vars:4,consts:[["extra",""],["nzTitle","\u4e32\u53e3\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u8bbe\u5907"],[3,"tunnel_id"],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",1),t.nrm(1,"im-smart-info",2),t.j41(2,"nz-tabset")(3,"nz-tab",3),t.nrm(4,"app-devices",4),t.k0s(),t.j41(5,"nz-tab",5),t.DNE(6,Ne,0,0,"ng-template",6),t.k0s()()(),t.DNE(7,Se,3,0,"ng-template",null,0,t.C5r)),2&n){const a=t.sdS(8);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("value",o.data),t.R7$(3),t.Y8G("tunnel_id",o.id)}},dependencies:[h.MD,p.JZ,p.rE,p.Tl,d.cK,r.Zm,_.U5,_.Dq,m.aO,c.Wk,y.PV,g.D]})}return i})();var Me=l(5123);const Ae=["form"],Oe=["chooseProtocol"];function Ve(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}function $e(i,s){1&i&&t.nrm(0,"app-input-protocol",6),2&i&&t.Y8G("formControl",s.control)}let w=(()=>{class i{build(){this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0\u5ba2\u6237\u7aef"},{key:"net",label:"\u7f51\u7edc",type:"select",default:"tcp",options:[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"}]},{key:"addr",label:"\u5730\u5740",type:"text"},{key:"port",label:"\u7aef\u53e3",type:"number",min:1,max:65535},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae",type:"template",template:this.chooseProtocol,change:e=>setTimeout(()=>this.loadProtocolOptions(e))},{key:"protocol_options",label:"\u901a\u8baf\u534f\u8bae\u53c2\u6570",type:"object"},{key:"description",label:"\u8bf4\u660e",type:"textarea"}]}constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.fields=[],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}ngAfterViewInit(){setTimeout(()=>this.build(),1)}load(){this.rs.get("client/"+this.id).subscribe(e=>{this.values=e.data,this.loadProtocolOptions(this.values.protocol_name)})}loadProtocolOptions(e){e&&this.rs.get(`protocol/${e}/option`).subscribe(n=>{this.fields[6].children=n.data,this.form.group.setControl("protocol_options",this.form.build(n.data,this.form.value.protocol_options))})}onSubmit(){this.form.valid?this.rs.post(`client/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl("/admin/client/"+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-clients-edit"]],viewQuery:function(n,o){if(1&n&&(t.GBs(Ae,5),t.GBs(Oe,5)),2&n){let a;t.mGM(a=t.lsd())&&(o.form=a.first),t.mGM(a=t.lsd())&&(o.chooseProtocol=a.first)}},standalone:!0,features:[t.aNF],decls:7,vars:4,consts:[["form",""],["extraTemplate",""],["chooseProtocol",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"],[3,"formControl"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",3),t.nrm(1,"im-smart-editor",4,0),t.k0s(),t.DNE(3,Ve,2,0,"ng-template",null,1,t.C5r)(5,$e,1,1,"ng-template",null,2,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzTitle","\u5ba2\u6237\u7aef"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[h.MD,u.X1,u.BC,u.l_,m.aO,d.cK,r.Ay,z]})}return i})();function we(i,s){}function Ye(i,s){1&i&&(t.j41(0,"button",9),t.EFF(1,"\u7f16\u8f91"),t.k0s())}function Re(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",10),t.bIt("nzOnConfirm",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.delete())}),t.EFF(1,"\u5220\u9664"),t.k0s()}}function Qe(i,s){1&i&&(t.j41(0,"nz-space"),t.DNE(1,Ye,2,0,"button",7)(2,Re,2,0,"button",8),t.k0s())}let Le=(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.id="",this.data={},this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"net",label:"\u7f51\u7edc"},{key:"addr",label:"\u5730\u5740"},{key:"port",label:"\u7aef\u53e3"},{key:"disabled",label:"\u7981\u7528"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"protocol_name",label:"\u901a\u8baf\u534f\u8bae"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.load()}load(){this.rs.get(`client/${this.id}`).subscribe(e=>{this.data=e.data})}delete(){this.rs.get(`client/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl("/admin/client")})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-clients-detail"]],standalone:!0,features:[t.aNF],decls:9,vars:4,consts:[["extra",""],["nzTitle","\u5ba2\u6237\u7aef\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nzTitle","\u8bbe\u5907"],[3,"tunnel_id"],["nzTitle","\u65e5\u5fd7"],["nz-tab",""],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",1),t.nrm(1,"im-smart-info",2),t.j41(2,"nz-tabset")(3,"nz-tab",3),t.nrm(4,"app-devices",4),t.k0s(),t.j41(5,"nz-tab",5),t.DNE(6,we,0,0,"ng-template",6),t.k0s()()(),t.DNE(7,Qe,3,0,"ng-template",null,0,t.C5r)),2&n){const a=t.sdS(8);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("value",o.data),t.R7$(3),t.Y8G("tunnel_id",o.id)}},dependencies:[h.MD,p.JZ,p.rE,p.Tl,d.cK,r.Zm,_.U5,_.Dq,m.aO,c.Wk,y.PV,g.D]})}return i})(),Ze=(()=>{class i{constructor(e,n,o){this.route=e,this.rs=n,this.ref=o,this.datum=[],this.total=0,this.loading=!1,this.buttons=[{icon:"plus",label:"\u521b\u5efa",link:()=>"/admin/broker/create"}],this.columns=[{key:"id",sortable:!0,label:"ID",keyword:!0,link:a=>`/admin/broker/${a.id}`},{key:"name",sortable:!0,label:"\u540d\u79f0",keyword:!0},{key:"port",sortable:!0,label:"\u7aef\u53e3",keyword:!0},{key:"created",sortable:!0,label:"\u521b\u5efa\u65f6\u95f4",date:!0}],this.operators=[{icon:"edit",title:"\u7f16\u8f91",link:a=>`/admin/broker/${a.id}/edit`},{icon:"delete",title:"\u5220\u9664",confirm:"\u786e\u8ba4\u5220\u9664\uff1f",action:a=>{this.rs.get(`broker/${a.id}/delete`).subscribe(f=>this.refresh())}}]}ngOnInit(){}refresh(){this.search(this.query)}search(e){this.query=e,this.loading=!0,this.rs.post("broker/search",e).subscribe(n=>{this.datum=n.data,this.total=n.total}).add(()=>this.loading=!1)}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.nX),t.rXU(r.By),t.rXU(v.J9,8))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-brokers"]],standalone:!0,features:[t.aNF],decls:1,vars:6,consts:[[3,"query","buttons","columns","operators","datum","total","loading"]],template:function(n,o){1&n&&(t.j41(0,"im-smart-table",0),t.bIt("query",function(f){return o.search(f)}),t.k0s()),2&n&&t.Y8G("buttons",o.buttons)("columns",o.columns)("operators",o.operators)("datum",o.datum)("total",o.total)("loading",o.loading)},dependencies:[h.MD,r.B2]})}return i})();const Ke=["form"];function He(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}let Y=(()=>{class i{constructor(e,n,o,a,f){this.router=e,this.ms=n,this.msg=o,this.rs=a,this.route=f,this.base="/admin",this.id="",this.fields=[{key:"id",label:"ID",type:"text",min:2,max:30,placeholder:"\u9009\u586b"},{key:"name",label:"\u540d\u79f0",type:"text",required:!0,default:"\u65b0MQTT\u670d\u52a1\u5668"},{key:"port",label:"\u7aef\u53e3",type:"number",default:1883,min:100,max:65535},{key:"description",label:"\u8bf4\u660e",type:"textarea"},{key:"disabled",label:"\u7981\u7528",type:"switch"}],this.values={}}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}ngAfterViewInit(){}load(){this.rs.get(`broker/${this.id}`).subscribe(e=>{this.values=e.data})}onSubmit(){this.form.valid?this.rs.post(`broker/${this.id||"create"}`,this.form.value).subscribe(n=>{this.router.navigateByUrl(`${this.base}/broker/`+n.data.id),this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(v.N_),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-broker-edit"]],viewQuery:function(n,o){if(1&n&&t.GBs(Ke,5),2&n){let a;t.mGM(a=t.lsd())&&(o.form=a.first)}},standalone:!0,features:[t.aNF],decls:5,vars:4,consts:[["form",""],["extraTemplate",""],[3,"nzTitle","nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",2),t.nrm(1,"im-smart-editor",3,0),t.k0s(),t.DNE(3,He,2,0,"ng-template",null,1,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzTitle","MQTT\u670d\u52a1\u5668"+(o.id?"\u7f16\u8f91":"\u521b\u5efa"))("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[h.MD,m.aO,d.cK,r.Ay]})}return i})();function Je(i,s){1&i&&(t.j41(0,"button",5),t.EFF(1,"\u7f16\u8f91"),t.k0s())}function We(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",6),t.bIt("nzOnConfirm",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.delete())}),t.EFF(1,"\u5220\u9664"),t.k0s()}}function qe(i,s){1&i&&(t.j41(0,"nz-space"),t.DNE(1,Je,2,0,"button",3)(2,We,2,0,"button",4),t.k0s())}const en=["form"];function nn(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onSubmit())}),t.EFF(1,"\u4fdd\u5b58"),t.k0s()}}const an=[{path:"",pathMatch:"full",redirectTo:"dash"},{path:"dash",component:tt,title:"\u63a7\u5236\u53f0",data:{breadcrumb:"\u63a7\u5236\u53f0"}},{path:"product",component:et.q,title:"\u4ea7\u54c1\u5217\u8868",data:{breadcrumb:"\u4ea7\u54c1\u5217\u8868"}},{path:"product/create",component:B,title:"\u521b\u5efa\u4ea7\u54c1",data:{breadcrumb:"\u521b\u5efa\u4ea7\u54c1"}},{path:"product/:id",component:yt,title:"\u4ea7\u54c1\u8be6\u60c5",data:{breadcrumb:"\u4ea7\u54c1\u8be6\u60c5"}},{path:"product/:id/edit",component:B,title:"\u7f16\u8f91\u4ea7\u54c1",data:{breadcrumb:"\u7f16\u8f91\u4ea7\u54c1"}},{path:"product/:id/version",component:F.L,title:"\u4ea7\u54c1\u7248\u672c",data:{breadcrumb:"\u4ea7\u54c1\u7248\u672c"}},{path:"product/:id/version/:version",component:oe,title:"\u4ea7\u54c1\u7248\u672c\u8be6\u60c5",data:{breadcrumb:"\u4ea7\u54c1\u7248\u672c\u8be6\u60c5"}},{path:"device",component:g.D,title:"\u8bbe\u5907\u5217\u8868",data:{breadcrumb:"\u8bbe\u5907\u5217\u8868"}},{path:"device/create",component:N.o,title:"\u521b\u5efa\u8bbe\u5907",data:{breadcrumb:"\u521b\u5efa\u8bbe\u5907"}},{path:"device/:id",component:vt.l,title:"\u8bbe\u5907\u8be6\u60c5",data:{breadcrumb:"\u8bbe\u5907\u8be6\u60c5"}},{path:"device/:id/edit",component:N.o,title:"\u7f16\u8f91\u8bbe\u5907",data:{breadcrumb:"\u7f16\u8f91\u8bbe\u5907"}},{path:"broker",component:Ze,title:"MQTT\u670d\u52a1\u5668\u5217\u8868",data:{breadcrumb:"MQTT\u670d\u52a1\u5668\u5217\u8868"}},{path:"broker/create",component:Y,title:"\u521b\u5efaMQTT\u670d\u52a1\u5668",data:{breadcrumb:"\u521b\u5efaMQTT\u670d\u52a1\u5668"}},{path:"broker/:id",component:(()=>{class i{constructor(e,n,o,a){this.router=e,this.msg=n,this.rs=o,this.route=a,this.base="/admin",this.data={},this.loading=!1,this.fields=[{key:"id",label:"ID"},{key:"name",label:"\u540d\u79f0"},{key:"port",label:"\u7aef\u53e3"},{key:"created",label:"\u521b\u5efa\u65f6\u95f4",type:"date"},{key:"description",label:"\u8bf4\u660e",span:2}]}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.load())}load(){this.loading=!0,this.rs.post("broker/search",{filter:{id:this.id}}).subscribe(e=>{this.data=e.data[0]}).add(()=>this.loading=!1)}delete(){this.rs.get(`broker/${this.id}/delete`,{}).subscribe(e=>{this.msg.success("\u5220\u9664\u6210\u529f"),this.router.navigateByUrl(`${this.base}/broker`)})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(c.Ix),t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-broker-detail"]],standalone:!0,features:[t.aNF],decls:4,vars:3,consts:[["extra",""],["nzTitle","MQTT\u670d\u52a1\u5668\u8be6\u60c5",3,"nzExtra"],[3,"fields","value"],["nz-button","","routerLink","edit",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","routerLink","edit"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u786e\u8ba4\u5220\u9664",3,"nzOnConfirm"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",1),t.nrm(1,"im-smart-info",2),t.k0s(),t.DNE(2,qe,3,0,"ng-template",null,0,t.C5r)),2&n){const a=t.sdS(3);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("value",o.data)}},dependencies:[h.MD,r.Zm,d.cK,_.U5,_.Dq,m.aO,c.Wk,y.PV,p.hM]})}return i})(),title:"MQTT\u670d\u52a1\u5668\u8be6\u60c5",data:{breadcrumb:"MQTT\u670d\u52a1\u5668\u8be6\u60c5"}},{path:"broker/:id/edit",component:Y,title:"\u7f16\u8f91MQTT\u670d\u52a1\u5668",data:{breadcrumb:"\u7f16\u8f91MQTT\u670d\u52a1\u5668"}},{path:"gateway",component:zt.V,title:"\u7f51\u5173\u5217\u8868",data:{breadcrumb:"\u7f51\u5173\u5217\u8868"}},{path:"gateway/create",component:U,title:"\u521b\u5efa\u7f51\u5173",data:{breadcrumb:"\u521b\u5efa\u7f51\u5173"}},{path:"gateway/:id",component:Dt,title:"\u7f51\u5173\u8be6\u60c5",data:{breadcrumb:"\u7f51\u5173\u8be6\u60c5"}},{path:"gateway/:id/edit",component:U,title:"\u7f16\u8f91\u7f51\u5173",data:{breadcrumb:"\u7f16\u8f91\u7f51\u5173"}},{path:"project",component:Bt.E,title:"\u9879\u76ee\u5217\u8868",data:{breadcrumb:"\u9879\u76ee\u5217\u8868"}},{path:"project/create",component:I.f,title:"\u521b\u5efa\u9879\u76ee",data:{breadcrumb:"\u521b\u5efa\u9879\u76ee"}},{path:"project/:id",component:Ft.A,title:"\u9879\u76ee\u8be6\u60c5",data:{breadcrumb:"\u9879\u76ee\u8be6\u60c5"}},{path:"project/:id/edit",component:I.f,title:"\u7f16\u8f91\u9879\u76ee",data:{breadcrumb:"\u7f16\u8f91\u9879\u76ee"}},{path:"project/:id/user",component:St.m,title:"\u7ed1\u5b9a\u7528\u6237",data:{breadcrumb:"\u7ed1\u5b9a\u7528\u6237"}},{path:"space",component:jt.V,title:"\u7a7a\u95f4\u5217\u8868",data:{breadcrumb:"\u7a7a\u95f4\u5217\u8868"}},{path:"space/create",component:S.a,title:"\u521b\u5efa\u7a7a\u95f4",data:{breadcrumb:"\u521b\u5efa\u7a7a\u95f4"}},{path:"space/:id",component:Pt.h,title:"\u7a7a\u95f4\u8be6\u60c5",data:{breadcrumb:"\u7a7a\u95f4\u8be6\u60c5"}},{path:"space/:id/edit",component:S.a,title:"\u7a7a\u95f4\u7f16\u8f91",data:{breadcrumb:"\u7a7a\u95f4\u7f16\u8f91"}},{path:"space/:id/device",component:Xt.q,title:"\u7ed1\u5b9a\u8bbe\u5907",data:{breadcrumb:"\u7ed1\u5b9a\u8bbe\u5907"}},{path:"server",component:M,title:"TCP\u670d\u52a1\u5668\u5217\u8868",data:{breadcrumb:"TCP\u670d\u52a1\u5668\u5217\u8868"}},{path:"server/create",component:A,title:"\u521b\u5efaTCP\u670d\u52a1\u5668",data:{breadcrumb:"\u521b\u5efaTCP\u670d\u52a1\u5668"}},{path:"server/:id",component:he,title:"TCP\u670d\u52a1\u5668\u8be6\u60c5",data:{breadcrumb:"TCP\u670d\u52a1\u5668\u8be6\u60c5"}},{path:"server/:id/edit",component:A,title:"TCP\u670d\u52a1\u5668\u7f16\u8f91",data:{breadcrumb:"TCP\u670d\u52a1\u5668\u7f16\u8f91"}},{path:"link",component:O.l,title:"TCP\u8fde\u63a5\u5217\u8868",data:{breadcrumb:"TCP\u8fde\u63a5\u5217\u8868"}},{path:"link/create",component:V,title:"\u521b\u5efaTCP\u8fde\u63a5",data:{breadcrumb:"\u521b\u5efaTCP\u8fde\u63a5"}},{path:"link/:id",component:De,title:"TCP\u8fde\u63a5\u8be6\u60c5",data:{breadcrumb:"TCP\u8fde\u63a5\u8be6\u60c5"}},{path:"link/:id/edit",component:V,title:"TCP\u8fde\u63a5\u7f16\u8f91",data:{breadcrumb:"TCP\u8fde\u63a5\u7f16\u8f91"}},{path:"serial",component:Be.J,title:"\u4e32\u53e3\u5217\u8868",data:{breadcrumb:"\u4e32\u53e3\u5217\u8868"}},{path:"serial/create",component:$,title:"\u521b\u5efa\u4e32\u53e3",data:{breadcrumb:"\u521b\u5efa\u4e32\u53e3"}},{path:"serial/:id",component:Xe,title:"\u4e32\u53e3\u8be6\u60c5",data:{breadcrumb:"\u4e32\u53e3\u8be6\u60c5"}},{path:"serial/:id/edit",component:$,title:"\u4e32\u53e3\u7f16\u8f91",data:{breadcrumb:"\u4e32\u53e3\u7f16\u8f91"}},{path:"client",component:Me.y,title:"\u5ba2\u6237\u7aef\u5217\u8868",data:{breadcrumb:"\u5ba2\u6237\u7aef\u5217\u8868"}},{path:"client/create",component:w,title:"\u521b\u5efa\u5ba2\u6237\u7aef",data:{breadcrumb:"\u521b\u5efa\u5ba2\u6237\u7aef"}},{path:"client/:id",component:Le,title:"\u5ba2\u6237\u7aef\u8be6\u60c5",data:{breadcrumb:"\u5ba2\u6237\u7aef\u8be6\u60c5"}},{path:"client/:id/edit",component:w,title:"\u5ba2\u6237\u7aef\u7f16\u8f91",data:{breadcrumb:"\u5ba2\u6237\u7aef\u7f16\u8f91"}},{path:"user",component:Gt.C,title:"\u7528\u6237\u5217\u8868",data:{breadcrumb:"\u7528\u6237\u5217\u8868"}},{path:"user/create",component:X,title:"\u521b\u5efa\u7528\u6237",data:{breadcrumb:"\u521b\u5efa\u7528\u6237"}},{path:"user/:id",component:It,title:"\u7528\u6237\u8be6\u60c5",data:{breadcrumb:"\u7528\u6237\u8be6\u60c5"}},{path:"user/:id/edit",component:X,title:"\u7f16\u8f91\u7528\u6237",data:{breadcrumb:"\u7f16\u8f91\u7528\u6237"}},{path:"setting",component:(()=>{class i{constructor(e,n,o){this.msg=e,this.rs=n,this.route=o,this.module="web",this.fields=[],this.values={},this.route.queryParamMap.subscribe(a=>{this.module=a.get("module"),this.load()})}load(){this.rs.get("setting/"+this.module+"/form").subscribe(e=>{this.fields=e.data}),this.rs.get("setting/"+this.module).subscribe(e=>{this.values=e.data})}onSubmit(){this.form.valid?this.rs.post("setting/"+this.module,this.form.value).subscribe(e=>{this.msg.success("\u4fdd\u5b58\u6210\u529f")}):this.msg.error("\u8bf7\u68c0\u67e5\u6570\u636e")}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(b.xh),t.rXU(r.By),t.rXU(c.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-setting"]],viewQuery:function(n,o){if(1&n&&t.GBs(en,5),2&n){let a;t.mGM(a=t.lsd())&&(o.form=a.first)}},standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[["form",""],["extraTemplate",""],["nzTitle","\u8bbe\u7f6e Web\u670d\u52a1",3,"nzExtra"],[3,"fields","values"],["nz-button","","nzType","primary",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"nz-card",2),t.nrm(1,"im-smart-editor",3,0),t.k0s(),t.DNE(3,nn,2,0,"ng-template",null,1,t.C5r)),2&n){const a=t.sdS(4);t.Y8G("nzExtra",a),t.R7$(),t.Y8G("fields",o.fields)("values",o.values)}},dependencies:[m.aO,d.cK,r.Ay]})}return i})(),title:"\u8bbe\u7f6e",data:{breadcrumb:"\u8bbe\u7f6e"}},{path:"web",component:Q.L,title:"\u6269\u5c55\u9875\u9762",data:{breadcrumb:"\u6269\u5c55\u9875\u9762"}},{path:"alarm",component:L.l,title:"\u544a\u8b66\u65e5\u5fd7",data:{breadcrumb:"\u544a\u8b66\u65e5\u5fd7"}},{path:"**",component:r.YN}];let sn=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[c.iI.forChild(an),c.iI]})}return i})(),rn=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[h.MD,sn,v.U6]})}return i})()}}]);